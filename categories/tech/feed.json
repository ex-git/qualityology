{
    "version": "https://jsonfeed.org/version/1",
    "title": "Qualityology - Let's get the most out of life! â€¢ All posts by \"tech\" category",
    "description": "To uncover the best way to achieve desired level of quality in everything. - We dive deep on adding quality to tech gadgets, business, and entertainment because quality matter in life.",
    "home_page_url": "https://www.qualityology.com",
    "items": [
        {
            "id": "https://www.qualityology.com/tech/install-isso-server-free-with-gcp/",
            "url": "https://www.qualityology.com/tech/install-isso-server-free-with-gcp/",
            "title": "Install Isso server free with GCP",
            "date_published": "2021-03-03T05:44:34.000Z",
            "content_html": "<p>Isso is an open source comment system similar to Disqus and other paid comment systems, but without using heavy third party script that contain tracking and analystic functions. It use SQLite3 database to store comments since comments take very litttle space. </p>\n<p><img src=\"/2021/isso.jpg\" alt=\"isso\"></p>\n<p>If you are using CMS or blog engine that doesn&#x2019;t support comments and you care about your website&#x2019;s loading time and also don&#x2019;t want your user to tracked by third party comment system. You should try Isso.</p>\n<h2 id=\"1-Get-a-Linux-server-GCP-free-tier-is-more-than-enough\"><a href=\"#1-Get-a-Linux-server-GCP-free-tier-is-more-than-enough\" class=\"headerlink\" title=\"1. Get a Linux server. GCP free tier is more than enough.\"></a>1. Get a Linux server. GCP free tier is more than enough.</h2><p>You will need a Linux server for Isso. If you don&#x2019;t have one, you can use Google Cloud Platform (GCP) and create an server with their free tier option. Comments system use very little traffic so you will not likely go over the free tier quota. <a href=\"https://www.qualityology.com/tech/build-an-extremely-fast-wordpress-gcp-part1-server/\">Start a Linux server first from here</a> </p>\n<h2 id=\"2-Point-a-sub-domain-to-your-GCP&#x2019;s-external-IP-from-step-1\"><a href=\"#2-Point-a-sub-domain-to-your-GCP&#x2019;s-external-IP-from-step-1\" class=\"headerlink\" title=\"2. Point a sub domain to your GCP&#x2019;s external IP from step 1.\"></a>2. Point a sub domain to your GCP&#x2019;s external IP from step 1.</h2><p>Using a domain is optional. But it is required if you want to use https your Isso link.</p>\n<p>You can create an sub domain like isso.your_domain.com and set the IP to GCP instance&#x2019;s external IP</p>\n<h2 id=\"3-Install-docker-and-docker-compose\"><a href=\"#3-Install-docker-and-docker-compose\" class=\"headerlink\" title=\"3. Install docker and docker-compose\"></a>3. Install docker and docker-compose</h2><p>Isso can be installed using docker. Easier to maintain and migrate if needed in the future.</p>\n<p>If you are using Debian from step 1. You can install docker and docker-compose via follow commands.</p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-comment\"># remove old docker installation</span></span><br><span class=\"line\">sudo apt-get remove docker docker-engine docker.io containerd runc</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"><span class=\"hljs-comment\"># add required packages</span></span><br><span class=\"line\">sudo apt-get install apt-transport-https ca-certificates curl gnupg</span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class=\"line\"><span class=\"hljs-comment\"># add docker source list</span></span><br><span class=\"line\"><span class=\"hljs-built_in\">echo</span> \\</span><br><span class=\"line\">  <span class=\"hljs-string\">&quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian \\</span></span><br><span class=\"line\"><span class=\"hljs-string\">  <span class=\"hljs-subst\">$(lsb_release -cs)</span> stable&quot;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\"># install docker-compose</span></span><br><span class=\"line\">sudo curl -L <span class=\"hljs-string\">&quot;https://github.com/docker/compose/releases/download/1.28.5/docker-compose-<span class=\"hljs-subst\">$(uname -s)</span>-<span class=\"hljs-subst\">$(uname -m)</span>&quot;</span> -o /usr/<span class=\"hljs-built_in\">local</span>/bin/docker-compose</span><br><span class=\"line\">sudo chmod +x /usr/<span class=\"hljs-built_in\">local</span>/bin/docker-compose</span><br><span class=\"line\"><span class=\"hljs-comment\"># add current user to docker group</span></span><br><span class=\"line\">sudo usermod -aG docker <span class=\"hljs-variable\">$USER</span></span><br><span class=\"line\">newgrp docker</span><br></pre></td></tr></table></figure>\n\n<p>To verify docker and docker-compose installed correctly. Run following command and you should see the version installed.</p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker -v</span><br><span class=\"line\">docker-compose -v</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Create-docker-compose-yml-for-Isso\"><a href=\"#4-Create-docker-compose-yml-for-Isso\" class=\"headerlink\" title=\"4. Create docker-compose.yml for Isso\"></a>4. Create <code>docker-compose.yml</code> for Isso</h2><figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir ~/Isso &amp;&amp; <span class=\"hljs-built_in\">cd</span> ~/Isso</span><br><span class=\"line\">nano docker-compose.yml</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\"># docker-compose.yml for Isso</span></span><br><span class=\"line\"><span class=\"hljs-comment\"># copy and paste below and ctl + x save</span></span><br><span class=\"line\"></span><br><span class=\"line\">isso:</span><br><span class=\"line\">  image: wonderfall/isso</span><br><span class=\"line\">  ports:</span><br><span class=\"line\">     - <span class=\"hljs-string\">&quot;8080:8080&quot;</span></span><br><span class=\"line\">  restart: unless-stopped</span><br><span class=\"line\">  environment:</span><br><span class=\"line\">    - GID=1000</span><br><span class=\"line\">    - UID=1000</span><br><span class=\"line\">  volumes:</span><br><span class=\"line\">    - ./config:/config</span><br><span class=\"line\">    - ./db:/db</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-Create-config-file-for-Isso\"><a href=\"#5-Create-config-file-for-Isso\" class=\"headerlink\" title=\"5. Create config file for Isso\"></a>5. Create config file for Isso</h2><p>Replace below conf with your own setup</p>\n<p>[general] <strong>host</strong>: your website or blog domain<br>[hash] <strong>salt</strong>: put some random string (letters + number)<br>[guard] <strong>require-email</strong>: if you don&#x2019;t require email for new comment, set it to false<br>[guard] <strong>require-author</strong>: if you don&#x2019;t require name for new comment, set it to false<br>[smtp] <strong>username</strong>: for comment email notification, you can your gmail for this<br>[smtp] <strong>password</strong>: for the email password. If you are using gmail and have 2FA enabled, generate an app password and use that one instead of your gmail password<br>[smtp] <strong>to</strong>: where should the email be sent to when new comment posted.<br>[smtp] <strong>from</strong>: show where the email is coming from<br>[admin] <strong>enabled</strong>: this will enable the admin panel for Isso. Address will be your Isso domain:8080/admin<br>[admin] <strong>password</strong>: your password for the admin panel.</p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir ~/Isso/config &amp;&amp; <span class=\"hljs-built_in\">cd</span> ~/Isso/config</span><br><span class=\"line\">nano isso.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\"># config/isso.conf</span></span><br><span class=\"line\"><span class=\"hljs-comment\"># copy and paste below and ctl + x save</span></span><br><span class=\"line\"></span><br><span class=\"line\">[general]</span><br><span class=\"line\">dbpath = /db/comments.db</span><br><span class=\"line\">host = https://www.qualityology.com</span><br><span class=\"line\">max-age = 1m</span><br><span class=\"line\">notify = smtp</span><br><span class=\"line\">reply-notifications = <span class=\"hljs-literal\">true</span></span><br><span class=\"line\">gravatar = <span class=\"hljs-literal\">true</span></span><br><span class=\"line\">[moderation]</span><br><span class=\"line\">enabled = <span class=\"hljs-literal\">true</span></span><br><span class=\"line\">purge-after = 30d</span><br><span class=\"line\">[guard]</span><br><span class=\"line\">enabled = <span class=\"hljs-literal\">true</span></span><br><span class=\"line\">ratelimit = 2</span><br><span class=\"line\">require-email = <span class=\"hljs-literal\">true</span></span><br><span class=\"line\">require-author = <span class=\"hljs-literal\">true</span></span><br><span class=\"line\">[server]</span><br><span class=\"line\">listen = http://0.0.0.0:8080</span><br><span class=\"line\">reload = off</span><br><span class=\"line\">profile = off</span><br><span class=\"line\">[markup]</span><br><span class=\"line\">options = strikethrough, superscript, autolink</span><br><span class=\"line\">allowed-elements =</span><br><span class=\"line\">allowed-attributes =</span><br><span class=\"line\">[<span class=\"hljs-built_in\">hash</span>]</span><br><span class=\"line\">salt = randomString123</span><br><span class=\"line\">algorithm = pbkdf2</span><br><span class=\"line\">[smtp]</span><br><span class=\"line\">username = no-reply@your_domain.com</span><br><span class=\"line\">password = change_to_your_password</span><br><span class=\"line\">host = smtp.gmail.com</span><br><span class=\"line\">port = 587</span><br><span class=\"line\">security = starttls</span><br><span class=\"line\">to = admin@your_domain.com</span><br><span class=\"line\">from = <span class=\"hljs-string\">&apos;Isso comments system&apos;</span>&lt;no-reply@your_domain.com&gt;</span><br><span class=\"line\">timeout = 10</span><br><span class=\"line\">[admin]</span><br><span class=\"line\">enabled = <span class=\"hljs-literal\">true</span></span><br><span class=\"line\">password = yourPassword</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-Start-the-Isso-container\"><a href=\"#6-Start-the-Isso-container\" class=\"headerlink\" title=\"6. Start the Isso container\"></a>6. Start the Isso container</h2><figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up -d</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-Setup-Nginx\"><a href=\"#7-Setup-Nginx\" class=\"headerlink\" title=\"7. Setup Nginx\"></a>7. Setup Nginx</h2><figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update -y</span><br><span class=\"line\">sudo apt-get install nginx -y</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-Install-certbot-for-free-SSL\"><a href=\"#8-Install-certbot-for-free-SSL\" class=\"headerlink\" title=\"8. Install certbot for free SSL.\"></a>8. Install certbot for free SSL.</h2><p>This is for your comment domain, not your website or blog domain. So you can call your Isso server with https.</p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install certbot python3-certbot-nginx</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-Generate-SSL-certificate-for-your-Isso-server\"><a href=\"#9-Generate-SSL-certificate-for-your-Isso-server\" class=\"headerlink\" title=\"9. Generate SSL certificate for your Isso server\"></a>9. Generate SSL certificate for your Isso server</h2><p>You will need to enter the sub domain from step 2 for this process.</p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo certbot certonly --nginx</span><br></pre></td></tr></table></figure>\n\n<p><strong>Follow the steps and you will get the certificate fullchain.pem and privkey.pem path.</strong></p>\n<h2 id=\"10-Create-a-Nginx-config-for-the-Isso-domain\"><a href=\"#10-Create-a-Nginx-config-for-the-Isso-domain\" class=\"headerlink\" title=\"10. Create a Nginx config for the Isso domain.\"></a>10. Create a Nginx config for the Isso domain.</h2><p>You will need to replace server_name with your sub domain below.</p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/nginx/conf.d/isso.conf</span><br><span class=\"line\"></span><br><span class=\"line\">server {</span><br><span class=\"line\">        listen 80;</span><br><span class=\"line\">        listen [::]:80;</span><br><span class=\"line\">        server_name isso.your_domain.com;</span><br><span class=\"line\">        <span class=\"hljs-built_in\">return</span> 301 https://comments.qualityology.com<span class=\"hljs-variable\">$request_uri</span>;</span><br><span class=\"line\">        access_log  /dev/null;</span><br><span class=\"line\">        error_log /dev/null;</span><br><span class=\"line\">}</span><br><span class=\"line\">server {</span><br><span class=\"line\">        listen 443 ssl http2;</span><br><span class=\"line\">        listen [::]:443 ssl http2;</span><br><span class=\"line\">        server_name isso.your_domain.com;</span><br><span class=\"line\">        access_log /var/<span class=\"hljs-built_in\">log</span>/nginx/isso-access.log;</span><br><span class=\"line\">        error_log  /var/<span class=\"hljs-built_in\">log</span>/nginx/isso-error.log;</span><br><span class=\"line\">        ssl_certificate     /etc/letsencrypt/live/isso.your_domain.com/fullchain.pem;</span><br><span class=\"line\">        ssl_certificate_key /etc/letsencrypt/live/isso.your_domain.com/privkey.pem;</span><br><span class=\"line\">        location / {</span><br><span class=\"line\">                proxy_set_header Host <span class=\"hljs-variable\">$http_host</span>;</span><br><span class=\"line\">                proxy_set_header X-Real-IP <span class=\"hljs-variable\">$remote_addr</span>;</span><br><span class=\"line\">                proxy_set_header X-Forwarded-For <span class=\"hljs-variable\">$proxy_add_x_forwarded_for</span>;</span><br><span class=\"line\">                proxy_set_header X-Forwarded-Proto <span class=\"hljs-variable\">$scheme</span>;</span><br><span class=\"line\">                proxy_pass http://localhost:8080;</span><br><span class=\"line\">        }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-Restart-Ngnix\"><a href=\"#11-Restart-Ngnix\" class=\"headerlink\" title=\"11. Restart Ngnix\"></a>11. Restart Ngnix</h2><figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service nginx restart</span><br><span class=\"line\">sudo service nginx restart</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"12-You-are-all-set\"><a href=\"#12-You-are-all-set\" class=\"headerlink\" title=\"12. You are all set.\"></a>12. You are all set.</h2><p>You now should be able to use your Isso server. Calling your server from your website/blog with something similar to below script.</p>\n<figure class=\"highlight javascript hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script </span><br><span class=\"line\">    data-isso=<span class=\"hljs-string\">&quot;//your_post_url&quot;</span> </span><br><span class=\"line\">    src=<span class=\"hljs-string\">&quot;//isso.your_domain.com/js/embed.min.js&quot;</span></span><br><span class=\"line\">    data-isso-<span class=\"hljs-built_in\">require</span>-author=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"line\">    data-isso-<span class=\"hljs-built_in\">require</span>-email=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"line\">    data-isso-avatar=<span class=\"hljs-string\">&quot;false&quot;</span></span><br><span class=\"line\">    data-isso-gravatar=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"line\">    data-isso-vote=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"line\">    data-isso-reveal-on-click=<span class=\"hljs-string\">&quot;true&quot;</span></span><br><span class=\"line\">&gt;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n",
            "tags": [
                "Server"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/install-docker-and-docker-compose-on-raspberry-pi/",
            "url": "https://www.qualityology.com/tech/install-docker-and-docker-compose-on-raspberry-pi/",
            "title": "Install Docker and Docker Compose On Raspberry Pi",
            "date_published": "2021-03-01T20:55:35.000Z",
            "content_html": "<p>If you need help installing Docker on your Raspberry Pi, be sure you pick the guide wisely. Some guides online won&#x2019;t work on Raspberry Pi. The following steps had been tested on Raspberry Pi 4.</p>\n<h2 id=\"1-Install-Docker\"><a href=\"#1-Install-Docker\" class=\"headerlink\" title=\"1. Install Docker\"></a>1. Install Docker</h2><p><img src=\"/2021/docker.png\" alt=\"docker\"></p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-comment\"># Install required packages</span></span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install -y \\</span><br><span class=\"line\">     apt-transport-https \\</span><br><span class=\"line\">     ca-certificates \\</span><br><span class=\"line\">     curl \\</span><br><span class=\"line\">     gnupg2 \\</span><br><span class=\"line\">     software-properties-common</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\"># Get recommened installation script from docker.</span></span><br><span class=\"line\">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class=\"line\">sudo sh get-docker.sh</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-comment\"># verify you have docker installed</span></span><br><span class=\"line\">docker -v</span><br><span class=\"line\"><span class=\"hljs-comment\"># Docker version 20.10.4, build d3cb89e</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2-Add-current-user-to-docker-group\"><a href=\"#2-Add-current-user-to-docker-group\" class=\"headerlink\" title=\"2. Add current user to docker group.\"></a>2. Add current user to docker group.</h2><p>This allow you to manage Docker as a non-root user. </p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo usermod -aG docker <span class=\"hljs-variable\">$USER</span></span><br><span class=\"line\">newgrp docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Install-Docker-Compose\"><a href=\"#3-Install-Docker-Compose\" class=\"headerlink\" title=\"3. Install Docker Compose\"></a>3. Install Docker Compose</h2><p><img src=\"/2021/docker-compose.jpg\" alt=\"docker-compose\"></p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-comment\"># Install Docker Compose from pip (Python3)</span></span><br><span class=\"line\">sudo apt install -y python3-pip libffi-dev</span><br><span class=\"line\">sudo pip3 install docker-compose</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-comment\"># verify you have docker-compose installed</span></span><br><span class=\"line\">docker-compose -v</span><br><span class=\"line\"><span class=\"hljs-comment\"># docker-compose version 1.28.5, build unknown</span></span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "Raspberry-Pi",
                "Docker"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/connect-to-existing-aws-appsync-api-from-a-react-application/",
            "url": "https://www.qualityology.com/tech/connect-to-existing-aws-appsync-api-from-a-react-application/",
            "title": "Connect to existing AWS AppSync API from a React Application",
            "date_published": "2021-02-27T04:53:22.000Z",
            "content_html": "<p>Have an existing API within AWS AppSync and need to connect it from a React web application? If you are not completely new to GraphQL you should know that the most popular GraphQL client is Apollo. </p>\n<p>There are many different way to connect to AWS AppSync with React, using different packages. Some required more packages/dependencies. </p>\n<p><img src=\"/2021/aws_appsync.jpeg\" alt=\"aws_appsync\"></p>\n<h2 id=\"1-Use-Apollo-client\"><a href=\"#1-Use-Apollo-client\" class=\"headerlink\" title=\"1. Use Apollo client\"></a>1. Use Apollo client</h2><p>The latest version <code>@apollo/client</code> can handle AWS AppSync&#x2019;s query and mutation just fine with simple setup and also support React hook out of the box. Per their official doc, they will only support <code>useQuery</code> for query and <code>useMutation</code> for mutation hooks in their future release. Component based query and mutation will still work but will not be supported. However, for subscription, <code>@apollo/client</code> and AWS AppSync API won&#x2019;t work without complex setup because AppSync&#x2019;s subscriptions use MQTT as the transport layer, but <code>@apollo/client</code> support WebSockets.</p>\n<p>If you are using React with version that support hook, and you don&#x2019;t have the need for subscription, this option will work very well.</p>\n<ol>\n<li>Install required package<br><code>yarn add @apollo/client aws-appsync-auth-link</code></li>\n<li>Create client.js with following setup. <code>aws-exports</code> is the config download from your AWS AppSync API</li>\n</ol>\n<figure class=\"highlight js hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> {</span><br><span class=\"line\">    ApolloClient, ApolloLink, InMemoryCache, createHttpLink,</span><br><span class=\"line\">} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;@apollo/client&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { createAuthLink } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;aws-appsync-auth-link&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> AppSyncConfig <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./aws-exports&apos;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> url = AppSyncConfig.aws_appsync_graphqlEndpoint;</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> region = AppSyncConfig.aws_project_region;</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> auth = {</span><br><span class=\"line\">    type: AppSyncConfig.aws_appsync_authenticationType,</span><br><span class=\"line\">    apiKey: AppSyncConfig.aws_appsync_apiKey,</span><br><span class=\"line\">};</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> link = ApolloLink.from([</span><br><span class=\"line\">    <span class=\"hljs-comment\">// @ts-ignore</span></span><br><span class=\"line\">    createAuthLink({ url, region, auth }),</span><br><span class=\"line\">    <span class=\"hljs-comment\">// @ts-ignore</span></span><br><span class=\"line\">    createHttpLink({ <span class=\"hljs-attr\">uri</span>: url }),</span><br><span class=\"line\">]);</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> ApolloClient({</span><br><span class=\"line\">    link,</span><br><span class=\"line\">    cache: <span class=\"hljs-keyword\">new</span> InMemoryCache(),</span><br><span class=\"line\">});</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> client;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>In your <code>index.js</code> add below code to Apollo client accessible.<br><code>ApolloProvider</code> will make your AppSync client accessable any child of the entry point component whic is App in this example.</li>\n</ol>\n<figure class=\"highlight js hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> { ApolloProvider } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;@apollo/client&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> client <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./graphQL/client&apos;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;ApolloProvider client={client}&gt;</span><br><span class=\"line\">&lt;App /&gt;</span><br><span class=\"line\">&lt;/ApolloProvider&gt;</span><br></pre></td></tr></table></figure>\n\n<p>Example of making a mutation call:</p>\n<figure class=\"highlight js hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> {</span><br><span class=\"line\">\tuseMutation,</span><br><span class=\"line\">  gql</span><br><span class=\"line\">} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;@apollo/client&apos;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> createTodo = gql<span class=\"hljs-string\">`</span></span><br><span class=\"line\"><span class=\"hljs-string\">  mutation CreateTodo(</span></span><br><span class=\"line\"><span class=\"hljs-string\">      item: String!</span></span><br><span class=\"line\"><span class=\"hljs-string\">    ) {</span></span><br><span class=\"line\"><span class=\"hljs-string\">    createUpdateMonitor(input: {</span></span><br><span class=\"line\"><span class=\"hljs-string\">      item: item</span></span><br><span class=\"line\"><span class=\"hljs-string\">    }) {</span></span><br><span class=\"line\"><span class=\"hljs-string\">        item</span></span><br><span class=\"line\"><span class=\"hljs-string\">    }</span></span><br><span class=\"line\"><span class=\"hljs-string\">  }</span></span><br><span class=\"line\"><span class=\"hljs-string\">`</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> [createTodoMutation] = useMutation(createTodo);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> handleCreateTodoClick = <span class=\"hljs-function\">() =&gt;</span> {</span><br><span class=\"line\">        <span class=\"hljs-keyword\">const</span> todo = {</span><br><span class=\"line\">          item: <span class=\"hljs-string\">&apos;visit qualityology.com&apos;</span></span><br><span class=\"line\">        }</span><br><span class=\"line\">        createTodoMutation({</span><br><span class=\"line\">            variables: todo,</span><br><span class=\"line\">        })</span><br><span class=\"line\">            .then(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">&apos;Todo created successfully&apos;</span>))</span><br><span class=\"line\">            .catch(<span class=\"hljs-function\">(<span class=\"hljs-params\">err</span>) =&gt;</span> {</span><br><span class=\"line\">                <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">&apos;Error occurred&apos;</span>);</span><br><span class=\"line\">                <span class=\"hljs-built_in\">console</span>.log(err);</span><br><span class=\"line\">            });</span><br><span class=\"line\">    };</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2-Use-AWS-AppSync-JavaScript-SDK\"><a href=\"#2-Use-AWS-AppSync-JavaScript-SDK\" class=\"headerlink\" title=\"2. Use AWS AppSync JavaScript SDK\"></a>2. Use AWS AppSync JavaScript SDK</h2><p>This SDK can be used with <code>apollo-client</code> and it is the offical SDK provided by AWS Labs. It support offline feature and also work with class components. Your <code>index.js</code> will need to be setup with the following code. You will need to download <code>aws-exports.js</code> from your AWS AppSync API and install <code>react-apollo aws-appsync-react</code> for this setup. ``aws-exports.js` contains the GraphQL endpoint url and your AWS AppSync API region, auth type info. </p>\n<p><code>new AWSAppSyncClient</code> will create a new AppSync client and store it in the <code>client</code> variable.<br><code>ApolloProvider</code> will make your AppSync client accessible any child of the entry point component whic is App in this example.</p>\n<figure class=\"highlight js hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> AWSAppSyncClient <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;aws-appsync&apos;</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> React <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;react&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> ReactDOM <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;react-dom&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> AppSyncConfig <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./aws-exports&apos;</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { ApolloProvider } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;react-apollo&apos;</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { Rehydrated } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;aws-appsync-react&apos;</span> <span class=\"hljs-comment\">// this needs to also be installed when working with React</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> App <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./App&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> AWSAppSyncClient({</span><br><span class=\"line\">  url: AppSyncConfig.graphqlEndpoint,</span><br><span class=\"line\">  region: AppSyncConfig.region,</span><br><span class=\"line\">  auth: {</span><br><span class=\"line\">    type: AppSyncConfig.authenticationType,</span><br><span class=\"line\">    apiKey: AppSyncConfig.apiKey,</span><br><span class=\"line\">    <span class=\"hljs-comment\">// jwtToken: async () =&gt; token, // Required when you use Cognito UserPools OR OpenID Connect. token object is obtained previously</span></span><br><span class=\"line\">  }</span><br><span class=\"line\">})</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> WithProvider = <span class=\"hljs-function\">() =&gt;</span> (</span><br><span class=\"line\">  &lt;ApolloProvider client={client}&gt;</span><br><span class=\"line\">    &lt;Rehydrated&gt;</span><br><span class=\"line\">      &lt;App /&gt;</span><br><span class=\"line\">    &lt;/Rehydrated&gt;</span><br><span class=\"line\">  &lt;/ApolloProvider&gt;</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(<span class=\"hljs-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">WithProvider</span> /&gt;</span></span>, <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&apos;root&apos;</span>));</span><br></pre></td></tr></table></figure>\n\n<p><code>Rehydrate</code> will make sure application cache has been read and is ready to use before rendering the app. If app is not ready, it will show the default <code>loading</code> text. If you want to confured the display text, you can call the render function as below.</p>\n<figure class=\"highlight jsx hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Rehydrated</span><br><span class=\"line\">  render={<span class=\"hljs-function\">(<span class=\"hljs-params\">{ rehydrated }</span>) =&gt;</span> (</span><br><span class=\"line\">    rehydrated ? <span class=\"hljs-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span> : <span class=\"hljs-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>Fancy loading function here!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span></span><br><span class=\"line\">  )}</span><br><span class=\"line\"> /&gt;</span><br></pre></td></tr></table></figure>\n\n<p>This method didn&#x2019;t work with out test application because it always show loading so it is not recommended to use unless you want to try it with a good reason. You can get more configuration from the project page <a href=\"https://github.com/awslabs/aws-mobile-appsync-sdk-js\">here</a>. </p>\n<h2 id=\"3-Use-AWS-Amplify\"><a href=\"#3-Use-AWS-Amplify\" class=\"headerlink\" title=\"3. Use AWS Amplify\"></a>3. Use AWS Amplify</h2><p>This is the easiest and with complete support of query, mutation, and subscription for AWS AppSync API. You will need your AWS AppSync API ID and the config export for this method. It can be found in AWS console.</p>\n<ol>\n<li><p>Install AWS Amplify cli. </p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g @aws-amplify/cli</span><br></pre></td></tr></table></figure>\n\n<p>The cli is needed for importing API</p>\n</li>\n<li><p>Navigate to your React project root folder. </p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">amplify init</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Add the codegen category to your React project. </p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">amplify add codegen --apiId YOUR_API_ID_HERE</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Generate client code. </p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">amplify codegen</span><br></pre></td></tr></table></figure>\n<p>Follow the steps in your terminal. </p>\n</li>\n<li><p>Add <code>aws-amplify</code></p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install aws-amplify</span><br></pre></td></tr></table></figure>\n<p>or use yarn</p>\n<figure class=\"highlight bash hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add aws-amplify</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Add below code to your React application root <code>index.js</code></p>\n<figure class=\"highlight js hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> { Amplify } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;aws-amplify&apos;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\">// some imports here</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { Amplify } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;aws-amplify&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> amplifyConfig <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;./aws-exports&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-comment\">// after all the imports</span></span><br><span class=\"line\"></span><br><span class=\"line\">Amplify.configure(amplifyConfig);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\">// the rest of the code, ReactDOM etc.</span></span><br></pre></td></tr></table></figure>\n\n<p>Example of how the function used to call mutation look like:</p>\n<figure class=\"highlight js hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> { API, graphqlOperation } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;aws-amplify&apos;</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { createTodo } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&apos;/graphql/mutations&apos;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> todo = {</span><br><span class=\"line\">\titem: <span class=\"hljs-string\">&apos;visit qualityology.com&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> update = <span class=\"hljs-keyword\">await</span> API.graphql(</span><br><span class=\"line\">            graphqlOperation(</span><br><span class=\"line\">                createTodo,</span><br><span class=\"line\">                {</span><br><span class=\"line\">                    input: todo,</span><br><span class=\"line\">                },</span><br><span class=\"line\">            ),</span><br><span class=\"line\">        )</span><br><span class=\"line\">        .then(<span class=\"hljs-function\">(<span class=\"hljs-params\">res</span>) =&gt;</span> res)</span><br><span class=\"line\">        .catch(<span class=\"hljs-function\">(<span class=\"hljs-params\">error</span>) =&gt;</span> <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">&apos;error, creating user&apos;</span>, error));</span><br><span class=\"line\"><span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">&apos;update&apos;</span>, update);</span><br></pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": [
                "Server",
                "React",
                "API"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/29-code-snippets-for-wordpress-users/",
            "url": "https://www.qualityology.com/tech/29-code-snippets-for-wordpress-users/",
            "title": "29 Code Snippets for WordPress Users",
            "date_published": "2021-02-23T20:09:23.000Z",
            "content_html": "<p>Tired of installing tons of WordPress plugins for small features? You can use code snippets to do certain things without a dedicated plugin. Generally the <code>functions.php</code> file is the place to add code snippes.</p>\n<p>If you don&#x2019;t want to edit PHP file and want to gain more fine control over code snippets? You should try out <strong>Code Snippets</strong> plugin. With <strong>Code Snippets</strong>, you can easily add PHP code snippets to your WordPress site without custom snippets in theme&#x2019;s <code>functions.php</code> file. Search <code>Code Snippets</code> in WordPress&#x2019;s Add Plugins page and install it. You can start adding code snippet just like how you write post.</p>\n<p>We collected some very useful code snippets for WordPress. All can be used with Code Snippets plugin or added it directly to PHP file.</p>\n<h2 id=\"1-Auto-update-plug-and-theme\"><a href=\"#1-Auto-update-plug-and-theme\" class=\"headerlink\" title=\"1. Auto update plug and theme\"></a>1. Auto update plug and theme</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add_filter( &apos;auto_update_plugin&apos;, &apos;__return_true&apos; );</span><br><span class=\"line\">add_filter( &apos;auto_update_theme&apos;, &apos;__return_true&apos; );</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-Remove-all-HTML-Comments-and-space\"><a href=\"#2-Remove-all-HTML-Comments-and-space\" class=\"headerlink\" title=\"2. Remove all HTML Comments and space\"></a>2. Remove all HTML Comments and space</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function callback($buffer) {</span><br><span class=\"line\">  $search = array(</span><br><span class=\"line\">\t&apos;/\\n/&apos;,</span><br><span class=\"line\">        &apos;/\\&gt;[^\\S ]+/s&apos;,  // strip whitespaces after tags, except space</span><br><span class=\"line\">        &apos;/[^\\S ]+\\&lt;/s&apos;,  // strip whitespaces before tags, except space</span><br><span class=\"line\">        &apos;/(\\s)+/s&apos;,       // shorten multiple whitespace sequences</span><br><span class=\"line\">\t&apos;/&lt;!--(.|s)*?--&gt;/&apos;</span><br><span class=\"line\">    );</span><br><span class=\"line\"></span><br><span class=\"line\">    $replace = array(</span><br><span class=\"line\">\t  &apos;&apos;,</span><br><span class=\"line\">        &apos;&gt;&apos;,</span><br><span class=\"line\">        &apos;&lt;&apos;,</span><br><span class=\"line\">        &apos;\\\\1&apos;,</span><br><span class=\"line\">\t &apos;&apos;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  </span><br><span class=\"line\">    #$buffer = preg_replace(&apos;/&lt;!--(.|s)*?--&gt;/&apos;, &apos;&apos;, $buffer);</span><br><span class=\"line\">  \t$buffer = preg_replace($search, $replace, $buffer);</span><br><span class=\"line\">    return $buffer;</span><br><span class=\"line\">}</span><br><span class=\"line\">function buffer_start() {</span><br><span class=\"line\">    ob_start(&quot;callback&quot;);</span><br><span class=\"line\">}</span><br><span class=\"line\">function buffer_end() {</span><br><span class=\"line\">    ob_end_flush();</span><br><span class=\"line\">}</span><br><span class=\"line\">add_action(&apos;get_header&apos;, &apos;buffer_start&apos;);</span><br><span class=\"line\">add_action(&apos;wp_footer&apos;, &apos;buffer_end&apos;, 9999);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Add-DNS-Prefetching\"><a href=\"#3-Add-DNS-Prefetching\" class=\"headerlink\" title=\"3. Add DNS Prefetching\"></a>3. Add DNS Prefetching</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//* Adding DNS Prefetching</span><br><span class=\"line\">function stb_dns_prefetch() {</span><br><span class=\"line\">echo &apos;&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot;&gt;</span><br><span class=\"line\">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//pagead2.googlesyndication.com&quot; /&gt;</span><br><span class=\"line\">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//googleads.g.doubleclick.net&quot; /&gt;</span><br><span class=\"line\">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//www.google-analytics.com&quot; /&gt;</span><br><span class=\"line\">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//s.gravatar.com/&quot; /&gt;&apos;;</span><br><span class=\"line\">}</span><br><span class=\"line\">add_action(&apos;wp_head&apos;, &apos;stb_dns_prefetch&apos;, 1);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Stop-loading-wp-emoji-release-min-js\"><a href=\"#4-Stop-loading-wp-emoji-release-min-js\" class=\"headerlink\" title=\"4. Stop loading wp-emoji-release.min.js\"></a>4. Stop loading wp-emoji-release.min.js</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">remove_action(&apos;wp_head&apos;, &apos;print_emoji_detection_script&apos;, 7);</span><br><span class=\"line\">remove_action(&apos;wp_print_styles&apos;, &apos;print_emoji_styles&apos;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-Prefer-loading-jquery-JavaScript-with-async-and-defer-tag\"><a href=\"#5-Prefer-loading-jquery-JavaScript-with-async-and-defer-tag\" class=\"headerlink\" title=\"5. Prefer loading jquery JavaScript with async and defer tag\"></a>5. Prefer loading jquery JavaScript with async and defer tag</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (!is_admin()) {</span><br><span class=\"line\">    add_filter( &apos;script_loader_tag&apos;, function ( $tag, $handle ) {    </span><br><span class=\"line\">        if ( strpos( $tag, &quot;jquery.min.js&quot; ) || strpos( $tag, &quot;jquery.js&quot;) ) {</span><br><span class=\"line\">            return $tag;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        return str_replace( &apos; src&apos;, &apos; async src&apos;, $tag );</span><br><span class=\"line\">    }, 10, 2 );</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-Load-CDN-jQuery-from-Google\"><a href=\"#6-Load-CDN-jQuery-from-Google\" class=\"headerlink\" title=\"6. Load CDN jQuery from Google\"></a>6. Load CDN jQuery from Google</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// Load CDN jQuery </span><br><span class=\"line\">add_action( &apos;wp_enqueue_scripts&apos;, &apos;register_jquery&apos; );</span><br><span class=\"line\">function register_jquery() {</span><br><span class=\"line\">    if (!is_admin() &amp;&amp; $GLOBALS[&apos;pagenow&apos;] != &apos;wp-login.php&apos;) {</span><br><span class=\"line\">        // comment out the next two lines to load the local copy of jQuery</span><br><span class=\"line\">        wp_deregister_script(&apos;jquery&apos;);</span><br><span class=\"line\">        wp_register_script(&apos;jquery&apos;, &apos;https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js&apos;, false, &apos;3.2.1&apos;);</span><br><span class=\"line\">        wp_enqueue_script(&apos;jquery&apos;);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\">// end</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-Remove-jQuery-Migrate-script-from-header-New-plugin-will-not-have-incompatibility-issue\"><a href=\"#7-Remove-jQuery-Migrate-script-from-header-New-plugin-will-not-have-incompatibility-issue\" class=\"headerlink\" title=\"7. Remove jQuery-Migrate script from header (New plugin will not have incompatibility issue)\"></a>7. Remove jQuery-Migrate script from header (New plugin will not have incompatibility issue)</h2><figure class=\"highlight plain hljs\"><figcaption><span>Remove migrate script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add_filter( &apos;wp_default_scripts&apos;, &apos;remove_jquery_migrate&apos; );</span><br><span class=\"line\">function remove_jquery_migrate( &amp;$scripts)</span><br><span class=\"line\">  {</span><br><span class=\"line\">  \tif(!is_admin())  {</span><br><span class=\"line\">      $scripts-&gt;remove( &apos;jquery&apos;);</span><br><span class=\"line\">      $scripts-&gt;add( &apos;jquery&apos;, false, array( &apos;jquery-core&apos; ), &apos;1.10.2&apos; );</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-No-self-pings\"><a href=\"#8-No-self-pings\" class=\"headerlink\" title=\"8. No self pings\"></a>8. No self pings</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// No Self Pings</span><br><span class=\"line\">function no_self_ping( &amp;$links ) {</span><br><span class=\"line\">  $home = get_option( &apos;home&apos; );</span><br><span class=\"line\">  foreach ( $links as $l =&gt; $link )</span><br><span class=\"line\">  if ( 0 === strpos( $link, $home ) )</span><br><span class=\"line\">  unset($links[$l]);</span><br><span class=\"line\">}</span><br><span class=\"line\">add_action( &apos;pre_ping&apos;, &apos;no_self_ping&apos; );</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-Add-p-tag-to-lt-more-gt\"><a href=\"#9-Add-p-tag-to-lt-more-gt\" class=\"headerlink\" title=\"9. Add p tag to &lt;!--more--&gt;\"></a>9. Add p tag to <code>&lt;!--more--&gt;</code></h2><figure class=\"highlight plain hljs\"><figcaption><span>tag detection</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function has_more()</span><br><span class=\"line\">{</span><br><span class=\"line\"> global $post;</span><br><span class=\"line\"> if ( empty( $post ) ) return;</span><br><span class=\"line\"></span><br><span class=\"line\">    if ($pos=strpos($post-&gt;post_content, &apos;&lt;!--more--&gt;&apos;)) {</span><br><span class=\"line\">        return true;</span><br><span class=\"line\">    } else {</span><br><span class=\"line\">        return false;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">//add p tag to more tag</span><br><span class=\"line\">function add_p_tag($link){</span><br><span class=\"line\">return &quot;&lt;p&gt;$link&lt;/p&gt;&quot;;</span><br><span class=\"line\">}</span><br><span class=\"line\">add_filter(&apos;the_content_more_link&apos;, &apos;add_p_tag&apos;); </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-Inject-google-ads-after-n-link\"><a href=\"#10-Inject-google-ads-after-n-link\" class=\"headerlink\" title=\"10. Inject google ads after n link\"></a>10. Inject google ads after n link</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function inject_ad_text_after_n_chars($content) {</span><br><span class=\"line\">  // insert after the first &lt;/a&gt; after x characters</span><br><span class=\"line\">  $after_character = 1;</span><br><span class=\"line\">  if (is_single()) {</span><br><span class=\"line\">    $before_content = substr($content, 0,  $after_character);</span><br><span class=\"line\">    $after_content = substr($content, $after_character);</span><br><span class=\"line\">    $after_content = explode(&apos;&lt;/p&gt;&apos;, $after_content);</span><br><span class=\"line\">    $text = &apos;&lt;ins class=&quot;adsbygoogle&quot;</span><br><span class=\"line\">     style=&quot;display:block&quot;</span><br><span class=\"line\">     data-ad-client=&quot;your id&quot;</span><br><span class=\"line\">     data-ad-slot=&quot;your ad slot&quot;</span><br><span class=\"line\">     data-ad-format=&quot;auto&quot;&gt;&lt;/ins&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">(adsbygoogle = window.adsbygoogle || []).push({});</span><br><span class=\"line\">&lt;/script&gt;&lt;/p&gt;&apos;;</span><br><span class=\"line\">    array_splice($after_content, 1, 0, $text);</span><br><span class=\"line\">    $after_content = implode(&apos;&apos;, $after_content);</span><br><span class=\"line\">    return $before_content . $after_content;</span><br><span class=\"line\">  }</span><br><span class=\"line\">  else {</span><br><span class=\"line\">    return $content;</span><br><span class=\"line\">  }</span><br><span class=\"line\">}</span><br><span class=\"line\">add_filter(&apos;the_content&apos;, &apos;inject_ad_text_after_n_chars&apos;, 13);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-Delay-auto-closing-p-tag-to-fix-some-problems\"><a href=\"#11-Delay-auto-closing-p-tag-to-fix-some-problems\" class=\"headerlink\" title=\"11. Delay auto closing p tag to fix some problems.\"></a>11. Delay auto closing p tag to fix some problems.</h2><figure class=\"highlight plain hljs\"><figcaption><span>auto closing p tag to fix some problems.</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">remove_filter( &apos;the_content&apos;, &apos;wpautop&apos; );</span><br><span class=\"line\">add_filter( &apos;the_content&apos;, &apos;wpautop&apos; , 12);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"12-Show-Media-upload-path\"><a href=\"#12-Show-Media-upload-path\" class=\"headerlink\" title=\"12. Show Media upload path\"></a>12. Show Media upload path</h2><figure class=\"highlight plain hljs\"><figcaption><span>Media upload</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if(get_option(&apos;upload_path&apos;)==&apos;wp-content/uploads&apos; || get_option(&apos;upload_path&apos;)==null) {</span><br><span class=\"line\">\tupdate_option(&apos;upload_path&apos;,WP_CONTENT_DIR.&apos;uploads&apos;);</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"13-Image-SEO-with-size-and-height-info\"><a href=\"#13-Image-SEO-with-size-and-height-info\" class=\"headerlink\" title=\"13. Image SEO, with size and height info\"></a>13. Image SEO, with size and height info</h2><figure class=\"highlight plain hljs\"><figcaption><span>get_post_image ($post_id</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// select the post content from the db</span><br><span class=\"line\">$image_id = get_post_thumbnail_id();</span><br><span class=\"line\">$image_url = wp_get_attachment_image_src($image_id,&apos;large&apos;);</span><br><span class=\"line\">$the_image_src = $image_url[0];</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t  // if src found, then create a new img tag</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t  if(strlen($the_image_src)) {</span><br><span class=\"line\">\t\t\t   if(strlen($img_script)) {</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t    // if the src starts with http/https, then strip out server name</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t    if(preg_match(&quot;/^(http(|s):\\/\\/)/&quot;, $the_image_src)) {</span><br><span class=\"line\">\t\t\t\t\t     $the_image_src = preg_replace(&quot;/^(http(|s):\\/\\/)/&quot;, &apos;&apos;, $the_image_src);</span><br><span class=\"line\">\t\t\t\t\t     $frags = split(&quot;\\/&quot;, $the_image_src);</span><br><span class=\"line\">\t\t\t\t\t     array_shift($frags);</span><br><span class=\"line\">\t\t\t\t\t     $the_image_src = &apos;/&apos; . join(&quot;/&quot;, $frags);</span><br><span class=\"line\">\t\t\t\t    }</span><br><span class=\"line\">\t\t\t\t    $the_image = &apos;&lt;img class=&quot;&apos; . $class . &apos;&quot; alt=&quot;&apos; . $alt . &apos;&quot; src=&quot;&apos; . $img_script . $the_image_src . &apos;&quot; width=&quot;&apos; . $width . &apos;&quot; height=&quot;&apos; . $height . &apos;&quot;/&gt;&apos;;</span><br><span class=\"line\">\t\t\t   }</span><br><span class=\"line\">\t\t\t   else {</span><br><span class=\"line\">\t\t\t\t    $the_image = &apos;&lt;img class=&quot;&apos; . $class . &apos;&quot; alt=&quot;&apos; . $alt . &apos;&quot; src=&quot;&apos; . $the_image_src . &apos;&quot; width=&quot;&apos; . $width . &apos;&quot; height=&quot;&apos; . $height . &apos;&quot; width=&quot;&apos; . $width . &apos;&quot; height=&quot;&apos; . $height . &apos;&quot;/&gt;&apos;;</span><br><span class=\"line\">\t\t\t   }</span><br><span class=\"line\">\t\t  }</span><br><span class=\"line\">       </span><br><span class=\"line\">       // if there&apos;s no image</span><br><span class=\"line\">       else</span><br><span class=\"line\">         return false;</span><br><span class=\"line\">         </span><br><span class=\"line\">\t\t  return $the_image;</span><br><span class=\"line\">\t }</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"14-Add-Nofollow-to-comments-link\"><a href=\"#14-Add-Nofollow-to-comments-link\" class=\"headerlink\" title=\"14. Add Nofollow to comments link\"></a>14. Add Nofollow to comments link</h2><figure class=\"highlight plain hljs\"><figcaption><span>Nofollow comments line</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#function add_nofollow_to_comments_popup_link(){</span><br><span class=\"line\">#    return &apos; rel=&quot;nofollow&quot; &apos;;}</span><br><span class=\"line\">#add_filter( &apos;comments_popup_link_attributes&apos;, &apos;add_nofollow_to_comments_popup_link&apos; );</span><br><span class=\"line\"></span><br><span class=\"line\">add_filter( &apos;get_comment_author_link&apos;, &apos;rv_remove_comment_author_link&apos;, 10, 3 );</span><br><span class=\"line\">function rv_remove_comment_author_link( $return, $author, $comment_ID ) {</span><br><span class=\"line\">\treturn $author;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"15-Remove-junk-header\"><a href=\"#15-Remove-junk-header\" class=\"headerlink\" title=\"15. Remove junk header\"></a>15. Remove junk header</h2><figure class=\"highlight plain hljs\"><figcaption><span>Remove junk</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#remove_action(&apos;wp_head&apos;, &apos;wp_enqueue_scripts&apos;, 1);</span><br><span class=\"line\">#add_action(&apos;wp_footer&apos;, &apos;wp_enqueue_scripts&apos;, 5);</span><br><span class=\"line\">function ft_rtt_remove_title_attribute( $output ){</span><br><span class=\"line\">  $output = preg_replace(&apos;/title=\\&quot;(.*?)\\&quot;/&apos;,&apos;&apos;,$output);</span><br><span class=\"line\">  return $output;</span><br><span class=\"line\"> }</span><br><span class=\"line\">add_filter(&apos;wp_list_categories&apos;,&apos;ft_rtt_remove_title_attribute&apos;);</span><br><span class=\"line\">add_filter(&apos;wp_list_pages&apos;,&apos;ft_rtt_remove_title_attribute&apos;);</span><br><span class=\"line\">add_filter(&apos;the_category&apos;, &apos;ft_rtt_remove_title_attribute&apos; );</span><br><span class=\"line\">add_filter(&apos;comment_ID&apos;, &apos;ft_rtt_remove_title_attribute&apos; );</span><br><span class=\"line\"></span><br><span class=\"line\">function wpbeginner_remove_version() {</span><br><span class=\"line\">\treturn &apos;&apos;;</span><br><span class=\"line\">}</span><br><span class=\"line\">add_filter(&apos;the_generator&apos;, &apos;wpbeginner_remove_version&apos;);</span><br><span class=\"line\">add_filter(&apos;show_admin_bar&apos;, &apos;__return_false&apos;);</span><br><span class=\"line\">remove_action(&apos;wp_head&apos;,&apos;rsd_link&apos;);</span><br><span class=\"line\">remove_action(&apos;wp_head&apos;,&apos;wlwmanifest_link&apos;);</span><br><span class=\"line\">remove_action( &apos;wp_head&apos;, &apos;index_rel_link&apos; );</span><br><span class=\"line\">remove_action( &apos;wp_head&apos;, &apos;parent_post_rel_link&apos;, 10, 0 );</span><br><span class=\"line\">remove_action( &apos;wp_head&apos;, &apos;start_post_rel_link&apos;, 10, 0 );</span><br><span class=\"line\">remove_action( &apos;wp_head&apos;, &apos;adjacent_posts_rel_link_wp_head&apos;, 10, 0 );</span><br><span class=\"line\">remove_action( &apos;wp_head&apos;, &apos;rel_canonical&apos; );</span><br><span class=\"line\">remove_action( &apos;wp_head&apos;, &apos;wp_shortlink_wp_head&apos;, 10, 0 );</span><br><span class=\"line\">remove_action( &apos;wp_head&apos;, &apos;noindex&apos;, 1 );</span><br><span class=\"line\">remove_filter(&apos;comment_text&apos;, &apos;make_clickable&apos;, 9);</span><br><span class=\"line\">#Remove Wordpress Comment Feed Link from header</span><br><span class=\"line\">#Display the links to the extra feeds such as category feeds</span><br><span class=\"line\">remove_action(&apos;wp_head&apos;, &apos;feed_links_extra&apos;, 3);</span><br><span class=\"line\">#Display the links to the general feeds: Post and Comment Feed</span><br><span class=\"line\">remove_action(&apos;wp_head&apos;, &apos;feed_links&apos;, 2);</span><br><span class=\"line\"></span><br><span class=\"line\">$qmr_work_tags = array(</span><br><span class=\"line\">  &apos;the_title&apos;,</span><br><span class=\"line\">  &apos;the_content&apos;,</span><br><span class=\"line\">  &apos;the_excerpt&apos;,</span><br><span class=\"line\">  &apos;comment_text&apos;,</span><br><span class=\"line\">  &apos;list_cats&apos;,</span><br><span class=\"line\">  &apos;single_post_title&apos;,</span><br><span class=\"line\">  &apos;comment_author&apos;,</span><br><span class=\"line\">  &apos;term_name&apos;,</span><br><span class=\"line\">  &apos;link_name&apos;,</span><br><span class=\"line\">  &apos;link_description&apos;,</span><br><span class=\"line\">  &apos;link_notes&apos;,</span><br><span class=\"line\">  &apos;bloginfo&apos;,</span><br><span class=\"line\">  &apos;wp_title&apos;,</span><br><span class=\"line\">  &apos;widget_title&apos;,</span><br><span class=\"line\">  &apos;term_description&apos;,</span><br><span class=\"line\">  &apos;category_description&apos;,</span><br><span class=\"line\">  &apos;widget_text&apos;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">foreach ( $qmr_work_tags as $qmr_work_tag ) {</span><br><span class=\"line\">remove_filter ($qmr_work_tag, &apos;wptexturize&apos;);</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"16-Remove-category-in-url\"><a href=\"#16-Remove-category-in-url\" class=\"headerlink\" title=\"16. Remove category in url\"></a>16. Remove category in url</h2><figure class=\"highlight plain hljs\"><figcaption><span>Remove category, together with plugin</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function fix_slash( $string, $type )</span><br><span class=\"line\">{</span><br><span class=\"line\">    global $wp_rewrite;</span><br><span class=\"line\">    if ( $wp_rewrite-&gt;use_trailing_slashes == false )</span><br><span class=\"line\">    {</span><br><span class=\"line\">        if ( $type != &apos;single&apos; &amp;&amp; $type != &apos;category&apos; )</span><br><span class=\"line\">            return trailingslashit( $string );</span><br><span class=\"line\"> </span><br><span class=\"line\">        if ( $type == &apos;single&apos; &amp;&amp; ( strpos( $string, &apos;.html/&apos; ) !== false ) )</span><br><span class=\"line\">            return trailingslashit( $string );</span><br><span class=\"line\"> </span><br><span class=\"line\">        if ( $type == &apos;category&apos; &amp;&amp; ( strpos( $string, &apos;category&apos; ) !== false ) )</span><br><span class=\"line\">        {</span><br><span class=\"line\">            $aa_g = str_replace( &quot;/category/&quot;, &quot;/&quot;, $string );</span><br><span class=\"line\">            return trailingslashit( $aa_g );</span><br><span class=\"line\">        }</span><br><span class=\"line\">        if ( $type == &apos;category&apos; )</span><br><span class=\"line\">            return trailingslashit( $string );</span><br><span class=\"line\">    }</span><br><span class=\"line\">    return $string;</span><br><span class=\"line\">}</span><br><span class=\"line\"> </span><br><span class=\"line\">add_filter( &apos;user_trailingslashit&apos;, &apos;fix_slash&apos;, 55, 2 );</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"17-Add-SEO-title-attributes-next-post-link-previous-post-link\"><a href=\"#17-Add-SEO-title-attributes-next-post-link-previous-post-link\" class=\"headerlink\" title=\"17. Add SEO title attributes next post link, previous post link\"></a>17. Add SEO title attributes next post link, previous post link</h2><figure class=\"highlight plain hljs\"><figcaption><span>Title attributes to next and previous post link functions</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add_filter(&apos;next_post_link&apos;,&apos;add_title_to_next_post_link&apos;);</span><br><span class=\"line\">function add_title_to_next_post_link($link) {</span><br><span class=\"line\">  global $post;</span><br><span class=\"line\">  $post = get_post($post_id);</span><br><span class=\"line\">  $next_post = get_next_post();</span><br><span class=\"line\">  $title = $next_post-&gt;post_title;</span><br><span class=\"line\">  $link = str_replace(&quot;rel=&quot;, &quot; title=&apos;&quot;.$title.&quot;&apos; rel=&quot;, $link);</span><br><span class=\"line\">  return $link;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">add_filter(&apos;previous_post_link&apos;,&apos;add_title_to_previous_post_link&apos;);</span><br><span class=\"line\">function add_title_to_previous_post_link($link) {</span><br><span class=\"line\">  global $post;</span><br><span class=\"line\">  $post = get_post($post_id);</span><br><span class=\"line\">  $previous_post = get_previous_post();</span><br><span class=\"line\">  $title = $previous_post-&gt;post_title;</span><br><span class=\"line\">  $link = str_replace(&quot;rel=&quot;, &quot; title=&apos;&quot;.$title.&quot;&apos; rel=&quot;, $link);</span><br><span class=\"line\">  return $link;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"18-Remove-rel-from-category-tag\"><a href=\"#18-Remove-rel-from-category-tag\" class=\"headerlink\" title=\"18. Remove rel from category tag\"></a>18. Remove rel from category tag</h2><figure class=\"highlight plain hljs\"><figcaption><span>Remove rel</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function remove_rel($result) {</span><br><span class=\"line\">  $result = str_replace(&apos; rel=&quot;category tag&quot;&apos;, &apos;rel=&quot;tag&quot;&apos;, $result);</span><br><span class=\"line\">  return $result;</span><br><span class=\"line\">}</span><br><span class=\"line\">add_filter(&apos;wp_list_categories&apos;, &apos;remove_rel&apos;);</span><br><span class=\"line\">add_filter(&apos;the_category&apos;, &apos;remove_rel&apos;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"19-Remove-query-strings-from-static-resources\"><a href=\"#19-Remove-query-strings-from-static-resources\" class=\"headerlink\" title=\"19. Remove query strings from static resources\"></a>19. Remove query strings from static resources</h2><figure class=\"highlight plain hljs\"><figcaption><span>query strings from static resources</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function ewp_remove_script_version( $src ){</span><br><span class=\"line\">  return remove_query_arg( &apos;ver&apos;, $src );</span><br><span class=\"line\">}</span><br><span class=\"line\">add_filter( &apos;script_loader_src&apos;, &apos;ewp_remove_script_version&apos;, 15, 1 );</span><br><span class=\"line\">add_filter( &apos;style_loader_src&apos;, &apos;ewp_remove_script_version&apos;, 15, 1 );</span><br><span class=\"line\"></span><br><span class=\"line\">#remove header recent comment style</span><br><span class=\"line\">add_action(&apos;widgets_init&apos;, &apos;my_remove_recent_comments_style&apos;);</span><br><span class=\"line\">function my_remove_recent_comments_style() {</span><br><span class=\"line\">\tglobal $wp_widget_factory;</span><br><span class=\"line\">\tremove_action(&apos;wp_head&apos;, array($wp_widget_factory-&gt;widgets[&apos;WP_Widget_Recent_Comments&apos;], &apos;recent_comments_style&apos;));</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"20-Add-alt-tags-to-thumbnail\"><a href=\"#20-Add-alt-tags-to-thumbnail\" class=\"headerlink\" title=\"20. Add alt tags to thumbnail\"></a>20. Add alt tags to thumbnail</h2><figure class=\"highlight plain hljs\"><figcaption><span>&apos;add_attachment&apos;, &apos;my_set_image_meta_upon_image_upload&apos; );</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function my_set_image_meta_upon_image_upload( $post_ID ) {</span><br><span class=\"line\"></span><br><span class=\"line\">\t// Check if uploaded file is an image, else do nothing</span><br><span class=\"line\"></span><br><span class=\"line\">\tif ( wp_attachment_is_image( $post_ID ) ) {</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t$my_image_title = get_post( $post_ID )-&gt;post_title;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t// Sanitize the title:  remove hyphens, underscores &amp; extra spaces:</span><br><span class=\"line\">\t\t$my_image_title = preg_replace( &apos;%\\s*[-_\\s]+\\s*%&apos;, &apos; &apos;,  $my_image_title );</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t// Sanitize the title:  capitalize first letter of every word (other letters lower case):</span><br><span class=\"line\">\t\t$my_image_title = ucwords( strtolower( $my_image_title ) );</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t// Create an array with the image meta (Title, Caption, Description) to be updated</span><br><span class=\"line\">\t\t// Note:  comment out the Excerpt/Caption or Content/Description lines if not needed</span><br><span class=\"line\">\t\t$my_image_meta = array(</span><br><span class=\"line\">\t\t\t&apos;ID&apos;\t\t=&gt; $post_ID,\t\t\t// Specify the image (ID) to be updated</span><br><span class=\"line\">\t\t\t&apos;post_title&apos;\t=&gt; $my_image_title,\t\t// Set image Title to sanitized title</span><br><span class=\"line\">\t\t\t//&apos;post_excerpt&apos;\t=&gt; $my_image_title,\t\t// Set image Caption (Excerpt) to sanitized title</span><br><span class=\"line\">\t\t\t&apos;post_content&apos;\t=&gt; $my_image_title,\t\t// Set image Description (Content) to sanitized title</span><br><span class=\"line\">\t\t);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t// Set the image Alt-Text</span><br><span class=\"line\">\t\tupdate_post_meta( $post_ID, &apos;_wp_attachment_image_alt&apos;, $my_image_title );</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t// Set the image meta (e.g. Title, Excerpt, Content)</span><br><span class=\"line\">\t\twp_update_post( $my_image_meta );</span><br><span class=\"line\"></span><br><span class=\"line\">\t} </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"21-Add-pre-tag-wrapper-to-code-tag-and-editor-button\"><a href=\"#21-Add-pre-tag-wrapper-to-code-tag-and-editor-button\" class=\"headerlink\" title=\"21. Add pre tag wrapper to code tag, and editor button\"></a>21. Add pre tag wrapper to code tag, and editor button</h2><figure class=\"highlight plain hljs\"><figcaption><span>pre tag</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add_action(&apos;admin_print_footer_scripts&apos;,&apos;eg_quicktags&apos;);</span><br><span class=\"line\">function eg_quicktags() {</span><br><span class=\"line\">?&gt;</span><br><span class=\"line\">&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class=\"line\">\tQTags.addButton( &apos;eg_pre&apos;, &apos;Code with Pre&apos;,&apos;&lt;pre&gt;&lt;code&gt;&apos;, &apos;&lt;/code&gt;&lt;/pre&gt;&apos;, &apos;q&apos; );</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;?php</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"22-Login-page-tweak\"><a href=\"#22-Login-page-tweak\" class=\"headerlink\" title=\"22. Login page tweak\"></a>22. Login page tweak</h2><figure class=\"highlight plain hljs\"><figcaption><span>no_wordpress_errors(){</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add_filter( &apos;login_errors&apos;, &apos;no_wordpress_errors&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">function my_login_logo_one() { </span><br><span class=\"line\">?&gt;</span><br><span class=\"line\">&lt;style type=&quot;text/css&quot;&gt; </span><br><span class=\"line\">\tbody.login div#login h1 a {display: none; !important;} </span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;?php </span><br><span class=\"line\">}</span><br><span class=\"line\">add_action( &apos;login_enqueue_scripts&apos;, &apos;my_login_logo_one&apos; );</span><br><span class=\"line\">\t\t\t\t\t  </span><br><span class=\"line\">// changing the logo link from wordpress.org to your site</span><br><span class=\"line\">function mb_login_url() {  return home_url(); }</span><br><span class=\"line\">add_filter( &apos;login_headerurl&apos;, &apos;mb_login_url&apos; );</span><br><span class=\"line\"></span><br><span class=\"line\">// changing the alt text on the logo to show your site name</span><br><span class=\"line\">function mb_login_title() { return get_option( &apos;blogname&apos; ); }</span><br><span class=\"line\">add_filter( &apos;login_headertitle&apos;, &apos;mb_login_title&apos; );</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"23-Remove-wp-version-param-from-any-enqueued-scripts\"><a href=\"#23-Remove-wp-version-param-from-any-enqueued-scripts\" class=\"headerlink\" title=\"23. Remove wp version param from any enqueued scripts\"></a>23. Remove wp version param from any enqueued scripts</h2><figure class=\"highlight plain hljs\"><figcaption><span>remove wp version param from any enqueued scripts</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function remove_wp_ver_css_js( $src ) {</span><br><span class=\"line\">  if ( strpos( $src, &apos;ver=&apos; . get_bloginfo( &apos;version&apos; ) ) )</span><br><span class=\"line\">  $src = remove_query_arg( &apos;ver&apos;, $src );</span><br><span class=\"line\">  return $src;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"24-Add-X-UA-Compatible-header\"><a href=\"#24-Add-X-UA-Compatible-header\" class=\"headerlink\" title=\"24. Add X-UA-Compatible header\"></a>24. Add X-UA-Compatible header</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function add_http_header($headers) {</span><br><span class=\"line\">$headers[&apos;X-UA-Compatible&apos;] = &apos;IE=edge,chrome=1&apos;;</span><br><span class=\"line\">return $headers;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">add_filter(&apos;wp_headers&apos;, &apos;add_http_header&apos;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"25-Prevent-WordPress-from-participating-in-Pingback-Denial-of-Service-Attacks\"><a href=\"#25-Prevent-WordPress-from-participating-in-Pingback-Denial-of-Service-Attacks\" class=\"headerlink\" title=\"25. Prevent WordPress from participating in Pingback Denial of Service Attacks\"></a>25. Prevent WordPress from participating in Pingback Denial of Service Attacks</h2><figure class=\"highlight plain hljs\"><figcaption><span>Disable xmlrcp/pingback</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add_filter( &apos;xmlrpc_enabled&apos;, &apos;__return_false&apos; );</span><br><span class=\"line\">add_filter( &apos;pre_update_option_enable_xmlrpc&apos;, &apos;__return_false&apos; );</span><br><span class=\"line\">add_filter( &apos;pre_option_enable_xmlrpc&apos;, &apos;__return_zero&apos; );</span><br><span class=\"line\"></span><br><span class=\"line\">// Disable trackbacks</span><br><span class=\"line\">add_filter( &apos;rewrite_rules_array&apos;, function( $rules ) {</span><br><span class=\"line\">    foreach( $rules as $rule =&gt; $rewrite ) {</span><br><span class=\"line\">        if( preg_match( &apos;/trackback\\/\\?\\$$/i&apos;, $rule ) ) {</span><br><span class=\"line\">            unset( $rules[$rule] );</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    return $rules;</span><br><span class=\"line\">});</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">// Disable X-Pingback HTTP Header.</span><br><span class=\"line\">add_filter(&apos;wp_headers&apos;, function($headers, $wp_query){</span><br><span class=\"line\">    if(isset($headers[&apos;X-Pingback&apos;])){</span><br><span class=\"line\">        unset($headers[&apos;X-Pingback&apos;]);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    return $headers;</span><br><span class=\"line\">}, 11, 2);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">add_filter( &apos;xmlrpc_methods&apos;, function($methods){</span><br><span class=\"line\">    unset( $methods[&apos;pingback.ping&apos;] );</span><br><span class=\"line\">    unset( $methods[&apos;pingback.extensions.getPingbacks&apos;] );</span><br><span class=\"line\">    unset( $methods[&apos;wp.getUsersBlogs&apos;] ); // Block brute force discovery of existing users</span><br><span class=\"line\">    unset( $methods[&apos;system.multicall&apos;] );</span><br><span class=\"line\">    unset( $methods[&apos;system.listMethods&apos;] );</span><br><span class=\"line\">    unset( $methods[&apos;system.getCapabilities&apos;] );</span><br><span class=\"line\">    return $methods;</span><br><span class=\"line\">});</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"26-Include-thumbnail-post-thumb-in-RSS-feed\"><a href=\"#26-Include-thumbnail-post-thumb-in-RSS-feed\" class=\"headerlink\" title=\"26. Include thumbnail (post-thumb) in RSS feed\"></a>26. Include thumbnail (post-thumb) in RSS feed</h2><figure class=\"highlight plain hljs\"><figcaption><span>INCLUDES THE THUMBNAIL IN OUR RSS FEED</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function insertThumbnailRSS($content) {</span><br><span class=\"line\">global $post;</span><br><span class=\"line\">if ( has_post_thumbnail( $post-&gt;ID ) ){</span><br><span class=\"line\">$content = &apos;&lt;p&gt;&apos; . get_the_post_thumbnail( $post-&gt;ID, &apos;post-thumb&apos;, array( &apos;alt&apos; =&gt; get_the_title(), &apos;title&apos; =&gt; get_the_title()) ) . &apos;&lt;/p&gt;&apos; . $content;</span><br><span class=\"line\">}</span><br><span class=\"line\">return $content;</span><br><span class=\"line\">}</span><br><span class=\"line\">add_filter(&apos;the_excerpt_rss&apos;, &apos;insertThumbnailRSS&apos;);</span><br><span class=\"line\">add_filter(&apos;the_content_feed&apos;, &apos;insertThumbnailRSS&apos;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"27-Prevent-Page-Scroll-When-Clicking-the-More-Link\"><a href=\"#27-Prevent-Page-Scroll-When-Clicking-the-More-Link\" class=\"headerlink\" title=\"27. Prevent Page Scroll When Clicking the More Link\"></a>27. Prevent Page Scroll When Clicking the More Link</h2><figure class=\"highlight plain hljs\"><figcaption><span>Page Scroll When Clicking the More Link</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function remove_more_link_scroll( $link ) {</span><br><span class=\"line\">\t$link = preg_replace( &apos;|#more-[0-9]+|&apos;, &apos;&apos;, $link );</span><br><span class=\"line\">\treturn $link;</span><br><span class=\"line\">}</span><br><span class=\"line\">add_filter( &apos;the_content_more_link&apos;, &apos;remove_more_link_scroll&apos; );</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"28-Convert-links-and-images-to-being-site-root-relative\"><a href=\"#28-Convert-links-and-images-to-being-site-root-relative\" class=\"headerlink\" title=\"28.  Convert links and images to being site root relative\"></a>28.  Convert links and images to being site root relative</h2><figure class=\"highlight plain hljs\"><figcaption><span>Image URLs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add_filter(&apos;image_send_to_editor&apos;,&apos;image_to_relative&apos;,5,8);</span><br><span class=\"line\"></span><br><span class=\"line\">function image_to_relative($html, $id, $caption, $title, $align, $url, $size, $alt)</span><br><span class=\"line\">{</span><br><span class=\"line\">\t$sp = strpos($html,&quot;src=&quot;) + 5;</span><br><span class=\"line\">\t$ep = strpos($html,&quot;\\&quot;&quot;,$sp);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t$imageurl = substr($html,$sp,$ep-$sp);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t$relativeurl = str_replace([&quot;http://&quot;, &quot;https://&quot;],&quot;&quot;,$imageurl);</span><br><span class=\"line\">\t$sp = strpos($relativeurl,&quot;/&quot;);</span><br><span class=\"line\">\t$relativeurl = substr($relativeurl,$sp);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t$html = str_replace($imageurl,$relativeurl,$html);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\treturn $html;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"29-Set-custom-cookie\"><a href=\"#29-Set-custom-cookie\" class=\"headerlink\" title=\"29. Set custom cookie\"></a>29. Set custom cookie</h2><p>If you have server control, you can use this to stop spam.<br><a href=\"https://www.qualityology.com/tech/stop-automated-comment-spam-brute-force-login-attack/\">Stop Automated Comment Spam with Nginx</a></p>\n<figure class=\"highlight plain hljs\"><figcaption><span>Automated Comment Spam with Nginx</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function set_post_cookie() {</span><br><span class=\"line\">    echo &apos;&lt;script&gt;document.cookie = &quot;_pass=1; max-age=1800; path=/; secure&quot;;&lt;/script&gt;&apos; . &quot;&quot;; </span><br><span class=\"line\">}</span><br><span class=\"line\">add_action( &apos;comment_form&apos;, &apos;set_post_cookie&apos;, 100 );</span><br></pre></td></tr></table></figure>",
            "tags": [
                "WordPress"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/easy-dual-wan-load-balancing-with-mikrotik-routeros-pcc/",
            "url": "https://www.qualityology.com/tech/easy-dual-wan-load-balancing-with-mikrotik-routeros-pcc/",
            "title": "Easy Dual WAN Load Balancing with MikroTik RouterOS PCC",
            "date_published": "2019-02-14T22:39:03.000Z",
            "content_html": "<p>RouterOS&#x2019;s load balancing is simple but tricky. Even Mikrotik shows an example of how to configure PCC for load balancing. It does not say how to implement it with dynamic IP. The method introduced here is simple. We will add lease scripts to WAN1 and WAN2. RouterOS will run the script to add the correct gateway IP and firewall rules to make the load balancing work.</p>\n<p><strong>Requirements:</strong></p>\n<p>1. Name your WAN ports as WAN1 and WAN2. Your bridge as bridge.<br>2. Basic knowledge of RouterOS<br>3. Turn off fasttrack. Yes. It must be off. Otherwise, router can&#x2019;t mark traffic and distribute to both WANs. Disable the firewall filter with action &#x201C;fasttrack-connection&#x201D; and that is it.</p>\n<p>Add below scripts to&#xA0;IP/DHCP Client/WAN1 and&#xA0;IP/DHCP Client/WAN2. You can do that via web config.</p>\n<p><strong>For WAN1:</strong></p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">{</span><br><span class=\"line\">    :local count [/ip route print count-only where comment=WAN1]</span><br><span class=\"line\">    :if ($bound=1) do={</span><br><span class=\"line\">        :if ($count = 0) do={</span><br><span class=\"line\">            /ip route add gateway=$&quot;gateway-address&quot; routing-mark=WAN1 comment=WAN1</span><br><span class=\"line\">            /ip firewall nat add chain=srcnat out-interface=WAN1 action=masquerade comment=WAN1</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting dst-address=$&quot;gateway-address&quot; action=accept in-interface=bridge comment=WAN1</span><br><span class=\"line\">            /ip route add gateway=$&quot;gateway-address&quot; routing-mark=WAN1_out check-gateway=ping comment=WAN1</span><br><span class=\"line\">            /ip route add gateway=$&quot;gateway-address&quot; distance=1 check-gateway=ping comment=WAN1</span><br><span class=\"line\">        } else={</span><br><span class=\"line\">            :if ($count &gt; 1) do={</span><br><span class=\"line\">                :local test [/ip route find where comment=WAN1]</span><br><span class=\"line\">                :if ([/ip route get $test gateway] != $&quot;gateway-address&quot;) do={</span><br><span class=\"line\">                    /ip route set $test gateway=$&quot;gateway-address&quot;</span><br><span class=\"line\">                }</span><br><span class=\"line\">               :local test2 [/ip firewall mangle find where comment=WAN1]</span><br><span class=\"line\">                :if ([/ip firewall mangle get $test2 gateway] != $&quot;gateway-address&quot;) do={</span><br><span class=\"line\">                    /ip route set $test2 gateway=$&quot;gateway-address&quot;</span><br><span class=\"line\">                }</span><br><span class=\"line\">            } else={</span><br><span class=\"line\">                :error &quot;Multiple routes found&quot;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    } else={</span><br><span class=\"line\">        /ip route remove [find comment=WAN1]</span><br><span class=\"line\">        /ip firewall mangle remove [find comment=WAN1]</span><br><span class=\"line\">        /ip firewall nat remove [find comment=WAN1]</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<p><strong>For WAN2:</strong></p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">{</span><br><span class=\"line\">    :local count [/ip route print count-only where comment=WAN2]</span><br><span class=\"line\">    :if ($bound=1) do={</span><br><span class=\"line\">        :if ($count = 0) do={</span><br><span class=\"line\">            /ip route add gateway=$&quot;gateway-address&quot; routing-mark=WAN2 comment=WAN2</span><br><span class=\"line\">            /ip firewall nat add chain=srcnat out-interface=WAN2 action=masquerade comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting dst-address=$&quot;gateway-address&quot; action=accept in-interface=bridge comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting in-interface=WAN1 connection-mark=no-mark action=mark-connection new-connection-mark=WAN1_conn comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting in-interface=WAN2 connection-mark=no-mark action=mark-connection new-connection-mark=WAN2_conn comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting in-interface=bridge connection-mark=no-mark dst-address-type=!local protocol=tcp dst-port=22,80,443  per-connection-classifier=both-addresses:2/0 action=mark-connection new-connection-mark=WAN1_conn comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting in-interface=bridge connection-mark=no-mark dst-address-type=!local protocol=tcp dst-port=22,80,443  per-connection-classifier=both-addresses:2/1 action=mark-connection new-connection-mark=WAN2_conn comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting in-interface=bridge connection-mark=no-mark dst-address-type=!local per-connection-classifier=both-addresses-and-ports:2/0 action=mark-connection new-connection-mark=WAN1_conn comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting in-interface=bridge connection-mark=no-mark dst-address-type=!local per-connection-classifier=both-addresses-and-ports:2/1 action=mark-connection new-connection-mark=WAN2_conn comment=WAN2            </span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting connection-mark=WAN1_conn in-interface=bridge action=mark-routing new-routing-mark=WAN1_out comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=prerouting connection-mark=WAN2_conn in-interface=bridge action=mark-routing new-routing-mark=WAN2_out comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=output connection-mark=WAN1_conn action=mark-routing new-routing-mark=WAN1_out comment=WAN2</span><br><span class=\"line\">            /ip firewall mangle add chain=output connection-mark=WAN2_conn action=mark-routing new-routing-mark=WAN2_out comment=WAN2</span><br><span class=\"line\">            /ip route add gateway=$&quot;gateway-address&quot; routing-mark=WAN2_out check-gateway=ping comment=WAN2</span><br><span class=\"line\">            /ip route add gateway=$&quot;gateway-address&quot; distance=2 check-gateway=ping comment=WAN2</span><br><span class=\"line\">        } else={</span><br><span class=\"line\">            :if ($count &gt; 1) do={</span><br><span class=\"line\">                :local test [/ip route find where comment=WAN2]</span><br><span class=\"line\">                :if ([/ip route get $test gateway] != $&quot;gateway-address&quot;) do={</span><br><span class=\"line\">                    /ip route set $test gateway=$&quot;gateway-address&quot;</span><br><span class=\"line\">                }</span><br><span class=\"line\">               :local test2 [/ip firewall mangle find where comment=WAN2]</span><br><span class=\"line\">                :if ([/ip firewall mangle get $test2 gateway] != $&quot;gateway-address&quot;) do={</span><br><span class=\"line\">                    /ip route set $test2 gateway=$&quot;gateway-address&quot;</span><br><span class=\"line\">                }</span><br><span class=\"line\">            } else={</span><br><span class=\"line\">                :error &quot;Multiple routes found&quot;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    } else={</span><br><span class=\"line\">        /ip route remove [find comment=WAN2]</span><br><span class=\"line\">        /ip firewall mangle remove [find comment=WAN2]</span><br><span class=\"line\">        /ip firewall nat remove [find comment=WAN2]</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n\n<p>For port 22,80,443 we use &#x201C;both-addresses&#x201D; as connection classifier to avoid HTTPS error or other authentication issues. Other ports we use both-addresses-and-ports so we can get maximum speed from both WANs.</p>\n<p>If you want to see the official doc of how to configure PCC in RouterOS. Here is the link: <a href=\"https://wiki.mikrotik.com/wiki/Manual:PCC\">https://wiki.mikrotik.com/wiki/Manual:PCC</a></p>\n",
            "tags": [
                "Mikrotik",
                "PCC"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/set-custom-dns-server-on-linux-resolv-conf/",
            "url": "https://www.qualityology.com/tech/set-custom-dns-server-on-linux-resolv-conf/",
            "title": "Set custom DNS servers on Linux with resolv.conf",
            "date_published": "2018-04-25T17:11:50.000Z",
            "content_html": "<p>resolv.conf is the configuration file for DNS resolvers for all Linux distributions, including Debian, Mint, Ubuntu, RedHat, CentOS, etc. Usually we change the DNS resolvers list by editing resolv.conf. However, depends on your dhcp client configuration, resolv.conf may be rewrite after reboot. Without deep Linux experience, setting customs DNS servers on Linux maybe time consuming. But one thing we can do is make /etc/resolv.conf immutable to other program after you changed it. This will be the easier setup with no side effects on system.</p>\n<h2 id=\"Change-the-DNS-server\"><a href=\"#Change-the-DNS-server\" class=\"headerlink\" title=\"Change the DNS server\"></a>Change the DNS server</h2><p>Below example we will set DNS resolver to 1.1.1.1. (1.1.1.1 is a privacy-first consumer DNS service provided by Cloudflare.)</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo echo &apos;nameserver 1.1.1.1&apos; &gt; /etc/resolv.conf</span><br></pre></td></tr></table></figure>\n\n<p>Run the chattr +i command to sets the immutable filesystem attribute on resolv.conf, so it can&#x2019;t be modified any anyone else.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chattr +i /etc/resolv.conf</span><br></pre></td></tr></table></figure>\n\n<p>Reboot your system and test if your change to DNS server succeed. You can test it via <a href=\"https://www.dnsleaktest.com/\">DNS leak test.</a> If you want to make change to resolv.conf again, you need to remove the attribute.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chattr -i /etc/resolv.conf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Some-free-public-DNS-server-list\"><a href=\"#Some-free-public-DNS-server-list\" class=\"headerlink\" title=\"Some free public DNS server list:\"></a>Some free public DNS server list:</h2><p>Google Public DNS 8.8.8.8 / 2001:4860:4860::8888 8.8.4.4 / 2001:4860:4860::8844 </p>\n<p>OpenDNS 208.67.222.222 / 2620:0:ccc::2 208.67.220.220 / 2620:0:ccd::2</p>\n<p>Comodo Secure DNS 8.26.56.26 8.20.247.20 </p>\n<p>Norton ConnectSafe 199.85.126.10 199.85.127.10 </p>\n<p>Level 3: 209.244.0.3 209.244.0.4 </p>\n<p>Verisign Public DNS 64.6.64.6 64.6.65.6 </p>\n<p>DNS.WATCH 84.200.69.80 84.200.70.40 2001:1608:10:25::1c04:b12f 2001:1608:10:25::9249:d69b </p>\n<p>AdGuard Default 176.103.130.130 176.103.130.131 2a00:5a60::ad1:0ff 2a00:5a60::ad2:0ff </p>\n<p>Family protection 176.103.130.132 176.103.130.134 2a00:5a60::bad1:0ff 2a00:5a60::bad2:0ff </p>\n<p>Quad9 9.9.9.9 9.9.9.10 2620:fe::fe 2620:fe::10 </p>\n<p>Cloudflare DNS Resolver 1.1.1.1 1.0.0.1 2606:4700:4700::1111 2606:4700:4700::1001 </p>\n<p>CleanBrowsing Family Filter 185.228.168.168 185.228.168.169 2a0d:2a00:1:: 2a0d:2a00:2::</p>\n",
            "tags": [
                "DNS"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/stop-automated-comment-spam-brute-force-login-attack/",
            "url": "https://www.qualityology.com/tech/stop-automated-comment-spam-brute-force-login-attack/",
            "title": "Protect your WordPress from Automated Comment Spam and Brute Force Login Attack",
            "date_published": "2018-04-12T23:57:49.000Z",
            "content_html": "<p>Is your WordPress flooded with spam comment or being attacked by brute force login attempt? Thinking about spam blocking plugin? There are a lot of plug in can help you stop spam comment. You will notice it put thousands spam comments into spam folder after a while. Those Anti-Spam did a great job stopping spam comment show up in our post. There is some drawbacks for that kind of plugin. First,spam comments will be processed and store in your database before it gets deleted manually or automatically. Second, plugin like Akismet Anti-Spam will add a java-script to your site. If your site has limited resources, these kind of activities will drag down your site&#x2019;s performance. If you use captcha plugin, you will also interrupt user&#x2019;s experience.</p>\n<p>If you are looking for a light way to block the spam bot before the comment get posted. Yes, we have one. We can block the spam bot and also protect your login page at the same time, Spam bots&#x2019; comments will not even reach the server. Unless you got hit with spam from real human. This method is almost perfect and very light to your server. It has no captcha, no moderation queues, no complicate settings page, and 99.99% filter rate. This idea is inspired by this <a href=\"https://www.rtcx.net/stop-automated-comment-spam-wordpress\">Stop Automated Comment Spam on WordPress with Nginx.</a> <strong>How this work?</strong> Most spam bot will not process contents from server, including js and cookies. Their job is to get the comment form and post. So we can use java-script and cookies to block spam bot when they try to post any word.</p>\n<ul>\n<li>  When post is viewed, browser will set a small cookie named _pass into viewer&#x2019;s system.</li>\n<li>  If viewer attempted to post a comment, Nginx or Apache will check if they have that cookie in their system. Comment will go through if cookie found. Otherwise, it will shows 403 to block the access.</li>\n<li>  Since the cookie is set no matter viewer is attempt to leave comment or not, we can use the same cookie to prevent brute force login attack. Most spam bot and attack tools are not able to store cookie so the same theory work for both.</li>\n</ul>\n<p><strong>What you need?</strong></p>\n<ul>\n<li>  Access to server&#x2019;s configuration file.&#xA0;(Nginx or Apache&#x2019;s config file)</li>\n<li>  Ability to change something.</li>\n</ul>\n<h2 id=\"Step-one-add-code-to-set-cookie\"><a href=\"#Step-one-add-code-to-set-cookie\" class=\"headerlink\" title=\"Step one, add code to set cookie.\"></a>Step one, add code to set cookie.</h2><p>You can add below code via Code Snippets or directly to theme&#x2019;s function.php file. For HTTPS:</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function set_post_cookie() {</span><br><span class=\"line\">echo &apos;&lt;script&gt;document.cookie = &quot;_pass=1; max-age=43200; path=/; secure&quot;;&lt;/script&gt;&apos; . &quot;n&quot;; </span><br><span class=\"line\">}</span><br><span class=\"line\">add_action( &apos;comment_form&apos;, &apos;set_post_cookie&apos;, 100 );</span><br></pre></td></tr></table></figure>\n\n<p>This will set a cookie &#x201C;human&#x201D; and value is &#x201C;1&#x201D;. You can change the cookie name and value to whatever you want. If you use HTTP, remove the the work secure from above code.</p>\n<h2 id=\"Step-two-add-below-code-to-check-and-block-spam-bot-with-Nginx-Apache\"><a href=\"#Step-two-add-below-code-to-check-and-block-spam-bot-with-Nginx-Apache\" class=\"headerlink\" title=\"Step two, add below code to check and block spam bot with Nginx/Apache\"></a>Step two, add below code to check and block spam bot with Nginx/Apache</h2><p><strong>For NGINX:</strong></p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#Stop Automated Comment Spam and log in attempt with Nginx</span><br><span class=\"line\">if ($request_uri ~* /wp.comments.post.php/wp-login.php) { set $block_flag 1; }</span><br><span class=\"line\">if ($http_cookie ~* _pass) { set $block_flag 0; }</span><br><span class=\"line\">if ($block_flag) {</span><br><span class=\"line\">        return 403;</span><br><span class=\"line\">    }</span><br></pre></td></tr></table></figure>\n\n<p><strong>For Apache:</strong></p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RewriteCond %{REQUEST_URI} ^/wp.comments.post.php?$ [OR]</span><br><span class=\"line\">RewriteCond %{REQUEST_URI} ^(.*)?wp-login\\.php(.*)$</span><br><span class=\"line\">RewriteCond %{HTTP_COOKIE} !_pass</span><br><span class=\"line\">RewriteRule ^forbid/(.*)$ - [F]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Step-three-reset-the-cookie-for-failed-login-attempt\"><a href=\"#Step-three-reset-the-cookie-for-failed-login-attempt\" class=\"headerlink\" title=\"Step three, reset the cookie for failed login attempt\"></a>Step three, reset the cookie for failed login attempt</h2><p>Every time incorrect login attempted cookie will be remove to prevent brute force login attack. Add below codes to functions.php of your theme</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function no_wordpress_errors(){</span><br><span class=\"line\">echo &apos;&lt;script&gt;document.cookie = &quot;_pass=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; secure&quot;;&lt;/script&gt;&apos; . &quot;&quot;;</span><br><span class=\"line\">$ip=$_SERVER[&apos;REMOTE_ADDR&apos;];</span><br><span class=\"line\">$message = &quot;Your are blocked. IP address $ip&quot;;</span><br><span class=\"line\">return $message;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">add_filter( &apos;login_errors&apos;, &apos;no_wordpress_errors&apos;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"JavaScript-must-be-turned-on-and-browser-must-accept-cookie-for-this-system-to-work\"><a href=\"#JavaScript-must-be-turned-on-and-browser-must-accept-cookie-for-this-system-to-work\" class=\"headerlink\" title=\"JavaScript must be turned on and browser must accept cookie for this system to work.\"></a>JavaScript must be turned on and browser must accept cookie for this system to work.</h3><p>Remember! Next time when you try to login your admin page, open a post first so you will have the cookie and will not be blocked by this.</p>\n",
            "tags": [
                "WordPress",
                "Apache",
                "Nginx"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/asus-z87-macos-high-sierra-upgrade-guide-clover/",
            "url": "https://www.qualityology.com/tech/asus-z87-macos-high-sierra-upgrade-guide-clover/",
            "title": "Asus Z87-A MacOS high sierra upgrade prepare with clover",
            "date_published": "2018-01-01T00:43:06.000Z",
            "content_html": "<p>This guide is for upgrading your system from previous version to high sierra 10.13.x. For how to prepare USB installation kit, check here: <a href=\"https://www.qualityology.com/tech/install-macos-with-clover-efi-bootloader-on-asus-z87-a/\" title=\"Install Mac OS X with clover EFI bootloader on ASUS Z87a\">Install Mac OS X with clover EFI bootloader on ASUS Z87a</a> <img src=\"/2017/12/masOS-highsierra.png\" alt=\"Masos Highsierra\"></p>\n<h2 id=\"First-add-driver-support-to-APFS\"><a href=\"#First-add-driver-support-to-APFS\" class=\"headerlink\" title=\"First, add driver support to APFS.\"></a>First, add driver support to APFS.</h2><p>Upgrading to high sierra will automatically cover HFS+ file system to APFS. Without the driver, clover will not able to boot to high sierra. <strong>What is APFS?</strong> APFS is the Apple File System. It was introduced at WWDC 2016 and, starting this year, it will replace the existing HFS+ file system on Apple Watch, Apple TV, iPhone, iPad, MacBook, iMac, and Mac Pro. <a href=\"https://www.qualityology.com/2017/12/apfs.efi_.zip\">apfs.efi</a> for 10.13.2 If you already have apfs.edi in your clover driver folder and want to upgrade it to the version that match your system. You can follow below step. 1. Boot into macOS High Sierra 2. open terminal 3. type</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">open /usr/standalone/i386/</span><br></pre></td></tr></table></figure>\n\n<p>4. Copy apfs.efi to /Volumes/EFI/EFI/CLOVER/drivers64UEFI/</p>\n<h2 id=\"Second-upgrade-your-kexts\"><a href=\"#Second-upgrade-your-kexts\" class=\"headerlink\" title=\"Second, upgrade your kexts\"></a>Second, upgrade your kexts</h2><p>Make sure you have updated version of kext for the new system. <a href=\"https://github.com/vit9696/AppleALC/releases/latest\">AppleALC.kext</a> - enabling native macOS HD audio. <a href=\"https://bitbucket.org/RehabMan/os-x-fakesmc-kozlek/downloads/\">FakeSMC.kext</a> - an open source SMC device driver/emulator. <a href=\"https://github.com/vit9696/Lilu/releases/latest\">Lilu.kext</a> - open source kernel extension bringing a platform for arbitrary kext, library, and program patching throughout the system for macOS. <a href=\"https://sourceforge.net/projects/intelgraphicsfixup/files/latest/download\">IntelGraphicsFixup.kext</a> - kernel extension for Lilu</p>\n<ul>\n<li>  Fixes PAVP freezes on Intel video (HD 4000/4400/4600), Sky Lake and Kaby Lake Graphics</li>\n<li>  Fixes boot logo on all known Intel Graphics starting with HD4000, (via frame buffer reset or via restoring video memory content)</li>\n<li>  Fixes display initialization issues for Sky Lake &amp; Kaby Lake</li>\n</ul>\n<p><a href=\"https://bitbucket.org/RehabMan/os-x-realtek-network/downloads/\">RealtekRTL8111.kext</a>&#xA0;- Realtek RTL8111 Network Driver. <a href=\"https://www.qualityology.com/2017/12/USB_Series8_Injector.kext_.zip\">USB_Series8_Injector.kext</a> - inject USB ports Asus Z87-A motherboard (Specifically modified for Z87-A with iMac14,2 SMBIOS, will not work with other SMBIOS without changing code. Not tested with other board) - no update needed for future update unless Apple make significant change to their code for USB port.</p>\n<h2 id=\"Third-raise-USB-Port-limit\"><a href=\"#Third-raise-USB-Port-limit\" class=\"headerlink\" title=\"Third, raise USB Port limit\"></a>Third, raise USB Port limit</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">Comment: Change 15 port limit to 24 in XHCI kext 10.13</span><br><span class=\"line\">Find: 837D8C10</span><br><span class=\"line\">Name: AppleUSBXHCIPCI</span><br><span class=\"line\">Replace: 837D8C1B</span><br></pre></td></tr></table></figure>\n\n<p>Now you are good to go with the upgrade just like upgrading a real Mac.</p>\n",
            "tags": [
                "MacOS"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/fix-error-mediakit-reports-not-enough-space-device-requested-operation/",
            "url": "https://www.qualityology.com/tech/fix-error-mediakit-reports-not-enough-space-device-requested-operation/",
            "title": "Fix error - Mediakit reports not enough space on device for requested operation",
            "date_published": "2017-12-30T23:15:34.000Z",
            "content_html": "<p>If you tried use MacOS&#x2019;s disk utility to erase or format a old/new hard drive, you may encounter some issue. MacOS will show below error when you tried to erase or format the drive, regardless your hard drive space:</p>\n<blockquote>\n<p>Erase process has failed, press done to continue</p>\n</blockquote>\n<p>The detail message will say:</p>\n<blockquote>\n<p>Volume erase failed: Media kit reports not enough space on this device for requested operation</p>\n</blockquote>\n<p>This error appear mostly when you try to convert Windows formatted hard drive to HFS+ (OSX Journaled). Some new external hard drive come with NTFS format. If you have this issue, you can still use diskutil to do this, but in terminal. <strong>Step 1, find your disk name you&#x2019;re trying to format.</strong> You can use command:</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diskutil list</span><br></pre></td></tr></table></figure>\n\n<p>or find that from disk utility. <img src=\"/2017/12/disk-utility.png\" alt=\"Disk Utility\"> <strong>Step 2, unmount that usb from terminal.</strong> From step 1 we got the disk name is disk3. Replace disk3&#xA0;with the correct disk name you found using step 1 for below command.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diskutil unmountDisk force disk3</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 3, Filling the disk with all zeros</strong> (This may take a while, as it is making every bit of data 0.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo dd if=/dev/zero of=/dev/disk3 bs=1M</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 4, partition it</strong> The following command will create one partition with JHFS+ format. You can change JHFS+ to APFS, ExFAT if you like.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diskutil partitionDisk disk3 GPT JHFS+ &quot;My External HD&quot; 0g</span><br></pre></td></tr></table></figure>\n\n<p>If you have issue with Windows, you can see the tutorial for Windows: <a href=\"https://www.qualityology.com/tech/properly-delete-a-partition-on-usb-drive-using-diskpart/\">Properly Delete Extra Partitions on USB Drive using DiskPart</a></p>\n",
            "tags": [
                "MacOS"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/open-pdfa-pdf-file-without-read-mode/",
            "url": "https://www.qualityology.com/tech/open-pdfa-pdf-file-without-read-mode/",
            "title": "Open PDF/A PDF file without read-only mode",
            "date_published": "2017-10-20T05:49:04.000Z",
            "content_html": "<p>The file you have opened complies with the pdf/a standard and has been opened read-only. If you open a PDF/A standard PDF, in default you will not able to modify it because Adobe PDF reader or Acrobat will open it in view only mode. <img src=\"/2017/10/pdf-a.png\" alt=\"Pdf A\"></p>\n<blockquote>\n<p>PDF/A is an ISO-standardized version of the Portable Document Format (PDF) specialized for use in the archiving and long-term preservation of electronic documents. PDF/A differs from PDF by prohibiting features ill-suited to long-term archiving, such as font linking (as opposed to font embedding) and encryption.[1] The ISO requirements for PDF/A file viewers include color management guidelines, support for embedded fonts, and a user interface for reading embedded annotations (From Wikipedia).</p>\n</blockquote>\n<p>PDF/A format is important and mainly for business use. It&#x2019;s a format that ensures a PDF file can be reproduced exactly the same way because all necessary information for displaying the document is embedded in the file. It is safe, It is safer and securer for long run. Actually Adobe PDF reader or Acrobat have the option to turn off the PDF/A view only mode.</p>\n<h2 id=\"How-to-open-a-PDF-A-PDF-file-without-read-only-mode\"><a href=\"#How-to-open-a-PDF-A-PDF-file-without-read-only-mode\" class=\"headerlink\" title=\"How to open a PDF/A PDF file without read-only mode?\"></a>How to open a PDF/A PDF file without read-only mode?</h2><p><strong>Edit</strong>&gt;<strong>Preferences</strong>&gt;<strong>Documents</strong>&gt;<strong>PDF/A View mode</strong>. Set <strong>view documents in PDF/A mode</strong> to &#x201C;never&#x201D;. You can revert back to the default setting anytime you want to.</p>\n",
            "tags": [
                "PDF"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/ricoh-sp-c250dn-c252dn-ppd-cups-driver-for-linux-macos/",
            "url": "https://www.qualityology.com/tech/ricoh-sp-c250dn-c252dn-ppd-cups-driver-for-linux-macos/",
            "title": "Ricoh SP C250DN C252DN PPD CUPS driver for LINUX and macOS",
            "date_published": "2017-10-04T21:25:43.000Z",
            "content_html": "<p>C250DN or C252DN can be driven by setting PCL6 and use CUPS+Gutenprint driver. However, if we use Generic driver, it will not print out color. </p>\n<p>Ricoh does not have dedicate PPD driver for Linux platforms like Ubuntu or Debian for SP C250DN and C252DN color printers. However, Ricoh does have driver for MacOS which in fact is a PPD driver. It comes with a PPD installer for MacOS and it will copy to the PPD to MacOS&#x2019;s CUPS driver folder. We can use this PPD for Linux CUPS setup. With the driver, we can also make Air Print server to make this printer even more valuable if you have Apple devices all around your house. </p>\n<p><a href=\"https://www.qualityology.com/2016/06/RICOH-C250DN-C252DN.zip\">Download RICOH C250DN C252DN PPD Driver</a> </p>\n<p>Both PPDs has been tested in macOS high sierra, and also in AirPrint setup using Debian and CUPS, print, color and alignment all work perfectly.</p>\n<p> <img src=\"/2016/06/C250DN-CUPS.png\" alt=\"C250dn Cups\"></p>\n",
            "tags": [
                "driver"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/edit-hosts-file-to-override-dns-record-for-domains/",
            "url": "https://www.qualityology.com/tech/edit-hosts-file-to-override-dns-record-for-domains/",
            "title": "Edit Hosts file to override DNS record for domains",
            "date_published": "2017-10-01T19:01:02.000Z",
            "content_html": "<p>Hosts file will instruct your machine to go directly to an IP address for specified domain instead of checking with DNS server. For example, point <a href=\"http://www.qualityology.com/\">www.qualityology.com</a> and qualityology.com to Google Cloud Platform server:</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">35.185.219.11 www.qualityology.com</span><br><span class=\"line\">35.185.219.11 qualityology.com</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h2><p>For Windows 10, Windows 8, Windows 7, and Windows Vista systems that use User Account Control (UAC).</p>\n<ol>\n<li>Run Notepad as Administrator.<ul>\n<li>  Press the &#x201C;Windows&#x201D; key, type in &#x201C;Notepad&#x201D;.</li>\n<li>  Right-click the notepad icon and select: Run as Administrator. OK the UAC prompt.</li>\n</ul>\n</li>\n<li> Open the HOSTS file from Notepad. By default, the Hosts file is located in the C:\\Windows\\System32\\Drivers\\etc\\ folder.</li>\n<li> Edit the HOSTS file and save.</li>\n</ol>\n<p>Run the command below in <strong>CMD</strong> to flush DNS cache.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ipconfig /flushdns</span><br></pre></td></tr></table></figure>\n\n<p>*If you use other programs to edit the Hosts file when you have Windows Defender enabled, Windows Defender may determine incorrectly that the Hosts file was changed by malware, and will automatically remove your modified Hosts file and replace it with the default from Microsoft. You will need to allow hosts file change in Windows Defender, exclude the Hosts file from scanning in Windows Defender. By default, Windows system&#x2019;s Hosts file is located in the <strong>%systemroot%\\system32\\drivers\\etc</strong> folder.</p>\n<ol>\n<li> Open Windows Defender.</li>\n<li> On the Settings tab, click Excluded files and locations.</li>\n<li> Under File locations, click Browse.</li>\n<li> Locate and then click the Hosts file.</li>\n<li> Click Add, and then click Save changes.</li>\n<li> Exit Windows Defender.</li>\n<li> After everything is done. Go back to Windows Defender and remove the exclusion to secure the hosts file from unauthorized edit.</li>\n</ol>\n<p><img src=\"/2017/10/defender-windows8.png\"></p>\n<h2 id=\"macOS\"><a href=\"#macOS\" class=\"headerlink\" title=\"macOS\"></a>macOS</h2><ol>\n<li> Open Terminal.</li>\n<li>Type <figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano /etc/hosts</span><br></pre></td></tr></table></figure>\n and hit return.</li>\n<li> Enter your administrator password and then hit return.</li>\n<li> Edit the record or add IP Domain based on your need.</li>\n<li> press control and X, and type Y to save and exit.</li>\n</ol>\n<p>Run the command below in <strong>Terminal</strong> to flush DNS cache.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo killall -HUP mDNSResponder</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/2017/10/mac-terminal.png\"></p>\n",
            "tags": [
                "DNS"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/build-extremely-fast-wordpress-gcp-part-2-nginx/",
            "url": "https://www.qualityology.com/tech/build-extremely-fast-wordpress-gcp-part-2-nginx/",
            "title": "Build an extremely fast WordPress with GCP Part 2: Nginx",
            "date_published": "2017-10-01T05:11:32.000Z",
            "content_html": "<p>Apache or Nginx, what softwares should be used to for your server to achieve the maximum performance? If you have a small free server from GCP from <a href=\"https://www.qualityology.com/tech/build-an-extremely-fast-wordpress-gcp-part1-server/\">part 1</a>, and you want it to be able to handle average 1000 clients per second, Nginx is the best option. Apache use more server resources and must be configured properly to get the best performance. Nginx can handle very large amount of traffic even in a limited environment. We have done the loading test with the server from Google Cloud Platform from <a href=\"https://www.qualityology.com/tech/build-an-extremely-fast-wordpress-gcp-part1-server/\">part 1</a>&#xA0;and the result was great without deep optimization. 1000 client/sec is not the maximum that this setup can get, it is the limit of the free test we could get. <img src=\"/2017/09/loading-test-result.png\"> When we tried the same test using Apache, the test was aborted at the beginning because server crashed. That is why we will use Nginx. We are not the server expert, so we will not discuss how to optimize Apache to pass the same test. What we will need is NGINX + MySQL + PHP-FPM +&#xA0;Microcaching + WordPress.</p>\n<h2 id=\"Step-1-install-Nginx\"><a href=\"#St