{
    "version": "https://jsonfeed.org/version/1",
    "title": "Qualityology - Let's get the most out of life! â€¢ All posts by \"pfsense\" tag",
    "description": "To uncover the best way to achieve desired level of quality in everything. - We dive deep on adding quality to tech gadgets, business, and entertainment because quality matter in life.",
    "home_page_url": "https://www.qualityology.com",
    "items": [
        {
            "id": "https://www.qualityology.com/tech/bridge-multiple-lan-ports-in-pfsense-2-1/",
            "url": "https://www.qualityology.com/tech/bridge-multiple-lan-ports-in-pfsense-2-1/",
            "title": "Bridge Multiple LAN ports/NICs in pfSense 2.1",
            "date_published": "2014-07-15T04:45:25.000Z",
            "content_html": "<p>Nowadays is easy to find a board with more than two ports. For a box with 4 gigabit ports, one used as WAN, others act as as LAN as if they are all part of a switch. Bridging is a good way to go. A bridged interface is one that can filter traffic without pfSense being involved in the IP layer of the connection. This is commonly referred to as a &#x201C;transparent firewall&#x201D;. <strong>Requirements:</strong> pfSense box with multiple NICS; 1 for Wan, others for Lans (two or more). <strong>What we will get:</strong> i port as 1 WAN, Others as LAN. </p>\n<h2 id=\"Step-1-Assign-an-individual-IP-for-all-NICs-by-going-to-&#x2018;Interfaces-&#x2192;-Assign&#x2019;-Important\"><a href=\"#Step-1-Assign-an-individual-IP-for-all-NICs-by-going-to-&#x2018;Interfaces-&#x2192;-Assign&#x2019;-Important\" class=\"headerlink\" title=\"Step 1: Assign an individual IP for all NICs by going to &#x2018;Interfaces &#x2192; Assign&#x2019;. Important!\"></a>Step 1: Assign an individual IP for all NICs by going to &#x2018;Interfaces &#x2192; Assign&#x2019;. Important!</h2><p>Note: Only set up a IPv4 address for each NIC. </p>\n<h2 id=\"Step-2-Set-up-DHCP-on-NIC1-by-going-&#x2018;Services-&#x2192;-DHCP-server&#x2019;\"><a href=\"#Step-2-Set-up-DHCP-on-NIC1-by-going-&#x2018;Services-&#x2192;-DHCP-server&#x2019;\" class=\"headerlink\" title=\"Step 2: Set up DHCP on NIC1 by going &#x2018;Services &#x2192; DHCP server&#x2019;\"></a>Step 2: Set up DHCP on NIC1 by going &#x2018;Services &#x2192; DHCP server&#x2019;</h2><h2 id=\"Step-3-Bridge-other-NICs-by-going-to-&#x2018;Interfaces-&#x2192;-Assign-&#x2192;-Bridges&#x2019;-and-set-up-an-IP-for-the-interface\"><a href=\"#Step-3-Bridge-other-NICs-by-going-to-&#x2018;Interfaces-&#x2192;-Assign-&#x2192;-Bridges&#x2019;-and-set-up-an-IP-for-the-interface\" class=\"headerlink\" title=\"Step 3: Bridge other NICs by going to &#x2018;Interfaces &#x2192; Assign &#x2192; Bridges&#x2019; and set up an IP for the interface.\"></a>Step 3: Bridge other NICs by going to &#x2018;Interfaces &#x2192; Assign &#x2192; Bridges&#x2019; and set up an IP for the interface.</h2><p>Note: Do not include WAN and NIC1. </p>\n<h2 id=\"Step-4-Create-a-interface-groups-by-going-to-&#x2018;Interfaces-&#x2192;-Assign-&#x2192;-Interface-Groups&#x2019;\"><a href=\"#Step-4-Create-a-interface-groups-by-going-to-&#x2018;Interfaces-&#x2192;-Assign-&#x2192;-Interface-Groups&#x2019;\" class=\"headerlink\" title=\"Step 4: Create a interface groups by going to &#x2018;Interfaces &#x2192; Assign &#x2192; Interface Groups&#x2019;.\"></a>Step 4: Create a interface groups by going to &#x2018;Interfaces &#x2192; Assign &#x2192; Interface Groups&#x2019;.</h2><p>Note: Include all NICs and Bridge interface in &#x201C;Member (s)&#x201D;, do not include WAN. </p>\n<h2 id=\"Step-5-Change-the-default-firewall-rule-under-NIC1-to-all-NICs-interfaces-to-avoid-being-locked-out-by-going-to-&#x2018;Firewall-&#x2192;-Rules&#x2019;\"><a href=\"#Step-5-Change-the-default-firewall-rule-under-NIC1-to-all-NICs-interfaces-to-avoid-being-locked-out-by-going-to-&#x2018;Firewall-&#x2192;-Rules&#x2019;\" class=\"headerlink\" title=\"Step 5: Change the default firewall rule under NIC1 to all NICs interfaces to avoid being locked out by going to &#x2018;Firewall &#x2192; Rules&#x2019;\"></a>Step 5: Change the default firewall rule under NIC1 to all NICs interfaces to avoid being locked out by going to &#x2018;Firewall &#x2192; Rules&#x2019;</h2><p> Note: Change the Interface from NIC1 to the Interface groups which is created in Step 4.</p>\n<p> <img src=\"/2014/07/pfsense-bridge-rules.png\" alt=\"Pfsense Bridge Rules\"> </p>\n<h2 id=\"Step-6-Enable-DHCP-on-the-bridge-interface-by-going-to-&#x2018;Services-&#x2192;-DHCP-server&#x2019;\"><a href=\"#Step-6-Enable-DHCP-on-the-bridge-interface-by-going-to-&#x2018;Services-&#x2192;-DHCP-server&#x2019;\" class=\"headerlink\" title=\"Step 6: Enable DHCP on the bridge interface by going to &#x2018;Services &#x2192; DHCP server&#x2019;.\"></a>Step 6: Enable DHCP on the bridge interface by going to &#x2018;Services &#x2192; DHCP server&#x2019;.</h2><h2 id=\"Step-7-Disable-DHCP-on-NIC1-by-going-to-&#x2018;Services-&#x2192;-DHCP-server&#x2019;-and-include-NIC1-into-the-bridge-which-is-set-up-in-Step-3-by-going-to-&#x2018;Interfaces-&#x2192;-Assign-&#x2192;-Bridges&#x2019;\"><a href=\"#Step-7-Disable-DHCP-on-NIC1-by-going-to-&#x2018;Services-&#x2192;-DHCP-server&#x2019;-and-include-NIC1-into-the-bridge-which-is-set-up-in-Step-3-by-going-to-&#x2018;Interfaces-&#x2192;-Assign-&#x2192;-Bridges&#x2019;\" class=\"headerlink\" title=\"Step 7: Disable DHCP on NIC1 by going to &#x2018;Services &#x2192; DHCP server&#x2019; and include NIC1 into the bridge which is set up in Step 3 by going to &#x2018;Interfaces &#x2192; Assign &#x2192; Bridges&#x2019;.\"></a>Step 7: Disable DHCP on NIC1 by going to &#x2018;Services &#x2192; DHCP server&#x2019; and include NIC1 into the bridge which is set up in Step 3 by going to &#x2018;Interfaces &#x2192; Assign &#x2192; Bridges&#x2019;.</h2><p> <img src=\"/2014/07/pfsense-bridge-interfaces.png\" alt=\"Pfsense Bridge Interfaces\"> </p>\n<h2 id=\"Step-8-reboot-and-test\"><a href=\"#Step-8-reboot-and-test\" class=\"headerlink\" title=\"Step 8: reboot and test.\"></a>Step 8: reboot and test.</h2>",
            "tags": [
                "pfsense"
            ]
        },
        {
            "id": "https://www.qualityology.com/tech/installing-the-cups-print-server-to-pfsense-2-1-and-2-x/",
            "url": "https://www.qualityology.com/tech/installing-the-cups-print-server-to-pfsense-2-1-and-2-x/",
            "title": "Installing the CUPS Print Server to pfSense 2.1 and 2.x",
            "date_published": "2014-07-14T22:09:46.000Z",
            "content_html": "<p>CUPS, the Common UNIX Printing System, provides a portable printing layer for UNIX-based operating systems. It has been developed by Easy Software Products to promote a standard printing solution for all UNIX vendors and users. To install CUPS using a precompiled binary, for pfSense 2.x, issue the following command from a root terminal: Note: For NanoBSD, must remount embedded filesystem as read-write. <strong>pfSense 2.1:</strong> in the GUI under Diagnostics &gt; NanoBSD, using the toggle button there. <strong>Previous version:</strong></p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/rc.conf_mount_rw</span><br></pre></td></tr></table></figure>\n<h2 id=\"Adding-CUPS-to-PFSense-2-1\"><a href=\"#Adding-CUPS-to-PFSense-2-1\" class=\"headerlink\" title=\"Adding CUPS to PFSense 2.1\"></a>Adding CUPS to PFSense 2.1</h2><p><strong>Step 1: Add correct repository</strong> For x86 version:</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setenv PACKAGESITE ftp://ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/i386/8.1-RELEASE/packages/Latest/</span><br></pre></td></tr></table></figure>\n<p>or</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setenv PACKAGESITE http://www.mirrorservice.org/pub/FreeBSD/ports/i386/packages-8.3-release/Latest/</span><br></pre></td></tr></table></figure>\n<p>For x64 version:</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setenv PACKAGESITE http://www.mirrorservice.org/pub/FreeBSD/ports/amd64/packages-8.3-release/Latest/</span><br></pre></td></tr></table></figure>\n<h2 id=\"Step-2-Install-CUPS-dependencies\"><a href=\"#Step-2-Install-CUPS-dependencies\" class=\"headerlink\" title=\"Step 2: Install CUPS + dependencies\"></a>Step 2: Install CUPS + dependencies</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg_add -r cups</span><br></pre></td></tr></table></figure>\n<h2 id=\"Step-3-modify-cupsd-conf\"><a href=\"#Step-3-modify-cupsd-conf\" class=\"headerlink\" title=\"Step 3: modify cupsd.conf\"></a>Step 3: modify cupsd.conf</h2><p>Replace the original config file (/usr/local/etc/cups/cupsd.conf) with the text below, this will allow anyone on the local network to access the Web GUI, cancel print jobs, and connect to the printer.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DefaultEncryption Never</span><br><span class=\"line\">LogLevel warn</span><br><span class=\"line\">SystemGroup wheel</span><br><span class=\"line\"># Allow remote access</span><br><span class=\"line\">Port 631</span><br><span class=\"line\">Listen /var/run/cups.sock</span><br><span class=\"line\"># Enable printer sharing and shared printers.</span><br><span class=\"line\">Browsing On</span><br><span class=\"line\">BrowseOrder allow,deny</span><br><span class=\"line\">BrowseAllow all</span><br><span class=\"line\">BrowseRemoteProtocols CUPS</span><br><span class=\"line\">BrowseAddress @LOCAL</span><br><span class=\"line\">BrowseLocalProtocols CUPS</span><br><span class=\"line\">DefaultAuthType Basic</span><br><span class=\"line\">&lt;Location /&gt;</span><br><span class=\"line\"># Allow shared printing and remote administration...</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow @LOCAL</span><br><span class=\"line\">&lt;/Location&gt;</span><br><span class=\"line\">&lt;Location /admin&gt;</span><br><span class=\"line\"># Allow remote administration...</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow @LOCAL</span><br><span class=\"line\">&lt;/Location&gt;</span><br><span class=\"line\">&lt;Location /admin/conf&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Require user @SYSTEM</span><br><span class=\"line\"># Allow remote access to the configuration files...</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow @LOCAL</span><br><span class=\"line\">&lt;/Location&gt;</span><br><span class=\"line\">&lt;Policy default&gt;</span><br><span class=\"line\">&lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class=\"line\">Require user @OWNER @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Require user @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Require user @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit CUPS-Authenticate-Job&gt;</span><br><span class=\"line\">Require user @OWNER @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit All&gt;</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;/Policy&gt;</span><br><span class=\"line\">&lt;Policy authenticated&gt;</span><br><span class=\"line\">&lt;Limit Create-Job Print-Job Print-URI&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Require user @OWNER @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Require user @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Require user @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class=\"line\">AuthType Default</span><br><span class=\"line\">Require user @OWNER @SYSTEM</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;Limit All&gt;</span><br><span class=\"line\">Order deny,allow</span><br><span class=\"line\">&lt;/Limit&gt;</span><br><span class=\"line\">&lt;/Policy&gt;</span><br><span class=\"line\">BrowseWebIF Yes</span><br></pre></td></tr></table></figure>\n<h2 id=\"Step-4-Create-the-startup-script-usr-local-etc-rc-d-run-cups-sh-for-CUPS\"><a href=\"#Step-4-Create-the-startup-script-usr-local-etc-rc-d-run-cups-sh-for-CUPS\" class=\"headerlink\" title=\"Step 4: Create the startup script (/usr/local/etc/rc.d/run_cups.sh) for CUPS\"></a>Step 4: Create the startup script (/usr/local/etc/rc.d/run_cups.sh) for CUPS</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/sh</span><br><span class=\"line\"></span><br><span class=\"line\"> # Allow time for devfs to initialize.</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"></span><br><span class=\"line\"> # This will allow LPT(parallel port) printers.</span><br><span class=\"line\">echo -e &quot;[system=10] \\nadd path &apos;unlpt*&apos; mode 0660 group cups\\nadd path &apos;ulpt*&apos; mode 0660 group cups\\nadd path &apos;lpt*&apos; mode 0660 group cups&quot; &gt; /etc/devfs.rules</span><br><span class=\"line\"></span><br><span class=\"line\"> # Restart devfs so it can read new config.</span><br><span class=\"line\">/etc/rc.d/devfs restart</span><br><span class=\"line\"></span><br><span class=\"line\"> # Allow time for devfs to initialize.</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"></span><br><span class=\"line\"> # Now let&apos;s start CUPS!</span><br><span class=\"line\">/usr/local/etc/rc.d/cupsd onestart</span><br></pre></td></tr></table></figure>\n<h2 id=\"Step-5-Make-the-script-executable\"><a href=\"#Step-5-Make-the-script-executable\" class=\"headerlink\" title=\"Step 5: Make the script executable\"></a>Step 5: Make the script executable</h2><figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">`chmod 755 /usr/local/etc/rc.d/run_cups.sh`</span><br></pre></td></tr></table></figure>\n<h2 id=\"Step-6-Add-rule-to-devfs-so-CUPS-print-server-can-start-on-boot\"><a href=\"#Step-6-Add-rule-to-devfs-so-CUPS-print-server-can-start-on-boot\" class=\"headerlink\" title=\"Step 6: Add rule to devfs so CUPS print server can start on boot\"></a>Step 6: Add rule to devfs so CUPS print server can start on boot</h2><p>Add two lines to /etc/rc.conf</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cupsd_enable=&quot;YES&quot;</span><br><span class=\"line\">devfs_system_ruleset=&quot;system&quot;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Step-7-Disable-CUPS-during-reboot-and-shutdown\"><a href=\"#Step-7-Disable-CUPS-during-reboot-and-shutdown\" class=\"headerlink\" title=\"Step 7: Disable CUPS during reboot and shutdown\"></a>Step 7: Disable CUPS during reboot and shutdown</h2><p>Add the following command to &#x201C;/etc/rc.reboot&#x201D; and &#x201C;/etc/rc.shutdown&#x201D; before the line that says &#x201C;# If PLATFORM is pfSense then remove&#x201D;</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/etc/rc.d/cupsd stop</span><br></pre></td></tr></table></figure>\n<p><strong>All set. Start CUPS now</strong> Reboot or use command:</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/etc/rc.d/run_cups.sh</span><br></pre></td></tr></table></figure>\n<p><strong>Add printer to CUPS:</strong> Now open up your web browser and go to &#x201C;<a href=\"http://your/\">http://Your</a> pfSense address:631&#x201D;.</p>\n<h2 id=\"Printer-driver\"><a href=\"#Printer-driver\" class=\"headerlink\" title=\"Printer driver:\"></a>Printer driver:</h2><p><strong>Foomatic</strong>: a database-driven system for integrating free software printer drivers with common spoolers under Unix. If you receive error &#x201C;stopped with status 22&#x201D;. Install foomatic-db + dependencies.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg_add -r foomatic-db foomatic-filters</span><br></pre></td></tr></table></figure>\n<p><strong>hplip</strong>: HP drivers for DeskJet, OfficeJet, Photosmart, Business Inkjet and some LaserJet printer models, as well as a number of Brother printers.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg_add -r hplip</span><br></pre></td></tr></table></figure>\n<p><strong>gutenprint</strong>: A collection of high quality drivers for Canon, Epson, Lexmark, Sony, Olympus, and PCL printers for use with GhostScript, CUPS, Foomatic, and the GIMP</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg_add -r  gutenprint</span><br></pre></td></tr></table></figure>\n<p><strong>splix</strong>: Samsung drivers for SPL (Samsung Printer Language) printers.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg_add -r  splix</span><br></pre></td></tr></table></figure>\n<h2 id=\"Missing-printer-driver-file-PPD\"><a href=\"#Missing-printer-driver-file-PPD\" class=\"headerlink\" title=\"Missing printer driver file PPD?\"></a>Missing printer driver file PPD?</h2><p>Some printers&#x2019; PPD are available in <a href=\"http://www.openprinting.org/printers\">http://www.openprinting.org/printers</a> <strong>Troubleshooting:</strong> If you receive error: &#x201C;Unable to create certificate file /var/run/cups/certs/0 - No such file or directory&#x201D;, add the following command to the startup script.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -r /var/run/cups/certs/</span><br></pre></td></tr></table></figure>\n<p>If you receive error: &#x201C;cupsdReadClient: Unable to write 14 bytes to /var/spool/cups/00000005: Bad file descriptor&#x201D;, add the following command to the startup script.</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -pv /var/spool/cups/</span><br></pre></td></tr></table></figure>\n<p>If your CUPS decided to detect printers as a /dev/ulpt1 /dev/ulpt0 instead of the correctly detected printer (with /dev/usb/0.2.* and /dev/usb/0.3.*), to enable printing with local printer you need to give group &#x2018;cups&#x2019; r/w access to printer device: 1) Add following to /etc/devfs.rules (create if it doesn&#x2019;t exist):</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[system=10]</span><br><span class=\"line\">add path &apos;unlpt*&apos; mode 0660 group cups</span><br><span class=\"line\">add path &apos;ulpt*&apos; mode 0660 group cups</span><br><span class=\"line\">add path &apos;lpt*&apos; mode 0660 group cups</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>And following to /etc/rc.conf:</li>\n</ol>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">devfs_system_ruleset=&quot;system&quot;</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>Restart devfs:</li>\n</ol>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/rc.d/devfs restart</span><br></pre></td></tr></table></figure>\n<p>If your system supports &#x2018;devd&#x2019; you can copy $PREFIX/share/examples/cups/lpt-cupsd.conf to $PREFIX/etc/devd/ To enable printing under Gimp and MS-Windows clients do the following:</p>\n<ol>\n<li> Uncomment application/octet-stream line in mime.types</li>\n<li> Uncomment application/octet-stream line in mime.convs</li>\n<li> Restart cupsd</li>\n</ol>\n<p>If you are using libusb, it is important that no device driver, e.g. ulpt(4) is attached to the device you wish to use. In this case please ensure the cups user and group has read/write access to /dev/ugen* If you are using a USB printer wtih FreeBSD 8.0 or later, you will need to find the proper /dev/usb/* device pointed at by the /dev/ugen* entry. Follow the instructions for devfs.rules as above, but append a rule similar to the following for a printer attached as /dev/ugen0.2:</p>\n<figure class=\"highlight plain hljs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add path &apos;usb/0.2.*&apos; mode 0660 group cups</span><br></pre></td></tr></table></figure>",
            "tags": [
                "pfsense"
            ]
        }
    ]
}