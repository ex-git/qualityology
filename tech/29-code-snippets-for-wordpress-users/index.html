<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta charset="utf-8"><title>29 Code Snippets for WordPress Users - Qualityology - Let&#39;s get the most out of life!</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Tired of installing tons of WordPress plugins for small features? You can use code snippets to do certain things without a dedicated plugin. Generally the functions.php file is the place to add code s"><meta property="og:type" content="article"><meta property="og:title" content="29 Code Snippets for WordPress Users"><meta property="og:url" content="https://www.qualityology.com/tech/29-code-snippets-for-wordpress-users/index.html"><meta property="og:site_name" content="Qualityology - Let&#39;s get the most out of life!"><meta property="og:description" content="Tired of installing tons of WordPress plugins for small features? You can use code snippets to do certain things without a dedicated plugin. Generally the functions.php file is the place to add code s"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2021-02-23T20:09:23.000Z"><meta property="article:modified_time" content="2021-02-24T04:04:36.800Z"><meta property="article:author" content="Evan Xu"><meta property="article:tag" content="WordPress"><meta name="twitter:card" content="summary"><link rel="alternative" href="/rss.xml" title="29 Code Snippets for WordPress Users" type="aapplication/rss+xml"><link rel="alternative" href="/atom.xml" title="29 Code Snippets for WordPress Users" type="application/atom+xml"><link rel="alternative" href="/feed.json" title="29 Code Snippets for WordPress Users" type="application/json"><link rel="icon" type="image/png" href="/assets/logo.png"><link rel="apple-touch-icon" href="/assets/logo_160.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/logo_304.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/logo_360.png"><link rel="apple-touch-icon" sizes="167x167" href="/assets/logo_334.png"><meta name="apple-mobile-web-app-title" content="29 Code Snippets for WordPress Users - Qualityology - Let&#39;s get the most out of life!"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.9.2/css/bulma.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto&display=swap"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css"><link rel="stylesheet" href="/css/style.css"><script>const pageLoaded=()=>{const o=window.adsbygoogle||[];o.push({}),o.push({})}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-6144848-7"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-6144848-7")</script><meta name="generator" content="Hexo 5.4.0"></head><body onload="pageLoaded()"><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item navbar-logo" href="/"><img src="/assets/loading.gif" data-original="/assets/logo.png" alt height="28"></a><div class="navbar-burger"><span></span> <span></span> <span></span></div></div><div class="navbar-menu navbar-start"><span class="navbar-item"><a href="/lifestyle">Lifestyle </a></span><span class="navbar-item is-active"><a href="/tech">Technology</a></span></div><div class="navbar-menu navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-4 is-size-4-mobile" itemprop="name">29 Code Snippets for WordPress Users</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2021-02-23T20:09:23.000Z" itemprop="datePublished">Feb 23 2021</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/tech/">tech</a> </span><span class="column is-narrow">14 minutes read (About 2083 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><p>Tired of installing tons of WordPress plugins for small features? You can use code snippets to do certain things without a dedicated plugin. Generally the <code>functions.php</code> file is the place to add code snippes.</p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="9746105168" data-ad-format="auto" data-full-width-responsive="true"></ins><p>If you don&#x2019;t want to edit PHP file and want to gain more fine control over code snippets? You should try out <strong>Code Snippets</strong> plugin. With <strong>Code Snippets</strong>, you can easily add PHP code snippets to your WordPress site without custom snippets in theme&#x2019;s <code>functions.php</code> file. Search <code>Code Snippets</code> in WordPress&#x2019;s Add Plugins page and install it. You can start adding code snippet just like how you write post.</p><p>We collected some very useful code snippets for WordPress. All can be used with Code Snippets plugin or added it directly to PHP file.</p><h2 id="1-Auto-update-plug-and-theme"><a href="#1-Auto-update-plug-and-theme" class="headerlink" title="1. Auto update plug and theme"></a>1. Auto update plug and theme</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add_filter( &apos;auto_update_plugin&apos;, &apos;__return_true&apos; );</span><br><span class="line">add_filter( &apos;auto_update_theme&apos;, &apos;__return_true&apos; );</span><br></pre></td></tr></table></figure><h2 id="2-Remove-all-HTML-Comments-and-space"><a href="#2-Remove-all-HTML-Comments-and-space" class="headerlink" title="2. Remove all HTML Comments and space"></a>2. Remove all HTML Comments and space</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">function callback($buffer) {</span><br><span class="line">  $search = array(</span><br><span class="line">	&apos;/\n/&apos;,</span><br><span class="line">        &apos;/\&gt;[^\S ]+/s&apos;,  // strip whitespaces after tags, except space</span><br><span class="line">        &apos;/[^\S ]+\&lt;/s&apos;,  // strip whitespaces before tags, except space</span><br><span class="line">        &apos;/(\s)+/s&apos;,       // shorten multiple whitespace sequences</span><br><span class="line">	&apos;/&lt;!--(.|s)*?--&gt;/&apos;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    $replace = array(</span><br><span class="line">	  &apos;&apos;,</span><br><span class="line">        &apos;&gt;&apos;,</span><br><span class="line">        &apos;&lt;&apos;,</span><br><span class="line">        &apos;\\1&apos;,</span><br><span class="line">	 &apos;&apos;</span><br><span class="line">    );</span><br><span class="line">  </span><br><span class="line">    #$buffer = preg_replace(&apos;/&lt;!--(.|s)*?--&gt;/&apos;, &apos;&apos;, $buffer);</span><br><span class="line">  	$buffer = preg_replace($search, $replace, $buffer);</span><br><span class="line">    return $buffer;</span><br><span class="line">}</span><br><span class="line">function buffer_start() {</span><br><span class="line">    ob_start(&quot;callback&quot;);</span><br><span class="line">}</span><br><span class="line">function buffer_end() {</span><br><span class="line">    ob_end_flush();</span><br><span class="line">}</span><br><span class="line">add_action(&apos;get_header&apos;, &apos;buffer_start&apos;);</span><br><span class="line">add_action(&apos;wp_footer&apos;, &apos;buffer_end&apos;, 9999);</span><br></pre></td></tr></table></figure><h2 id="3-Add-DNS-Prefetching"><a href="#3-Add-DNS-Prefetching" class="headerlink" title="3. Add DNS Prefetching"></a>3. Add DNS Prefetching</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//* Adding DNS Prefetching</span><br><span class="line">function stb_dns_prefetch() {</span><br><span class="line">echo &apos;&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//pagead2.googlesyndication.com&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//googleads.g.doubleclick.net&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//www.google-analytics.com&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//s.gravatar.com/&quot; /&gt;&apos;;</span><br><span class="line">}</span><br><span class="line">add_action(&apos;wp_head&apos;, &apos;stb_dns_prefetch&apos;, 1);</span><br></pre></td></tr></table></figure><h2 id="4-Stop-loading-wp-emoji-release-min-js"><a href="#4-Stop-loading-wp-emoji-release-min-js" class="headerlink" title="4. Stop loading wp-emoji-release.min.js"></a>4. Stop loading wp-emoji-release.min.js</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remove_action(&apos;wp_head&apos;, &apos;print_emoji_detection_script&apos;, 7);</span><br><span class="line">remove_action(&apos;wp_print_styles&apos;, &apos;print_emoji_styles&apos;);</span><br></pre></td></tr></table></figure><h2 id="5-Prefer-loading-jquery-JavaScript-with-async-and-defer-tag"><a href="#5-Prefer-loading-jquery-JavaScript-with-async-and-defer-tag" class="headerlink" title="5. Prefer loading jquery JavaScript with async and defer tag"></a>5. Prefer loading jquery JavaScript with async and defer tag</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (!is_admin()) {</span><br><span class="line">    add_filter( &apos;script_loader_tag&apos;, function ( $tag, $handle ) {    </span><br><span class="line">        if ( strpos( $tag, &quot;jquery.min.js&quot; ) || strpos( $tag, &quot;jquery.js&quot;) ) {</span><br><span class="line">            return $tag;</span><br><span class="line">        }</span><br><span class="line">        return str_replace( &apos; src&apos;, &apos; async src&apos;, $tag );</span><br><span class="line">    }, 10, 2 );</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="6-Load-CDN-jQuery-from-Google"><a href="#6-Load-CDN-jQuery-from-Google" class="headerlink" title="6. Load CDN jQuery from Google"></a>6. Load CDN jQuery from Google</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Load CDN jQuery </span><br><span class="line">add_action( &apos;wp_enqueue_scripts&apos;, &apos;register_jquery&apos; );</span><br><span class="line">function register_jquery() {</span><br><span class="line">    if (!is_admin() &amp;&amp; $GLOBALS[&apos;pagenow&apos;] != &apos;wp-login.php&apos;) {</span><br><span class="line">        // comment out the next two lines to load the local copy of jQuery</span><br><span class="line">        wp_deregister_script(&apos;jquery&apos;);</span><br><span class="line">        wp_register_script(&apos;jquery&apos;, &apos;https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js&apos;, false, &apos;3.2.1&apos;);</span><br><span class="line">        wp_enqueue_script(&apos;jquery&apos;);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">// end</span><br></pre></td></tr></table></figure><h2 id="7-Remove-jQuery-Migrate-script-from-header-New-plugin-will-not-have-incompatibility-issue"><a href="#7-Remove-jQuery-Migrate-script-from-header-New-plugin-will-not-have-incompatibility-issue" class="headerlink" title="7. Remove jQuery-Migrate script from header (New plugin will not have incompatibility issue)"></a>7. Remove jQuery-Migrate script from header (New plugin will not have incompatibility issue)</h2><figure class="highlight plain hljs"><figcaption><span>Remove migrate script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add_filter( &apos;wp_default_scripts&apos;, &apos;remove_jquery_migrate&apos; );</span><br><span class="line">function remove_jquery_migrate( &amp;$scripts)</span><br><span class="line">  {</span><br><span class="line">  	if(!is_admin())  {</span><br><span class="line">      $scripts-&gt;remove( &apos;jquery&apos;);</span><br><span class="line">      $scripts-&gt;add( &apos;jquery&apos;, false, array( &apos;jquery-core&apos; ), &apos;1.10.2&apos; );</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="8-No-self-pings"><a href="#8-No-self-pings" class="headerlink" title="8. No self pings"></a>8. No self pings</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// No Self Pings</span><br><span class="line">function no_self_ping( &amp;$links ) {</span><br><span class="line">  $home = get_option( &apos;home&apos; );</span><br><span class="line">  foreach ( $links as $l =&gt; $link )</span><br><span class="line">  if ( 0 === strpos( $link, $home ) )</span><br><span class="line">  unset($links[$l]);</span><br><span class="line">}</span><br><span class="line">add_action( &apos;pre_ping&apos;, &apos;no_self_ping&apos; );</span><br></pre></td></tr></table></figure><h2 id="9-Add-p-tag-to-lt-more-gt"><a href="#9-Add-p-tag-to-lt-more-gt" class="headerlink" title="9. Add p tag to &lt;!--more--&gt;"></a>9. Add p tag to <code>&lt;!--more--&gt;</code></h2><figure class="highlight plain hljs"><figcaption><span>tag detection</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function has_more()</span><br><span class="line">{</span><br><span class="line"> global $post;</span><br><span class="line"> if ( empty( $post ) ) return;</span><br><span class="line"></span><br><span class="line">    if ($pos=strpos($post-&gt;post_content, &apos;&lt;!--more--&gt;&apos;)) {</span><br><span class="line">        return true;</span><br><span class="line">    } else {</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">//add p tag to more tag</span><br><span class="line">function add_p_tag($link){</span><br><span class="line">return &quot;&lt;p&gt;$link&lt;/p&gt;&quot;;</span><br><span class="line">}</span><br><span class="line">add_filter(&apos;the_content_more_link&apos;, &apos;add_p_tag&apos;); </span><br></pre></td></tr></table></figure><h2 id="10-Inject-google-ads-after-n-link"><a href="#10-Inject-google-ads-after-n-link" class="headerlink" title="10. Inject google ads after n link"></a>10. Inject google ads after n link</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">function inject_ad_text_after_n_chars($content) {</span><br><span class="line">  // insert after the first &lt;/a&gt; after x characters</span><br><span class="line">  $after_character = 1;</span><br><span class="line">  if (is_single()) {</span><br><span class="line">    $before_content = substr($content, 0,  $after_character);</span><br><span class="line">    $after_content = substr($content, $after_character);</span><br><span class="line">    $after_content = explode(&apos;&lt;/p&gt;&apos;, $after_content);</span><br><span class="line">    $text = &apos;&lt;ins class=&quot;adsbygoogle&quot;</span><br><span class="line">     style=&quot;display:block&quot;</span><br><span class="line">     data-ad-client=&quot;your id&quot;</span><br><span class="line">     data-ad-slot=&quot;your ad slot&quot;</span><br><span class="line">     data-ad-format=&quot;auto&quot;&gt;&lt;/ins&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">(adsbygoogle = window.adsbygoogle || []).push({});</span><br><span class="line">&lt;/script&gt;&lt;/p&gt;&apos;;</span><br><span class="line">    array_splice($after_content, 1, 0, $text);</span><br><span class="line">    $after_content = implode(&apos;&apos;, $after_content);</span><br><span class="line">    return $before_content . $after_content;</span><br><span class="line">  }</span><br><span class="line">  else {</span><br><span class="line">    return $content;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">add_filter(&apos;the_content&apos;, &apos;inject_ad_text_after_n_chars&apos;, 13);</span><br></pre></td></tr></table></figure><h2 id="11-Delay-auto-closing-p-tag-to-fix-some-problems"><a href="#11-Delay-auto-closing-p-tag-to-fix-some-problems" class="headerlink" title="11. Delay auto closing p tag to fix some problems."></a>11. Delay auto closing p tag to fix some problems.</h2><figure class="highlight plain hljs"><figcaption><span>auto closing p tag to fix some problems.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remove_filter( &apos;the_content&apos;, &apos;wpautop&apos; );</span><br><span class="line">add_filter( &apos;the_content&apos;, &apos;wpautop&apos; , 12);</span><br></pre></td></tr></table></figure><h2 id="12-Show-Media-upload-path"><a href="#12-Show-Media-upload-path" class="headerlink" title="12. Show Media upload path"></a>12. Show Media upload path</h2><figure class="highlight plain hljs"><figcaption><span>Media upload</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(get_option(&apos;upload_path&apos;)==&apos;wp-content/uploads&apos; || get_option(&apos;upload_path&apos;)==null) {</span><br><span class="line">	update_option(&apos;upload_path&apos;,WP_CONTENT_DIR.&apos;uploads&apos;);</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="13-Image-SEO-with-size-and-height-info"><a href="#13-Image-SEO-with-size-and-height-info" class="headerlink" title="13. Image SEO, with size and height info"></a>13. Image SEO, with size and height info</h2><figure class="highlight plain hljs"><figcaption><span>get_post_image ($post_id</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// select the post content from the db</span><br><span class="line">$image_id = get_post_thumbnail_id();</span><br><span class="line">$image_url = wp_get_attachment_image_src($image_id,&apos;large&apos;);</span><br><span class="line">$the_image_src = $image_url[0];</span><br><span class="line"></span><br><span class="line">		  // if src found, then create a new img tag</span><br><span class="line"></span><br><span class="line">		  if(strlen($the_image_src)) {</span><br><span class="line">			   if(strlen($img_script)) {</span><br><span class="line"></span><br><span class="line">				    // if the src starts with http/https, then strip out server name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				    if(preg_match(&quot;/^(http(|s):\/\/)/&quot;, $the_image_src)) {</span><br><span class="line">					     $the_image_src = preg_replace(&quot;/^(http(|s):\/\/)/&quot;, &apos;&apos;, $the_image_src);</span><br><span class="line">					     $frags = split(&quot;\/&quot;, $the_image_src);</span><br><span class="line">					     array_shift($frags);</span><br><span class="line">					     $the_image_src = &apos;/&apos; . join(&quot;/&quot;, $frags);</span><br><span class="line">				    }</span><br><span class="line">				    $the_image = &apos;&lt;img class=&quot;&apos; . $class . &apos;&quot; alt=&quot;&apos; . $alt . &apos;&quot; src=&quot;&apos; . $img_script . $the_image_src . &apos;&quot; width=&quot;&apos; . $width . &apos;&quot; height=&quot;&apos; . $height . &apos;&quot;/&gt;&apos;;</span><br><span class="line">			   }</span><br><span class="line">			   else {</span><br><span class="line">				    $the_image = &apos;&lt;img class=&quot;&apos; . $class . &apos;&quot; alt=&quot;&apos; . $alt . &apos;&quot; src=&quot;&apos; . $the_image_src . &apos;&quot; width=&quot;&apos; . $width . &apos;&quot; height=&quot;&apos; . $height . &apos;&quot; width=&quot;&apos; . $width . &apos;&quot; height=&quot;&apos; . $height . &apos;&quot;/&gt;&apos;;</span><br><span class="line">			   }</span><br><span class="line">		  }</span><br><span class="line">       </span><br><span class="line">       // if there&apos;s no image</span><br><span class="line">       else</span><br><span class="line">         return false;</span><br><span class="line">         </span><br><span class="line">		  return $the_image;</span><br><span class="line">	 }</span><br></pre></td></tr></table></figure><h2 id="14-Add-Nofollow-to-comments-link"><a href="#14-Add-Nofollow-to-comments-link" class="headerlink" title="14. Add Nofollow to comments link"></a>14. Add Nofollow to comments link</h2><figure class="highlight plain hljs"><figcaption><span>Nofollow comments line</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#function add_nofollow_to_comments_popup_link(){</span><br><span class="line">#    return &apos; rel=&quot;nofollow&quot; &apos;;}</span><br><span class="line">#add_filter( &apos;comments_popup_link_attributes&apos;, &apos;add_nofollow_to_comments_popup_link&apos; );</span><br><span class="line"></span><br><span class="line">add_filter( &apos;get_comment_author_link&apos;, &apos;rv_remove_comment_author_link&apos;, 10, 3 );</span><br><span class="line">function rv_remove_comment_author_link( $return, $author, $comment_ID ) {</span><br><span class="line">	return $author;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="15-Remove-junk-header"><a href="#15-Remove-junk-header" class="headerlink" title="15. Remove junk header"></a>15. Remove junk header</h2><figure class="highlight plain hljs"><figcaption><span>Remove junk</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#remove_action(&apos;wp_head&apos;, &apos;wp_enqueue_scripts&apos;, 1);</span><br><span class="line">#add_action(&apos;wp_footer&apos;, &apos;wp_enqueue_scripts&apos;, 5);</span><br><span class="line">function ft_rtt_remove_title_attribute( $output ){</span><br><span class="line">  $output = preg_replace(&apos;/title=\&quot;(.*?)\&quot;/&apos;,&apos;&apos;,$output);</span><br><span class="line">  return $output;</span><br><span class="line"> }</span><br><span class="line">add_filter(&apos;wp_list_categories&apos;,&apos;ft_rtt_remove_title_attribute&apos;);</span><br><span class="line">add_filter(&apos;wp_list_pages&apos;,&apos;ft_rtt_remove_title_attribute&apos;);</span><br><span class="line">add_filter(&apos;the_category&apos;, &apos;ft_rtt_remove_title_attribute&apos; );</span><br><span class="line">add_filter(&apos;comment_ID&apos;, &apos;ft_rtt_remove_title_attribute&apos; );</span><br><span class="line"></span><br><span class="line">function wpbeginner_remove_version() {</span><br><span class="line">	return &apos;&apos;;</span><br><span class="line">}</span><br><span class="line">add_filter(&apos;the_generator&apos;, &apos;wpbeginner_remove_version&apos;);</span><br><span class="line">add_filter(&apos;show_admin_bar&apos;, &apos;__return_false&apos;);</span><br><span class="line">remove_action(&apos;wp_head&apos;,&apos;rsd_link&apos;);</span><br><span class="line">remove_action(&apos;wp_head&apos;,&apos;wlwmanifest_link&apos;);</span><br><span class="line">remove_action( &apos;wp_head&apos;, &apos;index_rel_link&apos; );</span><br><span class="line">remove_action( &apos;wp_head&apos;, &apos;parent_post_rel_link&apos;, 10, 0 );</span><br><span class="line">remove_action( &apos;wp_head&apos;, &apos;start_post_rel_link&apos;, 10, 0 );</span><br><span class="line">remove_action( &apos;wp_head&apos;, &apos;adjacent_posts_rel_link_wp_head&apos;, 10, 0 );</span><br><span class="line">remove_action( &apos;wp_head&apos;, &apos;rel_canonical&apos; );</span><br><span class="line">remove_action( &apos;wp_head&apos;, &apos;wp_shortlink_wp_head&apos;, 10, 0 );</span><br><span class="line">remove_action( &apos;wp_head&apos;, &apos;noindex&apos;, 1 );</span><br><span class="line">remove_filter(&apos;comment_text&apos;, &apos;make_clickable&apos;, 9);</span><br><span class="line">#Remove Wordpress Comment Feed Link from header</span><br><span class="line">#Display the links to the extra feeds such as category feeds</span><br><span class="line">remove_action(&apos;wp_head&apos;, &apos;feed_links_extra&apos;, 3);</span><br><span class="line">#Display the links to the general feeds: Post and Comment Feed</span><br><span class="line">remove_action(&apos;wp_head&apos;, &apos;feed_links&apos;, 2);</span><br><span class="line"></span><br><span class="line">$qmr_work_tags = array(</span><br><span class="line">  &apos;the_title&apos;,</span><br><span class="line">  &apos;the_content&apos;,</span><br><span class="line">  &apos;the_excerpt&apos;,</span><br><span class="line">  &apos;comment_text&apos;,</span><br><span class="line">  &apos;list_cats&apos;,</span><br><span class="line">  &apos;single_post_title&apos;,</span><br><span class="line">  &apos;comment_author&apos;,</span><br><span class="line">  &apos;term_name&apos;,</span><br><span class="line">  &apos;link_name&apos;,</span><br><span class="line">  &apos;link_description&apos;,</span><br><span class="line">  &apos;link_notes&apos;,</span><br><span class="line">  &apos;bloginfo&apos;,</span><br><span class="line">  &apos;wp_title&apos;,</span><br><span class="line">  &apos;widget_title&apos;,</span><br><span class="line">  &apos;term_description&apos;,</span><br><span class="line">  &apos;category_description&apos;,</span><br><span class="line">  &apos;widget_text&apos;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">foreach ( $qmr_work_tags as $qmr_work_tag ) {</span><br><span class="line">remove_filter ($qmr_work_tag, &apos;wptexturize&apos;);</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="16-Remove-category-in-url"><a href="#16-Remove-category-in-url" class="headerlink" title="16. Remove category in url"></a>16. Remove category in url</h2><figure class="highlight plain hljs"><figcaption><span>Remove category, together with plugin</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function fix_slash( $string, $type )</span><br><span class="line">{</span><br><span class="line">    global $wp_rewrite;</span><br><span class="line">    if ( $wp_rewrite-&gt;use_trailing_slashes == false )</span><br><span class="line">    {</span><br><span class="line">        if ( $type != &apos;single&apos; &amp;&amp; $type != &apos;category&apos; )</span><br><span class="line">            return trailingslashit( $string );</span><br><span class="line"> </span><br><span class="line">        if ( $type == &apos;single&apos; &amp;&amp; ( strpos( $string, &apos;.html/&apos; ) !== false ) )</span><br><span class="line">            return trailingslashit( $string );</span><br><span class="line"> </span><br><span class="line">        if ( $type == &apos;category&apos; &amp;&amp; ( strpos( $string, &apos;category&apos; ) !== false ) )</span><br><span class="line">        {</span><br><span class="line">            $aa_g = str_replace( &quot;/category/&quot;, &quot;/&quot;, $string );</span><br><span class="line">            return trailingslashit( $aa_g );</span><br><span class="line">        }</span><br><span class="line">        if ( $type == &apos;category&apos; )</span><br><span class="line">            return trailingslashit( $string );</span><br><span class="line">    }</span><br><span class="line">    return $string;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">add_filter( &apos;user_trailingslashit&apos;, &apos;fix_slash&apos;, 55, 2 );</span><br></pre></td></tr></table></figure><h2 id="17-Add-SEO-title-attributes-next-post-link-previous-post-link"><a href="#17-Add-SEO-title-attributes-next-post-link-previous-post-link" class="headerlink" title="17. Add SEO title attributes next post link, previous post link"></a>17. Add SEO title attributes next post link, previous post link</h2><figure class="highlight plain hljs"><figcaption><span>Title attributes to next and previous post link functions</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">add_filter(&apos;next_post_link&apos;,&apos;add_title_to_next_post_link&apos;);</span><br><span class="line">function add_title_to_next_post_link($link) {</span><br><span class="line">  global $post;</span><br><span class="line">  $post = get_post($post_id);</span><br><span class="line">  $next_post = get_next_post();</span><br><span class="line">  $title = $next_post-&gt;post_title;</span><br><span class="line">  $link = str_replace(&quot;rel=&quot;, &quot; title=&apos;&quot;.$title.&quot;&apos; rel=&quot;, $link);</span><br><span class="line">  return $link;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">add_filter(&apos;previous_post_link&apos;,&apos;add_title_to_previous_post_link&apos;);</span><br><span class="line">function add_title_to_previous_post_link($link) {</span><br><span class="line">  global $post;</span><br><span class="line">  $post = get_post($post_id);</span><br><span class="line">  $previous_post = get_previous_post();</span><br><span class="line">  $title = $previous_post-&gt;post_title;</span><br><span class="line">  $link = str_replace(&quot;rel=&quot;, &quot; title=&apos;&quot;.$title.&quot;&apos; rel=&quot;, $link);</span><br><span class="line">  return $link;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="18-Remove-rel-from-category-tag"><a href="#18-Remove-rel-from-category-tag" class="headerlink" title="18. Remove rel from category tag"></a>18. Remove rel from category tag</h2><figure class="highlight plain hljs"><figcaption><span>Remove rel</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function remove_rel($result) {</span><br><span class="line">  $result = str_replace(&apos; rel=&quot;category tag&quot;&apos;, &apos;rel=&quot;tag&quot;&apos;, $result);</span><br><span class="line">  return $result;</span><br><span class="line">}</span><br><span class="line">add_filter(&apos;wp_list_categories&apos;, &apos;remove_rel&apos;);</span><br><span class="line">add_filter(&apos;the_category&apos;, &apos;remove_rel&apos;);</span><br></pre></td></tr></table></figure><h2 id="19-Remove-query-strings-from-static-resources"><a href="#19-Remove-query-strings-from-static-resources" class="headerlink" title="19. Remove query strings from static resources"></a>19. Remove query strings from static resources</h2><figure class="highlight plain hljs"><figcaption><span>query strings from static resources</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function ewp_remove_script_version( $src ){</span><br><span class="line">  return remove_query_arg( &apos;ver&apos;, $src );</span><br><span class="line">}</span><br><span class="line">add_filter( &apos;script_loader_src&apos;, &apos;ewp_remove_script_version&apos;, 15, 1 );</span><br><span class="line">add_filter( &apos;style_loader_src&apos;, &apos;ewp_remove_script_version&apos;, 15, 1 );</span><br><span class="line"></span><br><span class="line">#remove header recent comment style</span><br><span class="line">add_action(&apos;widgets_init&apos;, &apos;my_remove_recent_comments_style&apos;);</span><br><span class="line">function my_remove_recent_comments_style() {</span><br><span class="line">	global $wp_widget_factory;</span><br><span class="line">	remove_action(&apos;wp_head&apos;, array($wp_widget_factory-&gt;widgets[&apos;WP_Widget_Recent_Comments&apos;], &apos;recent_comments_style&apos;));</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="20-Add-alt-tags-to-thumbnail"><a href="#20-Add-alt-tags-to-thumbnail" class="headerlink" title="20. Add alt tags to thumbnail"></a>20. Add alt tags to thumbnail</h2><figure class="highlight plain hljs"><figcaption><span>&apos;add_attachment&apos;, &apos;my_set_image_meta_upon_image_upload&apos; );</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">function my_set_image_meta_upon_image_upload( $post_ID ) {</span><br><span class="line"></span><br><span class="line">	// Check if uploaded file is an image, else do nothing</span><br><span class="line"></span><br><span class="line">	if ( wp_attachment_is_image( $post_ID ) ) {</span><br><span class="line"></span><br><span class="line">		$my_image_title = get_post( $post_ID )-&gt;post_title;</span><br><span class="line"></span><br><span class="line">		// Sanitize the title:  remove hyphens, underscores &amp; extra spaces:</span><br><span class="line">		$my_image_title = preg_replace( &apos;%\s*[-_\s]+\s*%&apos;, &apos; &apos;,  $my_image_title );</span><br><span class="line"></span><br><span class="line">		// Sanitize the title:  capitalize first letter of every word (other letters lower case):</span><br><span class="line">		$my_image_title = ucwords( strtolower( $my_image_title ) );</span><br><span class="line"></span><br><span class="line">		// Create an array with the image meta (Title, Caption, Description) to be updated</span><br><span class="line">		// Note:  comment out the Excerpt/Caption or Content/Description lines if not needed</span><br><span class="line">		$my_image_meta = array(</span><br><span class="line">			&apos;ID&apos;		=&gt; $post_ID,			// Specify the image (ID) to be updated</span><br><span class="line">			&apos;post_title&apos;	=&gt; $my_image_title,		// Set image Title to sanitized title</span><br><span class="line">			//&apos;post_excerpt&apos;	=&gt; $my_image_title,		// Set image Caption (Excerpt) to sanitized title</span><br><span class="line">			&apos;post_content&apos;	=&gt; $my_image_title,		// Set image Description (Content) to sanitized title</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		// Set the image Alt-Text</span><br><span class="line">		update_post_meta( $post_ID, &apos;_wp_attachment_image_alt&apos;, $my_image_title );</span><br><span class="line"></span><br><span class="line">		// Set the image meta (e.g. Title, Excerpt, Content)</span><br><span class="line">		wp_update_post( $my_image_meta );</span><br><span class="line"></span><br><span class="line">	} </span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="21-Add-pre-tag-wrapper-to-code-tag-and-editor-button"><a href="#21-Add-pre-tag-wrapper-to-code-tag-and-editor-button" class="headerlink" title="21. Add pre tag wrapper to code tag, and editor button"></a>21. Add pre tag wrapper to code tag, and editor button</h2><figure class="highlight plain hljs"><figcaption><span>pre tag</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add_action(&apos;admin_print_footer_scripts&apos;,&apos;eg_quicktags&apos;);</span><br><span class="line">function eg_quicktags() {</span><br><span class="line">?&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;</span><br><span class="line">	QTags.addButton( &apos;eg_pre&apos;, &apos;Code with Pre&apos;,&apos;&lt;pre&gt;&lt;code&gt;&apos;, &apos;&lt;/code&gt;&lt;/pre&gt;&apos;, &apos;q&apos; );</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="22-Login-page-tweak"><a href="#22-Login-page-tweak" class="headerlink" title="22. Login page tweak"></a>22. Login page tweak</h2><figure class="highlight plain hljs"><figcaption><span>no_wordpress_errors(){</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">add_filter( &apos;login_errors&apos;, &apos;no_wordpress_errors&apos;);</span><br><span class="line"></span><br><span class="line">function my_login_logo_one() { </span><br><span class="line">?&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt; </span><br><span class="line">	body.login div#login h1 a {display: none; !important;} </span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;?php </span><br><span class="line">}</span><br><span class="line">add_action( &apos;login_enqueue_scripts&apos;, &apos;my_login_logo_one&apos; );</span><br><span class="line">					  </span><br><span class="line">// changing the logo link from wordpress.org to your site</span><br><span class="line">function mb_login_url() {  return home_url(); }</span><br><span class="line">add_filter( &apos;login_headerurl&apos;, &apos;mb_login_url&apos; );</span><br><span class="line"></span><br><span class="line">// changing the alt text on the logo to show your site name</span><br><span class="line">function mb_login_title() { return get_option( &apos;blogname&apos; ); }</span><br><span class="line">add_filter( &apos;login_headertitle&apos;, &apos;mb_login_title&apos; );</span><br></pre></td></tr></table></figure><h2 id="23-Remove-wp-version-param-from-any-enqueued-scripts"><a href="#23-Remove-wp-version-param-from-any-enqueued-scripts" class="headerlink" title="23. Remove wp version param from any enqueued scripts"></a>23. Remove wp version param from any enqueued scripts</h2><figure class="highlight plain hljs"><figcaption><span>remove wp version param from any enqueued scripts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function remove_wp_ver_css_js( $src ) {</span><br><span class="line">  if ( strpos( $src, &apos;ver=&apos; . get_bloginfo( &apos;version&apos; ) ) )</span><br><span class="line">  $src = remove_query_arg( &apos;ver&apos;, $src );</span><br><span class="line">  return $src;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="24-Add-X-UA-Compatible-header"><a href="#24-Add-X-UA-Compatible-header" class="headerlink" title="24. Add X-UA-Compatible header"></a>24. Add X-UA-Compatible header</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function add_http_header($headers) {</span><br><span class="line">$headers[&apos;X-UA-Compatible&apos;] = &apos;IE=edge,chrome=1&apos;;</span><br><span class="line">return $headers;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">add_filter(&apos;wp_headers&apos;, &apos;add_http_header&apos;);</span><br></pre></td></tr></table></figure><h2 id="25-Prevent-WordPress-from-participating-in-Pingback-Denial-of-Service-Attacks"><a href="#25-Prevent-WordPress-from-participating-in-Pingback-Denial-of-Service-Attacks" class="headerlink" title="25. Prevent WordPress from participating in Pingback Denial of Service Attacks"></a>25. Prevent WordPress from participating in Pingback Denial of Service Attacks</h2><figure class="highlight plain hljs"><figcaption><span>Disable xmlrcp/pingback</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">add_filter( &apos;xmlrpc_enabled&apos;, &apos;__return_false&apos; );</span><br><span class="line">add_filter( &apos;pre_update_option_enable_xmlrpc&apos;, &apos;__return_false&apos; );</span><br><span class="line">add_filter( &apos;pre_option_enable_xmlrpc&apos;, &apos;__return_zero&apos; );</span><br><span class="line"></span><br><span class="line">// Disable trackbacks</span><br><span class="line">add_filter( &apos;rewrite_rules_array&apos;, function( $rules ) {</span><br><span class="line">    foreach( $rules as $rule =&gt; $rewrite ) {</span><br><span class="line">        if( preg_match( &apos;/trackback\/\?\$$/i&apos;, $rule ) ) {</span><br><span class="line">            unset( $rules[$rule] );</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return $rules;</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Disable X-Pingback HTTP Header.</span><br><span class="line">add_filter(&apos;wp_headers&apos;, function($headers, $wp_query){</span><br><span class="line">    if(isset($headers[&apos;X-Pingback&apos;])){</span><br><span class="line">        unset($headers[&apos;X-Pingback&apos;]);</span><br><span class="line">    }</span><br><span class="line">    return $headers;</span><br><span class="line">}, 11, 2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add_filter( &apos;xmlrpc_methods&apos;, function($methods){</span><br><span class="line">    unset( $methods[&apos;pingback.ping&apos;] );</span><br><span class="line">    unset( $methods[&apos;pingback.extensions.getPingbacks&apos;] );</span><br><span class="line">    unset( $methods[&apos;wp.getUsersBlogs&apos;] ); // Block brute force discovery of existing users</span><br><span class="line">    unset( $methods[&apos;system.multicall&apos;] );</span><br><span class="line">    unset( $methods[&apos;system.listMethods&apos;] );</span><br><span class="line">    unset( $methods[&apos;system.getCapabilities&apos;] );</span><br><span class="line">    return $methods;</span><br><span class="line">});</span><br></pre></td></tr></table></figure><h2 id="26-Include-thumbnail-post-thumb-in-RSS-feed"><a href="#26-Include-thumbnail-post-thumb-in-RSS-feed" class="headerlink" title="26. Include thumbnail (post-thumb) in RSS feed"></a>26. Include thumbnail (post-thumb) in RSS feed</h2><figure class="highlight plain hljs"><figcaption><span>INCLUDES THE THUMBNAIL IN OUR RSS FEED</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function insertThumbnailRSS($content) {</span><br><span class="line">global $post;</span><br><span class="line">if ( has_post_thumbnail( $post-&gt;ID ) ){</span><br><span class="line">$content = &apos;&lt;p&gt;&apos; . get_the_post_thumbnail( $post-&gt;ID, &apos;post-thumb&apos;, array( &apos;alt&apos; =&gt; get_the_title(), &apos;title&apos; =&gt; get_the_title()) ) . &apos;&lt;/p&gt;&apos; . $content;</span><br><span class="line">}</span><br><span class="line">return $content;</span><br><span class="line">}</span><br><span class="line">add_filter(&apos;the_excerpt_rss&apos;, &apos;insertThumbnailRSS&apos;);</span><br><span class="line">add_filter(&apos;the_content_feed&apos;, &apos;insertThumbnailRSS&apos;);</span><br></pre></td></tr></table></figure><h2 id="27-Prevent-Page-Scroll-When-Clicking-the-More-Link"><a href="#27-Prevent-Page-Scroll-When-Clicking-the-More-Link" class="headerlink" title="27. Prevent Page Scroll When Clicking the More Link"></a>27. Prevent Page Scroll When Clicking the More Link</h2><figure class="highlight plain hljs"><figcaption><span>Page Scroll When Clicking the More Link</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function remove_more_link_scroll( $link ) {</span><br><span class="line">	$link = preg_replace( &apos;|#more-[0-9]+|&apos;, &apos;&apos;, $link );</span><br><span class="line">	return $link;</span><br><span class="line">}</span><br><span class="line">add_filter( &apos;the_content_more_link&apos;, &apos;remove_more_link_scroll&apos; );</span><br></pre></td></tr></table></figure><h2 id="28-Convert-links-and-images-to-being-site-root-relative"><a href="#28-Convert-links-and-images-to-being-site-root-relative" class="headerlink" title="28.  Convert links and images to being site root relative"></a>28. Convert links and images to being site root relative</h2><figure class="highlight plain hljs"><figcaption><span>Image URLs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">add_filter(&apos;image_send_to_editor&apos;,&apos;image_to_relative&apos;,5,8);</span><br><span class="line"></span><br><span class="line">function image_to_relative($html, $id, $caption, $title, $align, $url, $size, $alt)</span><br><span class="line">{</span><br><span class="line">	$sp = strpos($html,&quot;src=&quot;) + 5;</span><br><span class="line">	$ep = strpos($html,&quot;\&quot;&quot;,$sp);</span><br><span class="line">	</span><br><span class="line">	$imageurl = substr($html,$sp,$ep-$sp);</span><br><span class="line">	</span><br><span class="line">	$relativeurl = str_replace([&quot;http://&quot;, &quot;https://&quot;],&quot;&quot;,$imageurl);</span><br><span class="line">	$sp = strpos($relativeurl,&quot;/&quot;);</span><br><span class="line">	$relativeurl = substr($relativeurl,$sp);</span><br><span class="line">	</span><br><span class="line">	$html = str_replace($imageurl,$relativeurl,$html);</span><br><span class="line">	</span><br><span class="line">	return $html;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h2 id="29-Set-custom-cookie"><a href="#29-Set-custom-cookie" class="headerlink" title="29. Set custom cookie"></a>29. Set custom cookie</h2><p>If you have server control, you can use this to stop spam.<br><a href="https://www.qualityology.com/tech/stop-automated-comment-spam-brute-force-login-attack/">Stop Automated Comment Spam with Nginx</a></p><figure class="highlight plain hljs"><figcaption><span>Automated Comment Spam with Nginx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function set_post_cookie() {</span><br><span class="line">    echo &apos;&lt;script&gt;document.cookie = &quot;_pass=1; max-age=1800; path=/; secure&quot;;&lt;/script&gt;&apos; . &quot;&quot;; </span><br><span class="line">}</span><br><span class="line">add_action( &apos;comment_form&apos;, &apos;set_post_cookie&apos;, 100 );</span><br></pre></td></tr></table></figure><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="2953513567" data-ad-format="auto" data-full-width-responsive="true"></ins></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/wordpress/">#WordPress</a></span></div><div class="columns is-mobile is-multiline article-nav"><span class="column is-12-mobile is-half-desktop article-nav-prev"><a href="/tech/connect-to-existing-aws-appsync-api-from-a-react-application/">Connect to existing AWS AppSync API from a React Application</a> </span><span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/tech/easy-dual-wan-load-balancing-with-mikrotik-routeros-pcc/">Easy Dual WAN Load Balancing with MikroTik RouterOS PCC</a></span></div></article><div class="sharebox"><div class="sharethis-inline-share-buttons"></div><script async type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=6030430e289b2f0011212bb6&amp;product=sop"></script></div><div class="comments"><h3 class="title is-4">Comments</h3><div id="isso-thread" data-title="29 Code Snippets for WordPress Users"></div><script async data-isso="//comments.qualityology.com" src="//comments.qualityology.com/js/embed.min.js" data-isso-require-author="true" data-isso-require-email="true" data-isso-avatar="false" data-isso-gravatar="true" data-isso-vote="true" data-isso-reveal-on-click="true"></script></div></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered">&copy; 2021 Qualityology&nbsp;</div><div class="column is-hidden-mobile"></div></div></div></footer><script async src="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>window.FontAwesomeConfig={searchPseudoElements:!0},moment.locale("en-AU")</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><style>.hljs{position:relative}.hljs .clipboard-btn{float:right;color:#9a9a9a;background:0 0;border:none;cursor:pointer}.hljs .clipboard-btn:hover{color:#8a8a8a}.hljs>.clipboard-btn{display:none;position:absolute;right:4px;top:4px}.hljs:hover>.clipboard-btn{display:inline}.hljs>figcaption>.clipboard-btn{margin-right:4px}</style><script>$(document).ready(function(){$("figure.hljs").each(function(t,e){var a="code-"+t,r=e.querySelector(".code"),t=$('<button>Copy <i class="far fa-clipboard"></i></button>');r.id=a,t.addClass("clipboard-btn"),t.attr("data-clipboard-target-id",a);a=e.querySelector("figcaption");a?a.append(t[0]):e.prepend(t[0])}),new ClipboardJS(".clipboard-btn",{target:function(t){return document.getElementById(t.getAttribute("data-clipboard-target-id"))}}).on("success",function(t){t.clearSelection()})})</script><script src="/js/script.js"></script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 3,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>