<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta charset="utf-8"><title>29 Code Snippets for WordPress Users - Qualityology - Let's get the most out of life!</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="preconnect" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="preconnect" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="preconnect" href="//ajax.googleapis.com"><link rel="dns-prefetch" href="//ajax.googleapis.com"><link rel="canonical" href="https://www.qualityology.com/tech/29-code-snippets-for-wordpress-users/"><meta name="description" content="Tired of installing tons of WordPress plugins for small features? You can use code snippets to do certain things without a dedicated plugin. Generally the functions.php file is the place to add code s"><meta property="og:type" content="article"><meta property="og:title" content="29 Code Snippets for WordPress Users"><meta property="og:url" content="https://www.qualityology.com/tech/29-code-snippets-for-wordpress-users/index.html"><meta property="og:site_name" content="Qualityology - Let's get the most out of life!"><meta property="og:description" content="Tired of installing tons of WordPress plugins for small features? You can use code snippets to do certain things without a dedicated plugin. Generally the functions.php file is the place to add code s"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2021-02-23T20:09:23.000Z"><meta property="article:modified_time" content="2021-03-05T05:03:03.133Z"><meta property="article:author" content="Evan Xu"><meta property="article:tag" content="WordPress"><meta name="twitter:card" content="summary"><link rel="icon" type="image/png" href="/assets/logo.png"><link rel="apple-touch-icon" href="/assets/logo_160.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/logo_304.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/logo_360.png"><link rel="apple-touch-icon" sizes="167x167" href="/assets/logo_334.png"><meta name="apple-mobile-web-app-title" content="29 Code Snippets for WordPress Users - Qualityology - Let's get the most out of life!"><script>const pageLoaded=()=>{const o=window.adsbygoogle||[];o.push({}),o.push({})}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-6144848-7"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-6144848-7")</script><meta name="generator" content="Hexo 5.4.0"><script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/style.css');loadCss('//cdnjs.cloudflare.com/ajax/libs/bulma/0.9.2/css/bulma.min.css');loadCss('//fonts.googleapis.com/css?family=Roboto&display=swap');loadCss('//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css');</script><noscript><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.9.2/css/bulma.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto&amp;display=swap"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css"></noscript></head><body onload="pageLoaded()"><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item navbar-logo" href="/"><img src="/assets/loading.gif" data-original="/assets/logo.png" alt="" height="28"></a><div class="navbar-burger"><span></span> <span></span> <span></span></div></div><div class="navbar-menu navbar-start"><span class="navbar-item"><a href="/lifestyle">Lifestyle </a></span><span class="navbar-item is-active"><a href="/tech">Technology</a></span></div><div class="navbar-menu navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc"><a class="navbar-item" title="Table of Contents"><i class="fa fa-list"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="#Auto-update-plug-and-theme">1&nbsp;&nbsp;<b>Auto update plug and theme</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Remove-all-HTML-Comments-and-space">2&nbsp;&nbsp;<b>Remove all HTML Comments and space</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-DNS-Prefetching">3&nbsp;&nbsp;<b>Add DNS Prefetching</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Stop-loading-wp-emoji-release-min-js">4&nbsp;&nbsp;<b>Stop loading wp-emoji-release.min.js</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Prefer-loading-jquery-JavaScript-with-async-and-defer-tag">5&nbsp;&nbsp;<b>Prefer loading jquery JavaScript with async and defer tag</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Load-CDN-jQuery-from-Google">6&nbsp;&nbsp;<b>Load CDN jQuery from Google</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Remove-jQuery-Migrate-script-from-header-New-plugin-will-not-have-incompatibility-issue">7&nbsp;&nbsp;<b>Remove jQuery-Migrate script from header (New plugin will not have incompatibility issue)</b></a><hr class="navbar-divider"><a class="navbar-item" href="#No-self-pings">8&nbsp;&nbsp;<b>No self pings</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-p-tag-to-lt-more-gt">9&nbsp;&nbsp;<b>Add p tag to &amp;amp;lt;!--more--&amp;amp;gt;</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Inject-google-ads-after-n-link">10&nbsp;&nbsp;<b>Inject google ads after n link</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Delay-auto-closing-p-tag-to-fix-some-problems">11&nbsp;&nbsp;<b>Delay auto closing p tag to fix some problems.</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Show-Media-upload-path">12&nbsp;&nbsp;<b>Show Media upload path</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Image-SEO-with-size-and-height-info">13&nbsp;&nbsp;<b>Image SEO, with size and height info</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-Nofollow-to-comments-link">14&nbsp;&nbsp;<b>Add Nofollow to comments link</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Remove-junk-header">15&nbsp;&nbsp;<b>Remove junk header</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Remove-category-in-url">16&nbsp;&nbsp;<b>Remove category in url</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-SEO-title-attributes-next-post-link-previous-post-link">17&nbsp;&nbsp;<b>Add SEO title attributes next post link, previous post link</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Remove-rel-from-category-tag">18&nbsp;&nbsp;<b>Remove rel from category tag</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Remove-query-strings-from-static-resources">19&nbsp;&nbsp;<b>Remove query strings from static resources</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-alt-tags-to-thumbnail">20&nbsp;&nbsp;<b>Add alt tags to thumbnail</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-pre-tag-wrapper-to-code-tag-and-editor-button">21&nbsp;&nbsp;<b>Add pre tag wrapper to code tag, and editor button</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Login-page-tweak">22&nbsp;&nbsp;<b>Login page tweak</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Remove-wp-version-param-from-any-enqueued-scripts">23&nbsp;&nbsp;<b>Remove wp version param from any enqueued scripts</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-X-UA-Compatible-header">24&nbsp;&nbsp;<b>Add X-UA-Compatible header</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Prevent-WordPress-from-participating-in-Pingback-Denial-of-Service-Attacks">25&nbsp;&nbsp;<b>Prevent WordPress from participating in Pingback Denial of Service Attacks</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Include-thumbnail-post-thumb-in-RSS-feed">26&nbsp;&nbsp;<b>Include thumbnail (post-thumb) in RSS feed</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Prevent-Page-Scroll-When-Clicking-the-More-Link">27&nbsp;&nbsp;<b>Prevent Page Scroll When Clicking the More Link</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Convert-links-and-images-to-being-site-root-relative">28&nbsp;&nbsp;<b>Convert links and images to being site root relative</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Set-custom-cookie">29&nbsp;&nbsp;<b>Set custom cookie</b></a></div></div></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope="" itemprop="blogPost"><h1 class="article-title is-size-4 is-size-4-mobile" itemprop="name">29 Code Snippets for WordPress Users</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2021-02-23T20:09:23.000Z" itemprop="datePublished">Feb 23 2021</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/tech/">tech</a> </span><span class="column is-narrow">14 minutes read (About 2083 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><p>Tired of installing tons of WordPress plugins for small features? You can use code snippets to do certain things without a dedicated plugin. Generally the <code>functions.php</code> file is the place to add code snippes.</p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="9746105168" data-ad-format="auto" data-full-width-responsive="true"></ins><p>If you don’t want to edit PHP file and want to gain more fine control over code snippets? You should try out <strong>Code Snippets</strong> plugin. With <strong>Code Snippets</strong>, you can easily add PHP code snippets to your WordPress site without custom snippets in theme’s <code>functions.php</code> file. Search <code>Code Snippets</code> in WordPress’s Add Plugins page and install it. You can start adding code snippet just like how you write post.</p><p>We collected some very useful code snippets for WordPress. All can be used with Code Snippets plugin or added it directly to PHP file.</p><ol><li><h2 id="Auto-update-plug-and-theme"><a href="#Auto-update-plug-and-theme" class="headerlink" title="Auto update plug and theme"></a>Auto update plug and theme</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add_filter( 'auto_update_plugin', '__return_true' );</span><br><span class="line">add_filter( 'auto_update_theme', '__return_true' );</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li><h2 id="Remove-all-HTML-Comments-and-space"><a href="#Remove-all-HTML-Comments-and-space" class="headerlink" title="Remove all HTML Comments and space"></a>Remove all HTML Comments and space</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">function callback($buffer) {</span><br><span class="line">  $search = array(</span><br><span class="line">	'/\n/',</span><br><span class="line">        '/\&gt;[^\S ]+/s',  // strip whitespaces after tags, except space</span><br><span class="line">        '/[^\S ]+\&lt;/s',  // strip whitespaces before tags, except space</span><br><span class="line">        '/(\s)+/s',       // shorten multiple whitespace sequences</span><br><span class="line">	'/&lt;!--(.|s)*?--&gt;/'</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    $replace = array(</span><br><span class="line">	  '',</span><br><span class="line">        '&gt;',</span><br><span class="line">        '&lt;',</span><br><span class="line">        '\\1',</span><br><span class="line">	 ''</span><br><span class="line">    );</span><br><span class="line">  </span><br><span class="line">    #$buffer = preg_replace('/&lt;!--(.|s)*?--&gt;/', '', $buffer);</span><br><span class="line">  	$buffer = preg_replace($search, $replace, $buffer);</span><br><span class="line">    return $buffer;</span><br><span class="line">}</span><br><span class="line">function buffer_start() {</span><br><span class="line">    ob_start("callback");</span><br><span class="line">}</span><br><span class="line">function buffer_end() {</span><br><span class="line">    ob_end_flush();</span><br><span class="line">}</span><br><span class="line">add_action('get_header', 'buffer_start');</span><br><span class="line">add_action('wp_footer', 'buffer_end', 9999);</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li><h2 id="Add-DNS-Prefetching"><a href="#Add-DNS-Prefetching" class="headerlink" title="Add DNS Prefetching"></a>Add DNS Prefetching</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//* Adding DNS Prefetching</span><br><span class="line">function stb_dns_prefetch() {</span><br><span class="line">echo '&lt;meta http-equiv="x-dns-prefetch-control" content="on"&gt;</span><br><span class="line">&lt;link rel="dns-prefetch" href="//pagead2.googlesyndication.com" /&gt;</span><br><span class="line">&lt;link rel="dns-prefetch" href="//googleads.g.doubleclick.net" /&gt;</span><br><span class="line">&lt;link rel="dns-prefetch" href="//www.google-analytics.com" /&gt;</span><br><span class="line">&lt;link rel="dns-prefetch" href="//s.gravatar.com/" /&gt;';</span><br><span class="line">}</span><br><span class="line">add_action('wp_head', 'stb_dns_prefetch', 1);</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li><h2 id="Stop-loading-wp-emoji-release-min-js"><a href="#Stop-loading-wp-emoji-release-min-js" class="headerlink" title="Stop loading wp-emoji-release.min.js"></a>Stop loading wp-emoji-release.min.js</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remove_action('wp_head', 'print_emoji_detection_script', 7);</span><br><span class="line">remove_action('wp_print_styles', 'print_emoji_styles');</span><br></pre></td></tr></tbody></table></figure><ol start="5"><li><h2 id="Prefer-loading-jquery-JavaScript-with-async-and-defer-tag"><a href="#Prefer-loading-jquery-JavaScript-with-async-and-defer-tag" class="headerlink" title="Prefer loading jquery JavaScript with async and defer tag"></a>Prefer loading jquery JavaScript with async and defer tag</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (!is_admin()) {</span><br><span class="line">    add_filter( 'script_loader_tag', function ( $tag, $handle ) {    </span><br><span class="line">        if ( strpos( $tag, "jquery.min.js" ) || strpos( $tag, "jquery.js") ) {</span><br><span class="line">            return $tag;</span><br><span class="line">        }</span><br><span class="line">        return str_replace( ' src', ' async src', $tag );</span><br><span class="line">    }, 10, 2 );</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="6"><li><h2 id="Load-CDN-jQuery-from-Google"><a href="#Load-CDN-jQuery-from-Google" class="headerlink" title="Load CDN jQuery from Google"></a>Load CDN jQuery from Google</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Load CDN jQuery </span><br><span class="line">add_action( 'wp_enqueue_scripts', 'register_jquery' );</span><br><span class="line">function register_jquery() {</span><br><span class="line">    if (!is_admin() &amp;&amp; $GLOBALS['pagenow'] != 'wp-login.php') {</span><br><span class="line">        // comment out the next two lines to load the local copy of jQuery</span><br><span class="line">        wp_deregister_script('jquery');</span><br><span class="line">        wp_register_script('jquery', 'https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js', false, '3.2.1');</span><br><span class="line">        wp_enqueue_script('jquery');</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">// end</span><br></pre></td></tr></tbody></table></figure><ol start="7"><li><h2 id="Remove-jQuery-Migrate-script-from-header-New-plugin-will-not-have-incompatibility-issue"><a href="#Remove-jQuery-Migrate-script-from-header-New-plugin-will-not-have-incompatibility-issue" class="headerlink" title="Remove jQuery-Migrate script from header (New plugin will not have incompatibility issue)"></a>Remove jQuery-Migrate script from header (New plugin will not have incompatibility issue)</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Remove migrate script</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add_filter( 'wp_default_scripts', 'remove_jquery_migrate' );</span><br><span class="line">function remove_jquery_migrate( &amp;$scripts)</span><br><span class="line">  {</span><br><span class="line">  	if(!is_admin())  {</span><br><span class="line">      $scripts-&gt;remove( 'jquery');</span><br><span class="line">      $scripts-&gt;add( 'jquery', false, array( 'jquery-core' ), '1.10.2' );</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="8"><li><h2 id="No-self-pings"><a href="#No-self-pings" class="headerlink" title="No self pings"></a>No self pings</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// No Self Pings</span><br><span class="line">function no_self_ping( &amp;$links ) {</span><br><span class="line">  $home = get_option( 'home' );</span><br><span class="line">  foreach ( $links as $l =&gt; $link )</span><br><span class="line">  if ( 0 === strpos( $link, $home ) )</span><br><span class="line">  unset($links[$l]);</span><br><span class="line">}</span><br><span class="line">add_action( 'pre_ping', 'no_self_ping' );</span><br></pre></td></tr></tbody></table></figure><ol start="9"><li><h2 id="Add-p-tag-to-lt-more-gt"><a href="#Add-p-tag-to-lt-more-gt" class="headerlink" title="Add p tag to <!--more-->"></a>Add p tag to <code>&lt;!--more--&gt;</code></h2></li></ol><figure class="highlight plain hljs"><figcaption><span>tag detection</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function has_more()</span><br><span class="line">{</span><br><span class="line"> global $post;</span><br><span class="line"> if ( empty( $post ) ) return;</span><br><span class="line"></span><br><span class="line">    if ($pos=strpos($post-&gt;post_content, '&lt;!--more--&gt;')) {</span><br><span class="line">        return true;</span><br><span class="line">    } else {</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">//add p tag to more tag</span><br><span class="line">function add_p_tag($link){</span><br><span class="line">return "&lt;p&gt;$link&lt;/p&gt;";</span><br><span class="line">}</span><br><span class="line">add_filter('the_content_more_link', 'add_p_tag'); </span><br></pre></td></tr></tbody></table></figure><ol start="10"><li><h2 id="Inject-google-ads-after-n-link"><a href="#Inject-google-ads-after-n-link" class="headerlink" title="Inject google ads after n link"></a>Inject google ads after n link</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">function inject_ad_text_after_n_chars($content) {</span><br><span class="line">  // insert after the first &lt;/a&gt; after x characters</span><br><span class="line">  $after_character = 1;</span><br><span class="line">  if (is_single()) {</span><br><span class="line">    $before_content = substr($content, 0,  $after_character);</span><br><span class="line">    $after_content = substr($content, $after_character);</span><br><span class="line">    $after_content = explode('&lt;/p&gt;', $after_content);</span><br><span class="line">    $text = '&lt;ins class="adsbygoogle"</span><br><span class="line">     style="display:block"</span><br><span class="line">     data-ad-client="your id"</span><br><span class="line">     data-ad-slot="your ad slot"</span><br><span class="line">     data-ad-format="auto"&gt;&lt;/ins&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">(adsbygoogle = window.adsbygoogle || []).push({});</span><br><span class="line">&lt;/script&gt;&lt;/p&gt;';</span><br><span class="line">    array_splice($after_content, 1, 0, $text);</span><br><span class="line">    $after_content = implode('', $after_content);</span><br><span class="line">    return $before_content . $after_content;</span><br><span class="line">  }</span><br><span class="line">  else {</span><br><span class="line">    return $content;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">add_filter('the_content', 'inject_ad_text_after_n_chars', 13);</span><br></pre></td></tr></tbody></table></figure><ol start="11"><li><h2 id="Delay-auto-closing-p-tag-to-fix-some-problems"><a href="#Delay-auto-closing-p-tag-to-fix-some-problems" class="headerlink" title="Delay auto closing p tag to fix some problems."></a>Delay auto closing p tag to fix some problems.</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>auto closing p tag to fix some problems.</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remove_filter( 'the_content', 'wpautop' );</span><br><span class="line">add_filter( 'the_content', 'wpautop' , 12);</span><br></pre></td></tr></tbody></table></figure><ol start="12"><li><h2 id="Show-Media-upload-path"><a href="#Show-Media-upload-path" class="headerlink" title="Show Media upload path"></a>Show Media upload path</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Media upload</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(get_option('upload_path')=='wp-content/uploads' || get_option('upload_path')==null) {</span><br><span class="line">	update_option('upload_path',WP_CONTENT_DIR.'uploads');</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="13"><li><h2 id="Image-SEO-with-size-and-height-info"><a href="#Image-SEO-with-size-and-height-info" class="headerlink" title="Image SEO, with size and height info"></a>Image SEO, with size and height info</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>get_post_image ($post_id</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// select the post content from the db</span><br><span class="line">$image_id = get_post_thumbnail_id();</span><br><span class="line">$image_url = wp_get_attachment_image_src($image_id,'large');</span><br><span class="line">$the_image_src = $image_url[0];</span><br><span class="line"></span><br><span class="line">		  // if src found, then create a new img tag</span><br><span class="line"></span><br><span class="line">		  if(strlen($the_image_src)) {</span><br><span class="line">			   if(strlen($img_script)) {</span><br><span class="line"></span><br><span class="line">				    // if the src starts with http/https, then strip out server name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				    if(preg_match("/^(http(|s):\/\/)/", $the_image_src)) {</span><br><span class="line">					     $the_image_src = preg_replace("/^(http(|s):\/\/)/", '', $the_image_src);</span><br><span class="line">					     $frags = split("\/", $the_image_src);</span><br><span class="line">					     array_shift($frags);</span><br><span class="line">					     $the_image_src = '/' . join("/", $frags);</span><br><span class="line">				    }</span><br><span class="line">				    $the_image = '&lt;img class="' . $class . '" alt="' . $alt . '" src="' . $img_script . $the_image_src . '" width="' . $width . '" height="' . $height . '"/&gt;';</span><br><span class="line">			   }</span><br><span class="line">			   else {</span><br><span class="line">				    $the_image = '&lt;img class="' . $class . '" alt="' . $alt . '" src="' . $the_image_src . '" width="' . $width . '" height="' . $height . '" width="' . $width . '" height="' . $height . '"/&gt;';</span><br><span class="line">			   }</span><br><span class="line">		  }</span><br><span class="line">       </span><br><span class="line">       // if there's no image</span><br><span class="line">       else</span><br><span class="line">         return false;</span><br><span class="line">         </span><br><span class="line">		  return $the_image;</span><br><span class="line">	 }</span><br></pre></td></tr></tbody></table></figure><ol start="14"><li><h2 id="Add-Nofollow-to-comments-link"><a href="#Add-Nofollow-to-comments-link" class="headerlink" title="Add Nofollow to comments link"></a>Add Nofollow to comments link</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Nofollow comments line</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#function add_nofollow_to_comments_popup_link(){</span><br><span class="line">#    return ' rel="nofollow" ';}</span><br><span class="line">#add_filter( 'comments_popup_link_attributes', 'add_nofollow_to_comments_popup_link' );</span><br><span class="line"></span><br><span class="line">add_filter( 'get_comment_author_link', 'rv_remove_comment_author_link', 10, 3 );</span><br><span class="line">function rv_remove_comment_author_link( $return, $author, $comment_ID ) {</span><br><span class="line">	return $author;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="15"><li><h2 id="Remove-junk-header"><a href="#Remove-junk-header" class="headerlink" title="Remove junk header"></a>Remove junk header</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Remove junk</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#remove_action('wp_head', 'wp_enqueue_scripts', 1);</span><br><span class="line">#add_action('wp_footer', 'wp_enqueue_scripts', 5);</span><br><span class="line">function ft_rtt_remove_title_attribute( $output ){</span><br><span class="line">  $output = preg_replace('/title=\"(.*?)\"/','',$output);</span><br><span class="line">  return $output;</span><br><span class="line"> }</span><br><span class="line">add_filter('wp_list_categories','ft_rtt_remove_title_attribute');</span><br><span class="line">add_filter('wp_list_pages','ft_rtt_remove_title_attribute');</span><br><span class="line">add_filter('the_category', 'ft_rtt_remove_title_attribute' );</span><br><span class="line">add_filter('comment_ID', 'ft_rtt_remove_title_attribute' );</span><br><span class="line"></span><br><span class="line">function wpbeginner_remove_version() {</span><br><span class="line">	return '';</span><br><span class="line">}</span><br><span class="line">add_filter('the_generator', 'wpbeginner_remove_version');</span><br><span class="line">add_filter('show_admin_bar', '__return_false');</span><br><span class="line">remove_action('wp_head','rsd_link');</span><br><span class="line">remove_action('wp_head','wlwmanifest_link');</span><br><span class="line">remove_action( 'wp_head', 'index_rel_link' );</span><br><span class="line">remove_action( 'wp_head', 'parent_post_rel_link', 10, 0 );</span><br><span class="line">remove_action( 'wp_head', 'start_post_rel_link', 10, 0 );</span><br><span class="line">remove_action( 'wp_head', 'adjacent_posts_rel_link_wp_head', 10, 0 );</span><br><span class="line">remove_action( 'wp_head', 'rel_canonical' );</span><br><span class="line">remove_action( 'wp_head', 'wp_shortlink_wp_head', 10, 0 );</span><br><span class="line">remove_action( 'wp_head', 'noindex', 1 );</span><br><span class="line">remove_filter('comment_text', 'make_clickable', 9);</span><br><span class="line">#Remove Wordpress Comment Feed Link from header</span><br><span class="line">#Display the links to the extra feeds such as category feeds</span><br><span class="line">remove_action('wp_head', 'feed_links_extra', 3);</span><br><span class="line">#Display the links to the general feeds: Post and Comment Feed</span><br><span class="line">remove_action('wp_head', 'feed_links', 2);</span><br><span class="line"></span><br><span class="line">$qmr_work_tags = array(</span><br><span class="line">  'the_title',</span><br><span class="line">  'the_content',</span><br><span class="line">  'the_excerpt',</span><br><span class="line">  'comment_text',</span><br><span class="line">  'list_cats',</span><br><span class="line">  'single_post_title',</span><br><span class="line">  'comment_author',</span><br><span class="line">  'term_name',</span><br><span class="line">  'link_name',</span><br><span class="line">  'link_description',</span><br><span class="line">  'link_notes',</span><br><span class="line">  'bloginfo',</span><br><span class="line">  'wp_title',</span><br><span class="line">  'widget_title',</span><br><span class="line">  'term_description',</span><br><span class="line">  'category_description',</span><br><span class="line">  'widget_text'</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">foreach ( $qmr_work_tags as $qmr_work_tag ) {</span><br><span class="line">remove_filter ($qmr_work_tag, 'wptexturize');</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="16"><li><h2 id="Remove-category-in-url"><a href="#Remove-category-in-url" class="headerlink" title="Remove category in url"></a>Remove category in url</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Remove category, together with plugin</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function fix_slash( $string, $type )</span><br><span class="line">{</span><br><span class="line">    global $wp_rewrite;</span><br><span class="line">    if ( $wp_rewrite-&gt;use_trailing_slashes == false )</span><br><span class="line">    {</span><br><span class="line">        if ( $type != 'single' &amp;&amp; $type != 'category' )</span><br><span class="line">            return trailingslashit( $string );</span><br><span class="line"> </span><br><span class="line">        if ( $type == 'single' &amp;&amp; ( strpos( $string, '.html/' ) !== false ) )</span><br><span class="line">            return trailingslashit( $string );</span><br><span class="line"> </span><br><span class="line">        if ( $type == 'category' &amp;&amp; ( strpos( $string, 'category' ) !== false ) )</span><br><span class="line">        {</span><br><span class="line">            $aa_g = str_replace( "/category/", "/", $string );</span><br><span class="line">            return trailingslashit( $aa_g );</span><br><span class="line">        }</span><br><span class="line">        if ( $type == 'category' )</span><br><span class="line">            return trailingslashit( $string );</span><br><span class="line">    }</span><br><span class="line">    return $string;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">add_filter( 'user_trailingslashit', 'fix_slash', 55, 2 );</span><br></pre></td></tr></tbody></table></figure><ol start="17"><li><h2 id="Add-SEO-title-attributes-next-post-link-previous-post-link"><a href="#Add-SEO-title-attributes-next-post-link-previous-post-link" class="headerlink" title="Add SEO title attributes next post link, previous post link"></a>Add SEO title attributes next post link, previous post link</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Title attributes to next and previous post link functions</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">add_filter('next_post_link','add_title_to_next_post_link');</span><br><span class="line">function add_title_to_next_post_link($link) {</span><br><span class="line">  global $post;</span><br><span class="line">  $post = get_post($post_id);</span><br><span class="line">  $next_post = get_next_post();</span><br><span class="line">  $title = $next_post-&gt;post_title;</span><br><span class="line">  $link = str_replace("rel=", " title='".$title."' rel=", $link);</span><br><span class="line">  return $link;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">add_filter('previous_post_link','add_title_to_previous_post_link');</span><br><span class="line">function add_title_to_previous_post_link($link) {</span><br><span class="line">  global $post;</span><br><span class="line">  $post = get_post($post_id);</span><br><span class="line">  $previous_post = get_previous_post();</span><br><span class="line">  $title = $previous_post-&gt;post_title;</span><br><span class="line">  $link = str_replace("rel=", " title='".$title."' rel=", $link);</span><br><span class="line">  return $link;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="18"><li><h2 id="Remove-rel-from-category-tag"><a href="#Remove-rel-from-category-tag" class="headerlink" title="Remove rel from category tag"></a>Remove rel from category tag</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Remove rel</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function remove_rel($result) {</span><br><span class="line">  $result = str_replace(' rel="category tag"', 'rel="tag"', $result);</span><br><span class="line">  return $result;</span><br><span class="line">}</span><br><span class="line">add_filter('wp_list_categories', 'remove_rel');</span><br><span class="line">add_filter('the_category', 'remove_rel');</span><br></pre></td></tr></tbody></table></figure><ol start="19"><li><h2 id="Remove-query-strings-from-static-resources"><a href="#Remove-query-strings-from-static-resources" class="headerlink" title="Remove query strings from static resources"></a>Remove query strings from static resources</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>query strings from static resources</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function ewp_remove_script_version( $src ){</span><br><span class="line">  return remove_query_arg( 'ver', $src );</span><br><span class="line">}</span><br><span class="line">add_filter( 'script_loader_src', 'ewp_remove_script_version', 15, 1 );</span><br><span class="line">add_filter( 'style_loader_src', 'ewp_remove_script_version', 15, 1 );</span><br><span class="line"></span><br><span class="line">#remove header recent comment style</span><br><span class="line">add_action('widgets_init', 'my_remove_recent_comments_style');</span><br><span class="line">function my_remove_recent_comments_style() {</span><br><span class="line">	global $wp_widget_factory;</span><br><span class="line">	remove_action('wp_head', array($wp_widget_factory-&gt;widgets['WP_Widget_Recent_Comments'], 'recent_comments_style'));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="20"><li><h2 id="Add-alt-tags-to-thumbnail"><a href="#Add-alt-tags-to-thumbnail" class="headerlink" title="Add alt tags to thumbnail"></a>Add alt tags to thumbnail</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>'add_attachment', 'my_set_image_meta_upon_image_upload' );</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">function my_set_image_meta_upon_image_upload( $post_ID ) {</span><br><span class="line"></span><br><span class="line">	// Check if uploaded file is an image, else do nothing</span><br><span class="line"></span><br><span class="line">	if ( wp_attachment_is_image( $post_ID ) ) {</span><br><span class="line"></span><br><span class="line">		$my_image_title = get_post( $post_ID )-&gt;post_title;</span><br><span class="line"></span><br><span class="line">		// Sanitize the title:  remove hyphens, underscores &amp; extra spaces:</span><br><span class="line">		$my_image_title = preg_replace( '%\s*[-_\s]+\s*%', ' ',  $my_image_title );</span><br><span class="line"></span><br><span class="line">		// Sanitize the title:  capitalize first letter of every word (other letters lower case):</span><br><span class="line">		$my_image_title = ucwords( strtolower( $my_image_title ) );</span><br><span class="line"></span><br><span class="line">		// Create an array with the image meta (Title, Caption, Description) to be updated</span><br><span class="line">		// Note:  comment out the Excerpt/Caption or Content/Description lines if not needed</span><br><span class="line">		$my_image_meta = array(</span><br><span class="line">			'ID'		=&gt; $post_ID,			// Specify the image (ID) to be updated</span><br><span class="line">			'post_title'	=&gt; $my_image_title,		// Set image Title to sanitized title</span><br><span class="line">			//'post_excerpt'	=&gt; $my_image_title,		// Set image Caption (Excerpt) to sanitized title</span><br><span class="line">			'post_content'	=&gt; $my_image_title,		// Set image Description (Content) to sanitized title</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">		// Set the image Alt-Text</span><br><span class="line">		update_post_meta( $post_ID, '_wp_attachment_image_alt', $my_image_title );</span><br><span class="line"></span><br><span class="line">		// Set the image meta (e.g. Title, Excerpt, Content)</span><br><span class="line">		wp_update_post( $my_image_meta );</span><br><span class="line"></span><br><span class="line">	} </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="21"><li><h2 id="Add-pre-tag-wrapper-to-code-tag-and-editor-button"><a href="#Add-pre-tag-wrapper-to-code-tag-and-editor-button" class="headerlink" title="Add pre tag wrapper to code tag, and editor button"></a>Add pre tag wrapper to code tag, and editor button</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>pre tag</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add_action('admin_print_footer_scripts','eg_quicktags');</span><br><span class="line">function eg_quicktags() {</span><br><span class="line">?&gt;</span><br><span class="line">&lt;script type="text/javascript" charset="utf-8"&gt;</span><br><span class="line">	QTags.addButton( 'eg_pre', 'Code with Pre','&lt;pre&gt;&lt;code&gt;', '&lt;/code&gt;&lt;/pre&gt;', 'q' );</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="22"><li><h2 id="Login-page-tweak"><a href="#Login-page-tweak" class="headerlink" title="Login page tweak"></a>Login page tweak</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>no_wordpress_errors(){</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">add_filter( 'login_errors', 'no_wordpress_errors');</span><br><span class="line"></span><br><span class="line">function my_login_logo_one() { </span><br><span class="line">?&gt;</span><br><span class="line">&lt;style type="text/css"&gt; </span><br><span class="line">	body.login div#login h1 a {display: none; !important;} </span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;?php </span><br><span class="line">}</span><br><span class="line">add_action( 'login_enqueue_scripts', 'my_login_logo_one' );</span><br><span class="line">					  </span><br><span class="line">// changing the logo link from wordpress.org to your site</span><br><span class="line">function mb_login_url() {  return home_url(); }</span><br><span class="line">add_filter( 'login_headerurl', 'mb_login_url' );</span><br><span class="line"></span><br><span class="line">// changing the alt text on the logo to show your site name</span><br><span class="line">function mb_login_title() { return get_option( 'blogname' ); }</span><br><span class="line">add_filter( 'login_headertitle', 'mb_login_title' );</span><br></pre></td></tr></tbody></table></figure><ol start="23"><li><h2 id="Remove-wp-version-param-from-any-enqueued-scripts"><a href="#Remove-wp-version-param-from-any-enqueued-scripts" class="headerlink" title="Remove wp version param from any enqueued scripts"></a>Remove wp version param from any enqueued scripts</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>remove wp version param from any enqueued scripts</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function remove_wp_ver_css_js( $src ) {</span><br><span class="line">  if ( strpos( $src, 'ver=' . get_bloginfo( 'version' ) ) )</span><br><span class="line">  $src = remove_query_arg( 'ver', $src );</span><br><span class="line">  return $src;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="24"><li><h2 id="Add-X-UA-Compatible-header"><a href="#Add-X-UA-Compatible-header" class="headerlink" title="Add X-UA-Compatible header"></a>Add X-UA-Compatible header</h2></li></ol><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function add_http_header($headers) {</span><br><span class="line">$headers['X-UA-Compatible'] = 'IE=edge,chrome=1';</span><br><span class="line">return $headers;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">add_filter('wp_headers', 'add_http_header');</span><br></pre></td></tr></tbody></table></figure><ol start="25"><li><h2 id="Prevent-WordPress-from-participating-in-Pingback-Denial-of-Service-Attacks"><a href="#Prevent-WordPress-from-participating-in-Pingback-Denial-of-Service-Attacks" class="headerlink" title="Prevent WordPress from participating in Pingback Denial of Service Attacks"></a>Prevent WordPress from participating in Pingback Denial of Service Attacks</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Disable xmlrcp/pingback</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">add_filter( 'xmlrpc_enabled', '__return_false' );</span><br><span class="line">add_filter( 'pre_update_option_enable_xmlrpc', '__return_false' );</span><br><span class="line">add_filter( 'pre_option_enable_xmlrpc', '__return_zero' );</span><br><span class="line"></span><br><span class="line">// Disable trackbacks</span><br><span class="line">add_filter( 'rewrite_rules_array', function( $rules ) {</span><br><span class="line">    foreach( $rules as $rule =&gt; $rewrite ) {</span><br><span class="line">        if( preg_match( '/trackback\/\?\$$/i', $rule ) ) {</span><br><span class="line">            unset( $rules[$rule] );</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return $rules;</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Disable X-Pingback HTTP Header.</span><br><span class="line">add_filter('wp_headers', function($headers, $wp_query){</span><br><span class="line">    if(isset($headers['X-Pingback'])){</span><br><span class="line">        unset($headers['X-Pingback']);</span><br><span class="line">    }</span><br><span class="line">    return $headers;</span><br><span class="line">}, 11, 2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add_filter( 'xmlrpc_methods', function($methods){</span><br><span class="line">    unset( $methods['pingback.ping'] );</span><br><span class="line">    unset( $methods['pingback.extensions.getPingbacks'] );</span><br><span class="line">    unset( $methods['wp.getUsersBlogs'] ); // Block brute force discovery of existing users</span><br><span class="line">    unset( $methods['system.multicall'] );</span><br><span class="line">    unset( $methods['system.listMethods'] );</span><br><span class="line">    unset( $methods['system.getCapabilities'] );</span><br><span class="line">    return $methods;</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><ol start="26"><li><h2 id="Include-thumbnail-post-thumb-in-RSS-feed"><a href="#Include-thumbnail-post-thumb-in-RSS-feed" class="headerlink" title="Include thumbnail (post-thumb) in RSS feed"></a>Include thumbnail (post-thumb) in RSS feed</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>INCLUDES THE THUMBNAIL IN OUR RSS FEED</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function insertThumbnailRSS($content) {</span><br><span class="line">global $post;</span><br><span class="line">if ( has_post_thumbnail( $post-&gt;ID ) ){</span><br><span class="line">$content = '&lt;p&gt;' . get_the_post_thumbnail( $post-&gt;ID, 'post-thumb', array( 'alt' =&gt; get_the_title(), 'title' =&gt; get_the_title()) ) . '&lt;/p&gt;' . $content;</span><br><span class="line">}</span><br><span class="line">return $content;</span><br><span class="line">}</span><br><span class="line">add_filter('the_excerpt_rss', 'insertThumbnailRSS');</span><br><span class="line">add_filter('the_content_feed', 'insertThumbnailRSS');</span><br></pre></td></tr></tbody></table></figure><ol start="27"><li><h2 id="Prevent-Page-Scroll-When-Clicking-the-More-Link"><a href="#Prevent-Page-Scroll-When-Clicking-the-More-Link" class="headerlink" title="Prevent Page Scroll When Clicking the More Link"></a>Prevent Page Scroll When Clicking the More Link</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Page Scroll When Clicking the More Link</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function remove_more_link_scroll( $link ) {</span><br><span class="line">	$link = preg_replace( '|#more-[0-9]+|', '', $link );</span><br><span class="line">	return $link;</span><br><span class="line">}</span><br><span class="line">add_filter( 'the_content_more_link', 'remove_more_link_scroll' );</span><br></pre></td></tr></tbody></table></figure><ol start="28"><li><h2 id="Convert-links-and-images-to-being-site-root-relative"><a href="#Convert-links-and-images-to-being-site-root-relative" class="headerlink" title="Convert links and images to being site root relative"></a>Convert links and images to being site root relative</h2></li></ol><figure class="highlight plain hljs"><figcaption><span>Image URLs</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">add_filter('image_send_to_editor','image_to_relative',5,8);</span><br><span class="line"></span><br><span class="line">function image_to_relative($html, $id, $caption, $title, $align, $url, $size, $alt)</span><br><span class="line">{</span><br><span class="line">	$sp = strpos($html,"src=") + 5;</span><br><span class="line">	$ep = strpos($html,"\"",$sp);</span><br><span class="line">	</span><br><span class="line">	$imageurl = substr($html,$sp,$ep-$sp);</span><br><span class="line">	</span><br><span class="line">	$relativeurl = str_replace(["http://", "https://"],"",$imageurl);</span><br><span class="line">	$sp = strpos($relativeurl,"/");</span><br><span class="line">	$relativeurl = substr($relativeurl,$sp);</span><br><span class="line">	</span><br><span class="line">	$html = str_replace($imageurl,$relativeurl,$html);</span><br><span class="line">	</span><br><span class="line">	return $html;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="29"><li><h2 id="Set-custom-cookie"><a href="#Set-custom-cookie" class="headerlink" title="Set custom cookie"></a>Set custom cookie</h2></li></ol><p>If you have server control, you can use this to stop spam.<br><a href="https://www.qualityology.com/tech/stop-automated-comment-spam-brute-force-login-attack/">Stop Automated Comment Spam with Nginx</a></p><figure class="highlight plain hljs"><figcaption><span>Automated Comment Spam with Nginx</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function set_post_cookie() {</span><br><span class="line">    echo '&lt;script&gt;document.cookie = "_pass=1; max-age=1800; path=/; secure";&lt;/script&gt;' . ""; </span><br><span class="line">}</span><br><span class="line">add_action( 'comment_form', 'set_post_cookie', 100 );</span><br></pre></td></tr></tbody></table></figure><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="2953513567" data-ad-format="auto" data-full-width-responsive="true"></ins></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tag/wordpress/">#WordPress</a></span></div><div class="columns is-mobile is-multiline article-nav"><span class="column is-12-mobile is-half-desktop article-nav-prev"><a href="/tech/connect-to-existing-aws-appsync-api-from-a-react-application/">Connect to existing AWS AppSync API from a React Application</a> </span><span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/tech/easy-dual-wan-load-balancing-with-mikrotik-routeros-pcc/">Easy Dual WAN Load Balancing with MikroTik RouterOS PCC</a></span></div></article><div class="sharebox"><div class="sharethis-inline-share-buttons"></div><script async="" type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=6030430e289b2f0011212bb6&amp;product=sop"></script></div><div class="comments"><h3 class="title is-4">Comments</h3><div id="isso-thread" data-title="29 Code Snippets for WordPress Users"></div><script async="" data-isso="//comments.qualityology.com" src="//comments.qualityology.com/js/embed.min.js" data-isso-require-author="true" data-isso-require-email="true" data-isso-avatar="false" data-isso-gravatar="true" data-isso-vote="true" data-isso-reveal-on-click="true"></script></div></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered">© 2021 Qualityology&nbsp;</div><div class="column is-hidden-mobile"></div></div></div></footer><script src="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>window.FontAwesomeConfig={searchPseudoElements:!0},moment.locale("en-AU")</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><style>.hljs{position:relative}.hljs .clipboard-btn{float:right;color:#9a9a9a;background:0 0;border:none;cursor:pointer}.hljs .clipboard-btn:hover{color:#8a8a8a}.hljs>.clipboard-btn{display:none;position:absolute;right:4px;top:4px}.hljs:hover>.clipboard-btn{display:inline}.hljs>figcaption>.clipboard-btn{margin-right:4px}</style><script>$(document).ready(function(){$("figure.hljs").each(function(t,e){var a="code-"+t,r=e.querySelector(".code"),t=$('<button>Copy <i class="far fa-clipboard"></i></button>');r.id=a,t.addClass("clipboard-btn"),t.attr("data-clipboard-target-id",a);a=e.querySelector("figcaption");a?a.append(t[0]):e.prepend(t[0])}),new ClipboardJS(".clipboard-btn",{target:function(t){return document.getElementById(t.getAttribute("data-clipboard-target-id"))}}).on("success",function(t){t.clearSelection()})})</script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script src="/bundle.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"};

            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 3,
                processImages: null,
            };
        ;
window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});;
!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>