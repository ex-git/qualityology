<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta charset="utf-8"><title>Connect to existing AWS AppSync API from a React Application | Tech | Qualityology</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="preconnect" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="preconnect" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="preconnect" href="//ajax.googleapis.com"><link rel="dns-prefetch" href="//ajax.googleapis.com"><link rel="canonical" href="https://www.qualityology.com/tech/connect-to-existing-aws-appsync-api-from-a-react-application/"><meta name="description" content="Have an existing API within AWS AppSync and need to connect it from a React web application? If you are not completely new to GraphQL you should know that the most popular GraphQL client is Apollo.  T"><meta property="og:type" content="article"><meta property="og:title" content="Connect to existing AWS AppSync API from a React Application"><meta property="og:url" content="https://www.qualityology.com/tech/connect-to-existing-aws-appsync-api-from-a-react-application/index.html"><meta property="og:site_name" content="Qualityology - Let&#39;s get the most out of life!"><meta property="og:description" content="Have an existing API within AWS AppSync and need to connect it from a React web application? If you are not completely new to GraphQL you should know that the most popular GraphQL client is Apollo.  T"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://www.qualityology.com/2021/aws_appsync.jpeg"><meta property="article:published_time" content="2021-02-27T04:53:22.000Z"><meta property="article:modified_time" content="2021-03-05T05:01:23.045Z"><meta property="article:author" content="Evan Xu"><meta property="article:tag" content="Server"><meta property="article:tag" content="React"><meta property="article:tag" content="API"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.qualityology.com/2021/aws_appsync.jpeg"><link rel="icon" type="image/png" href="/assets/logo.png"><link rel="apple-touch-icon" href="/assets/logo_160.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/logo_304.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/logo_360.png"><link rel="apple-touch-icon" sizes="167x167" href="/assets/logo_334.png"><meta name="apple-mobile-web-app-title" content="Connect to existing AWS AppSync API from a React Application | Tech | Qualityology"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.9.2/css/bulma.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto&display=swap"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css"><link rel="stylesheet" href="/css/style.css"><script>const pageLoaded=()=>{const o=window.adsbygoogle||[];o.push({}),o.push({})}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-6144848-7"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-6144848-7")</script><meta name="generator" content="Hexo 5.4.0"></head><body onload="pageLoaded()"><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item navbar-logo" href="/"><img src="/assets/loading.gif" data-original="/assets/logo.png" alt height="28"></a><div class="navbar-burger"><span></span> <span></span> <span></span></div></div><div class="navbar-menu navbar-start"><span class="navbar-item"><a href="/lifestyle">Lifestyle </a></span><span class="navbar-item is-active"><a href="/tech">Technology</a></span></div><div class="navbar-menu navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc"><a class="navbar-item" title="Table of Contents"><i class="fa fa-list"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="#Use-Apollo-client">1&nbsp;&nbsp;<b>Use Apollo client</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Use-AWS-AppSync-JavaScript-SDK">2&nbsp;&nbsp;<b>Use AWS AppSync JavaScript SDK</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Use-AWS-Amplify">3&nbsp;&nbsp;<b>Use AWS Amplify</b></a></div></div></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-4 is-size-4-mobile" itemprop="name">Connect to existing AWS AppSync API from a React Application</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2021-02-27T04:53:22.000Z" itemprop="datePublished">Feb 26 2021</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/tech/">tech</a> </span><span class="column is-narrow">6 minutes read (About 895 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><p>Have an existing API within AWS AppSync and need to connect it from a React web application? If you are not completely new to GraphQL you should know that the most popular GraphQL client is Apollo.</p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="9746105168" data-ad-format="auto" data-full-width-responsive="true"></ins><p>There are many different way to connect to AWS AppSync with React, using different packages. Some required more packages/dependencies.</p><p><img src="/assets/loading.gif" data-original="/2021/aws_appsync.jpeg" alt="aws_appsync"></p><ol><li><h2 id="Use-Apollo-client"><a href="#Use-Apollo-client" class="headerlink" title="Use Apollo client"></a>Use Apollo client</h2></li></ol><p>The latest version <code>@apollo/client</code> can handle AWS AppSync&#x2019;s query and mutation just fine with simple setup and also support React hook out of the box. Per their official doc, they will only support <code>useQuery</code> for query and <code>useMutation</code> for mutation hooks in their future release. Component based query and mutation will still work but will not be supported. However, for subscription, <code>@apollo/client</code> and AWS AppSync API won&#x2019;t work without complex setup because AppSync&#x2019;s subscriptions use MQTT as the transport layer, but <code>@apollo/client</code> support WebSockets.</p><p>If you are using React with version that support hook, and you don&#x2019;t have the need for subscription, this option will work very well.</p><ol><li>Install required package<br><code>yarn add @apollo/client aws-appsync-auth-link</code></li><li>Create client.js with following setup. <code>aws-exports</code> is the config download from your AWS AppSync API</li></ol><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> {</span><br><span class="line">    ApolloClient, ApolloLink, InMemoryCache, createHttpLink,</span><br><span class="line">} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@apollo/client&apos;</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> { createAuthLink } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;aws-appsync-auth-link&apos;</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> AppSyncConfig <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./aws-exports&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> url = AppSyncConfig.aws_appsync_graphqlEndpoint;</span><br><span class="line"><span class="hljs-keyword">const</span> region = AppSyncConfig.aws_project_region;</span><br><span class="line"><span class="hljs-keyword">const</span> auth = {</span><br><span class="line">    type: AppSyncConfig.aws_appsync_authenticationType,</span><br><span class="line">    apiKey: AppSyncConfig.aws_appsync_apiKey,</span><br><span class="line">};</span><br><span class="line"><span class="hljs-keyword">const</span> link = ApolloLink.from([</span><br><span class="line">    <span class="hljs-comment">// @ts-ignore</span></span><br><span class="line">    createAuthLink({ url, region, auth }),</span><br><span class="line">    <span class="hljs-comment">// @ts-ignore</span></span><br><span class="line">    createHttpLink({ <span class="hljs-attr">uri</span>: url }),</span><br><span class="line">]);</span><br><span class="line"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> ApolloClient({</span><br><span class="line">    link,</span><br><span class="line">    cache: <span class="hljs-keyword">new</span> InMemoryCache(),</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> client;</span><br></pre></td></tr></table></figure><ol start="3"><li>In your <code>index.js</code> add below code to Apollo client accessible.<br><code>ApolloProvider</code> will make your AppSync client accessable any child of the entry point component whic is App in this example.</li></ol><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> { ApolloProvider } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@apollo/client&apos;</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> client <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./graphQL/client&apos;</span>;</span><br><span class="line"></span><br><span class="line">&lt;ApolloProvider client={client}&gt;</span><br><span class="line">&lt;App /&gt;</span><br><span class="line">&lt;/ApolloProvider&gt;</span><br></pre></td></tr></table></figure><p>Example of making a mutation call:</p><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> {</span><br><span class="line">	useMutation,</span><br><span class="line">  gql</span><br><span class="line">} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@apollo/client&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> createTodo = gql<span class="hljs-string">`</span></span><br><span class="line"><span class="hljs-string">  mutation CreateTodo(</span></span><br><span class="line"><span class="hljs-string">      item: String!</span></span><br><span class="line"><span class="hljs-string">    ) {</span></span><br><span class="line"><span class="hljs-string">    createUpdateMonitor(input: {</span></span><br><span class="line"><span class="hljs-string">      item: item</span></span><br><span class="line"><span class="hljs-string">    }) {</span></span><br><span class="line"><span class="hljs-string">        item</span></span><br><span class="line"><span class="hljs-string">    }</span></span><br><span class="line"><span class="hljs-string">  }</span></span><br><span class="line"><span class="hljs-string">`</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> [createTodoMutation] = useMutation(createTodo);</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> handleCreateTodoClick = <span class="hljs-function">() =&gt;</span> {</span><br><span class="line">        <span class="hljs-keyword">const</span> todo = {</span><br><span class="line">          item: <span class="hljs-string">&apos;visit qualityology.com&apos;</span></span><br><span class="line">        }</span><br><span class="line">        createTodoMutation({</span><br><span class="line">            variables: todo,</span><br><span class="line">        })</span><br><span class="line">            .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Todo created successfully&apos;</span>))</span><br><span class="line">            .catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</span><br><span class="line">                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Error occurred&apos;</span>);</span><br><span class="line">                <span class="hljs-built_in">console</span>.log(err);</span><br><span class="line">            });</span><br><span class="line">    };</span><br></pre></td></tr></table></figure><ol start="2"><li><h2 id="Use-AWS-AppSync-JavaScript-SDK"><a href="#Use-AWS-AppSync-JavaScript-SDK" class="headerlink" title="Use AWS AppSync JavaScript SDK"></a>Use AWS AppSync JavaScript SDK</h2></li></ol><p>This SDK can be used with <code>apollo-client</code> and it is the offical SDK provided by AWS Labs. It support offline feature and also work with class components. Your <code>index.js</code> will need to be setup with the following code. You will need to download <code>aws-exports.js</code> from your AWS AppSync API and install <code>react-apollo aws-appsync-react</code> for this setup. ``aws-exports.js` contains the GraphQL endpoint url and your AWS AppSync API region, auth type info.</p><p><code>new AWSAppSyncClient</code> will create a new AppSync client and store it in the <code>client</code> variable.<br><code>ApolloProvider</code> will make your AppSync client accessible any child of the entry point component whic is App in this example.</p><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> AWSAppSyncClient <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;aws-appsync&apos;</span></span><br><span class="line"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> AppSyncConfig <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./aws-exports&apos;</span></span><br><span class="line"><span class="hljs-keyword">import</span> { ApolloProvider } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-apollo&apos;</span></span><br><span class="line"><span class="hljs-keyword">import</span> { Rehydrated } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;aws-appsync-react&apos;</span> <span class="hljs-comment">// this needs to also be installed when working with React</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> AWSAppSyncClient({</span><br><span class="line">  url: AppSyncConfig.graphqlEndpoint,</span><br><span class="line">  region: AppSyncConfig.region,</span><br><span class="line">  auth: {</span><br><span class="line">    type: AppSyncConfig.authenticationType,</span><br><span class="line">    apiKey: AppSyncConfig.apiKey,</span><br><span class="line">    <span class="hljs-comment">// jwtToken: async () =&gt; token, // Required when you use Cognito UserPools OR OpenID Connect. token object is obtained previously</span></span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> WithProvider = <span class="hljs-function">() =&gt;</span> (</span><br><span class="line">  &lt;ApolloProvider client={client}&gt;</span><br><span class="line">    &lt;Rehydrated&gt;</span><br><span class="line">      &lt;App /&gt;</span><br><span class="line">    &lt;/Rehydrated&gt;</span><br><span class="line">  &lt;/ApolloProvider&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">WithProvider</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;root&apos;</span>));</span><br></pre></td></tr></table></figure><p><code>Rehydrate</code> will make sure application cache has been read and is ready to use before rendering the app. If app is not ready, it will show the default <code>loading</code> text. If you want to confured the display text, you can call the render function as below.</p><figure class="highlight jsx hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Rehydrated</span><br><span class="line">  render={<span class="hljs-function">(<span class="hljs-params">{ rehydrated }</span>) =&gt;</span> (</span><br><span class="line">    rehydrated ? <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span> : <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Fancy loading function here!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">  )}</span><br><span class="line"> /&gt;</span><br></pre></td></tr></table></figure><p>This method didn&#x2019;t work with out test application because it always show loading so it is not recommended to use unless you want to try it with a good reason. You can get more configuration from the project page <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/awslabs/aws-mobile-appsync-sdk-js">here</a>.</p><ol start="3"><li><h2 id="Use-AWS-Amplify"><a href="#Use-AWS-Amplify" class="headerlink" title="Use AWS Amplify"></a>Use AWS Amplify</h2></li></ol><p>This is the easiest and with complete support of query, mutation, and subscription for AWS AppSync API. You will need your AWS AppSync API ID and the config export for this method. It can be found in AWS console.</p><ol><li><p>Install AWS Amplify cli.</p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @aws-amplify/cli</span><br></pre></td></tr></table></figure><p>The cli is needed for importing API</p></li><li><p>Navigate to your React project root folder.</p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">amplify init</span><br></pre></td></tr></table></figure></li><li><p>Add the codegen category to your React project.</p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">amplify add codegen --apiId YOUR_API_ID_HERE</span><br></pre></td></tr></table></figure></li><li><p>Generate client code.</p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">amplify codegen</span><br></pre></td></tr></table></figure><p>Follow the steps in your terminal.</p></li><li><p>Add <code>aws-amplify</code></p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install aws-amplify</span><br></pre></td></tr></table></figure><p>or use yarn</p><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add aws-amplify</span><br></pre></td></tr></table></figure></li><li><p>Add below code to your React application root <code>index.js</code></p><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> { Amplify } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;aws-amplify&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// some imports here</span></span><br><span class="line"><span class="hljs-keyword">import</span> { Amplify } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;aws-amplify&apos;</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> amplifyConfig <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./aws-exports&apos;</span>;</span><br><span class="line"><span class="hljs-comment">// after all the imports</span></span><br><span class="line"></span><br><span class="line">Amplify.configure(amplifyConfig);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// the rest of the code, ReactDOM etc.</span></span><br></pre></td></tr></table></figure><p>Example of how the function used to call mutation look like:</p><figure class="highlight js hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> { API, graphqlOperation } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;aws-amplify&apos;</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> { createTodo } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;/graphql/mutations&apos;</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> todo = {</span><br><span class="line">	item: <span class="hljs-string">&apos;visit qualityology.com&apos;</span></span><br><span class="line">}</span><br><span class="line"><span class="hljs-keyword">const</span> update = <span class="hljs-keyword">await</span> API.graphql(</span><br><span class="line">            graphqlOperation(</span><br><span class="line">                createTodo,</span><br><span class="line">                {</span><br><span class="line">                    input: todo,</span><br><span class="line">                },</span><br><span class="line">            ),</span><br><span class="line">        )</span><br><span class="line">        .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res)</span><br><span class="line">        .catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;error, creating user&apos;</span>, error));</span><br><span class="line"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;update&apos;</span>, update);</span><br></pre></td></tr></table></figure></li></ol><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="2953513567" data-ad-format="auto" data-full-width-responsive="true"></ins></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tag/server/">#Server</a></span> <span class="column is-narrow"><a class="tag is-light article-tag" href="/tag/react/">#React</a></span> <span class="column is-narrow"><a class="tag is-light article-tag" href="/tag/api/">#API</a></span></div><div class="columns is-mobile is-multiline article-nav"><span class="column is-12-mobile is-half-desktop article-nav-prev"><a href="/tech/install-docker-and-docker-compose-on-raspberry-pi/">Install Docker and Docker Compose On Raspberry Pi</a> </span><span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/tech/29-code-snippets-for-wordpress-users/">29 Code Snippets for WordPress Users</a></span></div></article><div class="sharebox"><div class="sharethis-inline-share-buttons"></div><script async type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=6030430e289b2f0011212bb6&amp;product=sop"></script></div><div class="comments"><h3 class="title is-4">Comments</h3><div id="isso-thread" data-title="Connect to existing AWS AppSync API from a React Application"></div><script async data-isso="//comments.qualityology.com" src="//comments.qualityology.com/js/embed.min.js" data-isso-require-author="true" data-isso-require-email="true" data-isso-avatar="false" data-isso-gravatar="true" data-isso-vote="true" data-isso-reveal-on-click="true"></script></div></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered">&copy; 2021 Qualityology&nbsp;</div><div class="column is-hidden-mobile"></div></div></div></footer><script src="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>window.FontAwesomeConfig={searchPseudoElements:!0},moment.locale("en-AU")</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><style>.hljs{position:relative}.hljs .clipboard-btn{float:right;color:#9a9a9a;background:0 0;border:none;cursor:pointer}.hljs .clipboard-btn:hover{color:#8a8a8a}.hljs>.clipboard-btn{display:none;position:absolute;right:4px;top:4px}.hljs:hover>.clipboard-btn{display:inline}.hljs>figcaption>.clipboard-btn{margin-right:4px}</style><script>$(document).ready(function(){$("figure.hljs").each(function(t,e){var a="code-"+t,r=e.querySelector(".code"),t=$('<button>Copy <i class="far fa-clipboard"></i></button>');r.id=a,t.addClass("clipboard-btn"),t.attr("data-clipboard-target-id",a);a=e.querySelector("figcaption");a?a.append(t[0]):e.prepend(t[0])}),new ClipboardJS(".clipboard-btn",{target:function(t){return document.getElementById(t.getAttribute("data-clipboard-target-id"))}}).on("success",function(t){t.clearSelection()})})</script><script src="/js/script.js"></script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 3,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>