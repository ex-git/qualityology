<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta charset="utf-8"><title>Add multiple usb printers to OpenWrt firmware router via p910nd using Hotplug | Tech | Qualityology</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="preconnect" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="preconnect" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="preconnect" href="//ajax.googleapis.com"><link rel="dns-prefetch" href="//ajax.googleapis.com"><link rel="canonical" href="https://www.qualityology.com/tech/add-multiple-usb-printers-to-openwrt-firmware-router-via-p910nd-using-hotplug/"><meta name="description" content="p910nd allow multiple printers through a socket connection to port 910n (where n&#x3D;1, 2, 3 &amp;#x2026;). So, we can share more than one printer to OpenWrt. In default, port number when you unplug and plug"><meta property="og:type" content="article"><meta property="og:title" content="Add multiple usb printers to OpenWrt firmware router via p910nd using Hotplug"><meta property="og:url" content="https://www.qualityology.com/tech/add-multiple-usb-printers-to-openwrt-firmware-router-via-p910nd-using-hotplug/index.html"><meta property="og:site_name" content="Qualityology - Let&#39;s get the most out of life!"><meta property="og:description" content="p910nd allow multiple printers through a socket connection to port 910n (where n&#x3D;1, 2, 3 &amp;#x2026;). So, we can share more than one printer to OpenWrt. In default, port number when you unplug and plug"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://www.qualityology.com/2014/07/p910nd-LuCI.jpg"><meta property="article:published_time" content="2014-07-15T04:32:01.000Z"><meta property="article:modified_time" content="2021-03-05T05:09:14.000Z"><meta property="article:author" content="Evan Xu"><meta property="article:tag" content="printers"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.qualityology.com/2014/07/p910nd-LuCI.jpg"><link rel="icon" type="image/png" href="/assets/logo.png"><link rel="apple-touch-icon" href="/assets/logo_160.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/logo_304.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/logo_360.png"><link rel="apple-touch-icon" sizes="167x167" href="/assets/logo_334.png"><meta name="apple-mobile-web-app-title" content="Add multiple usb printers to OpenWrt firmware router via p910nd using Hotplug | Tech | Qualityology"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.9.2/css/bulma.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto&display=swap"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css"><link rel="stylesheet" href="/css/style.css"><script>const pageLoaded=()=>{const o=window.adsbygoogle||[];o.push({}),o.push({})}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-6144848-7"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-6144848-7")</script><meta name="generator" content="Hexo 5.4.0"></head><body onload="pageLoaded()"><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item navbar-logo" href="/"><img src="/assets/loading.gif" data-original="/assets/logo.png" alt height="28"></a><div class="navbar-burger"><span></span> <span></span> <span></span></div></div><div class="navbar-menu navbar-start"><span class="navbar-item"><a href="/lifestyle">Lifestyle </a></span><span class="navbar-item is-active"><a href="/tech">Technology</a></span></div><div class="navbar-menu navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc"><a class="navbar-item" title="Table of Contents"><i class="fa fa-list"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="#Make-sure-the-printer-has-usb-essentials-or-support-for-the-parallel-port">1&nbsp;&nbsp;<b>Make sure the printer has usb essentials or support for the parallel port</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Install-support-for-printers">2&nbsp;&nbsp;<b>Install support for printers.</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Plug-in-the-printer-record-VID-and-PID">3&nbsp;&nbsp;<b>Plug in the printer, record VID and PID.</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Add-this-to-etc-hotplug-d-usb-11-multi-printers">4&nbsp;&nbsp;<b>Add this to /etc/hotplug.d/usb/11-multi-printers</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Log-in-to-OpenWrt-gt-service-gt-p910nd-gt-Printer-server-Finish-the-configuration">5&nbsp;&nbsp;<b>Log in to OpenWrt -&amp;amp;gt; service -&amp;amp;gt; p910nd -&amp;amp;gt; Printer server. Finish the configuration</b></a><hr class="navbar-divider"><a class="navbar-item" href="#Reboot-the-router-and-test">6&nbsp;&nbsp;<b>Reboot the router and test.</b></a></div></div></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-4 is-size-4-mobile" itemprop="name">Add multiple usb printers to OpenWrt firmware router via p910nd using Hotplug</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2014-07-15T04:32:01.000Z" itemprop="datePublished">Jul 14 2014</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/tech/">tech</a> </span><span class="column is-narrow">2 minutes read (About 369 words)</span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="9746105168" data-ad-format="auto" data-full-width-responsive="true"></ins><p>p910nd allow multiple printers through a socket connection to port 910n (where n=1, 2, 3 &#x2026;). So, we can share more than one printer to OpenWrt. In default, port number when you unplug and plug in different printers. The following configuration uses the Hotplug script to pair printers to designed ports. This allows multiple printers to be recognized, assigned ports based on the product ID, same ports assigned will resume when printers are connected/turned on. Works on both usb printer and parallel printer using serial to USB adapter.</p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6914615778368190" data-ad-slot="2953513567" data-ad-format="auto" data-full-width-responsive="true"></ins><ol><li><h2 id="Make-sure-the-printer-has-usb-essentials-or-support-for-the-parallel-port"><a href="#Make-sure-the-printer-has-usb-essentials-or-support-for-the-parallel-port" class="headerlink" title="Make sure the printer has usb essentials or support for the parallel port"></a>Make sure the printer has usb essentials or support for the parallel port</h2></li><li><h2 id="Install-support-for-printers"><a href="#Install-support-for-printers" class="headerlink" title="Install support for printers."></a>Install support for printers.</h2></li></ol><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install kmod-usb-printer kmod-lp luci-app-p910nd</span><br></pre></td></tr></table></figure><ol start="3"><li><h2 id="Plug-in-the-printer-record-VID-and-PID"><a href="#Plug-in-the-printer-record-VID-and-PID" class="headerlink" title="Plug in the printer, record VID and PID."></a>Plug in the printer, record VID and PID.</h2></li></ol><p>SSH to the printer and run:</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsusb -v</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg  grep printer</span><br></pre></td></tr></table></figure><p>Mark down the vid and pid for the printer. Repeat this process for all printers.</p><ol start="4"><li><h2 id="Add-this-to-etc-hotplug-d-usb-11-multi-printers"><a href="#Add-this-to-etc-hotplug-d-usb-11-multi-printers" class="headerlink" title="Add this to /etc/hotplug.d/usb/11-multi-printers"></a>Add this to /etc/hotplug.d/usb/11-multi-printers</h2></li></ol><p>The following code is a demo configuration for a Brother HL2140 on port 9100, a Zebra Eltron LP 2442 Label Thermal Printer on port 9101, and a Brother QL570 on port 9102. Note: $PRODUCT&#x201D; = &#x201C;4f9/27/100&#x201D; represents your printer&#x2019;s VendorId/ProductId/BcdVersion(1.00 = 100). VID=04f9, PID=0027</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line"># process USB and parallel printers only</span><br><span class="line">if [ &quot;$INTERFACE&quot; = &quot;7/1/1&quot; ]  [ &quot;$INTERFACE&quot; = &quot;7/1/2&quot; ]</span><br><span class="line">then</span><br><span class="line"></span><br><span class="line"># set -x</span><br><span class="line">DEV=&quot;none&quot;</span><br><span class="line"></span><br><span class="line"># Brother HL2140</span><br><span class="line"></span><br><span class="line">if [ &quot;$PRODUCT&quot; = &quot;4f9/33/100&quot; ]</span><br><span class="line">then</span><br><span class="line">VID=&quot;04f9&quot;</span><br><span class="line">PID=&quot;0033&quot;</span><br><span class="line">DEV=&quot;hl2140&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># Zebra LP2442</span><br><span class="line"></span><br><span class="line">if [ &quot;$PRODUCT&quot; = &quot;1645/6/100&quot; ]</span><br><span class="line">then</span><br><span class="line">VID=&quot;1645&quot;</span><br><span class="line">PID=&quot;0006&quot;</span><br><span class="line">DEV=&quot;lp2442&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># Brother QL570</span><br><span class="line"></span><br><span class="line">if [ &quot;$PRODUCT&quot; = &quot;4f9/2028/100&quot; ]</span><br><span class="line">then</span><br><span class="line">VID=&quot;04f9&quot;</span><br><span class="line">PID=&quot;2028&quot;</span><br><span class="line">DEV=&quot;ql570&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ &quot;$DEV&quot; != &quot;none&quot; ]</span><br><span class="line">then</span><br><span class="line">if [ &quot;$ACTION&quot; = &quot;add&quot; ]</span><br><span class="line">then</span><br><span class="line"></span><br><span class="line"># search for last printer assignment using dmesg</span><br><span class="line"></span><br><span class="line">LP=`dmesg  grep -i &quot;usblp.: USB Bidirectional printer dev .* if .* alt .* proto .* vid 0x$VID pid 0x$PID&quot;  grep -io &quot;lp[0-9]&quot;  tail -n 1`</span><br><span class="line"></span><br><span class="line">if [ &quot;$LP&quot; != &quot;&quot; ]</span><br><span class="line">then</span><br><span class="line">echo $LP &gt;/var/run/$DEV.lp</span><br><span class="line">ln -s /dev/usb/$LP /dev/$DEV</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ &quot;$ACTION&quot; = &quot;remove&quot; ]</span><br><span class="line">then</span><br><span class="line"># LP = `cat /var/run/$DEV.lp`</span><br><span class="line">rm /var/run/$DEV.lp</span><br><span class="line">rm /dev/$DEV</span><br><span class="line"></span><br><span class="line">fi</span><br><span class="line">fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><ol start="5"><li><h2 id="Log-in-to-OpenWrt-gt-service-gt-p910nd-gt-Printer-server-Finish-the-configuration"><a href="#Log-in-to-OpenWrt-gt-service-gt-p910nd-gt-Printer-server-Finish-the-configuration" class="headerlink" title="Log in to OpenWrt -&gt; service -&gt; p910nd -&gt; Printer server. Finish the configuration"></a>Log in to OpenWrt -&gt; service -&gt; p910nd -&gt; Printer server. Finish the configuration</h2></li></ol><p>Device = &#x201C;/dev/Device name from the code above&#x201D; Port = Assigned port from the code above <img src="/assets/loading.gif" data-original="/2014/07/p910nd-LuCI.jpg" alt="P910nd Luci"></p><ol start="6"><li><h2 id="Reboot-the-router-and-test"><a href="#Reboot-the-router-and-test" class="headerlink" title="Reboot the router and test."></a>Reboot the router and test.</h2></li></ol></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tag/printers/">#printers</a></span></div><div class="columns is-mobile is-multiline article-nav"><span class="column is-12-mobile is-half-desktop article-nav-prev"><a href="/tech/bridge-multiple-lan-ports-in-pfsense-2-1/">Bridge Multiple LAN ports/NICs in pfSense 2.1</a> </span><span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/tech/configure-sendmail-to-use-a-different-port-for-outgoing-mail-other-than-25/">Configure sendmail to use a different port for outgoing mail other than 25</a></span></div></article><div class="sharebox"><div class="sharethis-inline-share-buttons"></div><script async type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=6030430e289b2f0011212bb6&amp;product=sop"></script></div><div class="comments"><h3 class="title is-4">Comments</h3><div id="isso-thread" data-title="Add multiple usb printers to OpenWrt firmware router via p910nd using Hotplug"></div><script async data-isso="//comments.qualityology.com" src="//comments.qualityology.com/js/embed.min.js" data-isso-require-author="true" data-isso-require-email="true" data-isso-avatar="false" data-isso-gravatar="true" data-isso-vote="true" data-isso-reveal-on-click="true"></script></div></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered">&copy; 2021 Qualityology&nbsp;</div><div class="column is-hidden-mobile"></div></div></div></footer><script src="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>window.FontAwesomeConfig={searchPseudoElements:!0},moment.locale("en-AU")</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><style>.hljs{position:relative}.hljs .clipboard-btn{float:right;color:#9a9a9a;background:0 0;border:none;cursor:pointer}.hljs .clipboard-btn:hover{color:#8a8a8a}.hljs>.clipboard-btn{display:none;position:absolute;right:4px;top:4px}.hljs:hover>.clipboard-btn{display:inline}.hljs>figcaption>.clipboard-btn{margin-right:4px}</style><script>$(document).ready(function(){$("figure.hljs").each(function(t,e){var a="code-"+t,r=e.querySelector(".code"),t=$('<button>Copy <i class="far fa-clipboard"></i></button>');r.id=a,t.addClass("clipboard-btn"),t.attr("data-clipboard-target-id",a);a=e.querySelector("figcaption");a?a.append(t[0]):e.prepend(t[0])}),new ClipboardJS(".clipboard-btn",{target:function(t){return document.getElementById(t.getAttribute("data-clipboard-target-id"))}}).on("success",function(t){t.clearSelection()})})</script><script src="/js/script.js"></script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 3,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>